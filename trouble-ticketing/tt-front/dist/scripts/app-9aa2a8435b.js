!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?exports["ng-table"]=e(require("angular")):t["ng-table"]=e(t.angular)}(this,function(t){return function(t){function e(n){if(a[n])return a[n].exports;var l=a[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,e,a){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=33)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var a=e.slice(1),n=t[e[0]];return function(t,e,l){n.apply(this,[t,e,l].concat(a))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(e,a){e.exports=t},function(t,e,a){"use strict";function n(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var l=a(0),s=a(4),o=a(5),i=a(6),r=a(7),c=a(8),d=a(9),u=a(10),p=a(11),m=a(12),g=a(13),f=a(14),v=a(15),b=a(16),h=a(17);a(25),a(27),a(26),a(28),a(31),a(30),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=l.module("ngTable-browser",[]).directive("ngTable",s.ngTable).factory("ngTableColumn",o.ngTableColumn).directive("ngTableColumnsBinding",i.ngTableColumnsBinding).controller("ngTableController",r.ngTableController).directive("ngTableDynamic",c.ngTableDynamic).provider("ngTableFilterConfig",d.ngTableFilterConfigProvider).directive("ngTableFilterRow",u.ngTableFilterRow).controller("ngTableFilterRowController",p.ngTableFilterRowController).directive("ngTableGroupRow",m.ngTableGroupRow).controller("ngTableGroupRowController",g.ngTableGroupRowController).directive("ngTablePagination",f.ngTablePagination).directive("ngTableSelectFilterDs",v.ngTableSelectFilterDs).directive("ngTableSorterRow",b.ngTableSorterRow).controller("ngTableSorterRowController",h.ngTableSorterRowController),n(a(18))},function(t,e,a){"use strict";function n(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var l=a(0),s=a(19),o=a(20),i=a(22),r=a(21);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=l.module("ngTable-core",[]).provider("ngTableDefaultGetData",s.ngTableDefaultGetDataProvider).value("ngTableDefaults",o.ngTableDefaults).factory("NgTableParams",i.ngTableParamsFactory).factory("ngTableEventsChannel",r.ngTableEventsChannel),n(a(23))},,function(t,e,a){"use strict";function n(t,e){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var a,n,s=[],o=0,i=[];return l.forEach(t.find("tr"),function(t){i.push(l.element(t))}),a=i.filter(function(t){return!t.hasClass("ng-table-group")})[0],n=i.filter(function(t){return t.hasClass("ng-table-group")})[0],a?(l.forEach(a.find("td"),function(t){var a=l.element(t);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var i=function(t){return a.attr("x-data-"+t)||a.attr("data-"+t)||a.attr(t)},r=function(t,e){a.attr("x-data-"+t)?a.attr("x-data-"+t,e):a.attr("data"+t)?a.attr("data"+t,e):a.attr(t,e)},c=function(t){var a=i(t);if(a){var n,l=function(t){return void 0!==n?n:e(a)(t)};return l.assign=function(t,l){var s=e(a);s.assign?s.assign(t.$parent,l):n=l},l}},d=i("title-alt")||i("title");d&&a.attr("data-title-text","{{"+d+"}}"),s.push({id:o++,title:c("title"),titleAlt:c("title-alt"),headerTitle:c("header-title"),sortable:c("sortable"),"class":c("header-class"),filter:c("filter"),groupable:c("groupable"),headerTemplateURL:c("header"),filterData:c("filter-data"),show:a.attr("ng-if")?c("ng-if"):void 0}),(n||a.attr("ng-if"))&&r("ng-if","$columns["+(s.length-1)+"].show(this)")}}),function(t,e,a,n){t.$columns=s=n.buildColumns(s),n.setupBindingsToInternalScope(a.ngTable),n.loadFilterData(s),n.compileDirectiveTemplates()}):void 0}}}var l=a(0);n.$inject=["$q","$parse"],e.ngTable=n},function(t,e,a){"use strict";function n(){function t(t,a,s){var o=Object.create(t),i=e();for(var r in i)void 0===o[r]&&(o[r]=i[r]),l.isFunction(o[r])||!function(e){var a=function l(){return 1!==arguments.length||n(arguments[0])?t[e]:void l.assign(null,arguments[0])};a.assign=function(a,n){t[e]=n},o[e]=a}(r),function(e){var i=o[e];o[e]=function(){if(1!==arguments.length||n(arguments[0])){var e=arguments[0]||a,r=Object.create(e);return l.extend(r,{$column:o,$columns:s}),i.call(t,r)}i.assign(null,arguments[0])},i.assign&&(o[e].assign=i.assign)}(r);return o}function e(){return{"class":a(""),filter:a(!1),groupable:a(!1),filterData:l.noop,headerTemplateURL:a(!1),headerTitle:a(""),sortable:a(!1),show:a(!0),title:a(""),titleAlt:a("")}}function a(t){var e=t,a=function l(){return 1!==arguments.length||n(arguments[0])?e:void l.assign(null,arguments[0])};return a.assign=function(t,a){e=a},a}function n(t){return null!=t&&l.isFunction(t.$new)}return{buildColumn:t}}var l=a(0);n.$inject=[],e.ngTableColumn=n},function(t,e){"use strict";function a(t){function e(e,a,n){var l=t(n.ngTableColumnsBinding).assign;l&&e.$watch("$columns",function(t){var a=(t||[]).slice(0);l(e,a)})}var a={restrict:"A",require:"ngTable",link:e};return a}a.$inject=["$parse"],e.ngTableColumnsBinding=a},function(t,e,a){"use strict";function n(t,e,a,n,s,o,i,r,c,d){function u(e){if(e&&!t.params.hasErrorState()){var a=t.params,n=a.settings().filterOptions;if(a.hasFilterChanges()){var l=function(){a.page(1),a.reload()};n.filterDelay?h(l,n.filterDelay):l()}else a.reload()}}function p(){o.showFilter?t.$parent.$watch(o.showFilter,function(e){t.show_filter=e}):t.$watch(f,function(e){t.show_filter=e}),o.disableFilter&&t.$parent.$watch(o.disableFilter,function(e){t.$filterRow.disabled=e})}function m(){if(t.$groupRow={show:!1},o.showGroup){var e=n(o.showGroup);t.$parent.$watch(e,function(e){t.$groupRow.show=e}),e.assign&&t.$watch("$groupRow.show",function(a){e.assign(t.$parent,a)})}else t.$watch("params.hasGroup()",function(e){t.$groupRow.show=e})}function g(){return(t.$columns||[]).filter(function(e){return e.show(t)})}function f(){return!!t.$columns&&v(t.$columns,function(e){return e.show(t)&&!!e.filter(t)})}function v(t,e){for(var a=!1,n=0;n<t.length;n++){var l=t[n];if(e(l)){a=!0;break}}return a}function b(){d.onAfterReloadData(function(e,a){var n=g();e.hasGroup()?(t.$groups=a||[],t.$groups.visibleColumnCount=n.length):(t.$data=a||[],t.$data.visibleColumnCount=n.length)},t,function(e){return t.params===e}),d.onPagesChanged(function(e,a){t.pages=a},t,function(e){return t.params===e})}t.$filterRow={disabled:!1},t.$loading=!1,t.hasOwnProperty("params")||(t.params=new e(!0));var h=function(){var t;return function(e,n){a.cancel(t),t=a(e,n)}}();t.$watch("params",function(t,e){t!==e&&t&&t.reload()},!1),t.$watch("params.isDataReloadRequired()",u),this.compileDirectiveTemplates=function(){if(!i.hasClass("ng-table")){t.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},i.addClass("ng-table");var e=null,a=!1;l.forEach(i.children(),function(t){"THEAD"===t.tagName&&(a=!0)}),a||(e=l.element('<thead ng-include="templates.header"></thead>',r),i.prepend(e));var n=l.element('<div ng-table-pagination="params" template-url="templates.pagination"></div>',r);i.after(n),e&&s(e)(t),s(n)(t)}},this.loadFilterData=function(e){function a(t){return t&&"object"==typeof t&&"function"==typeof t.then}l.forEach(e,function(e){var n=e.filterData(t);return n?a(n)?(delete e.filterData,n.then(function(t){l.isArray(t)||l.isFunction(t)||l.isObject(t)||(t=[]),e.data=t})):e.data=n:void delete e.filterData})},this.buildColumns=function(e){var a=[];return(e||[]).forEach(function(e){a.push(c.buildColumn(e,t,a))}),a},this.parseNgTableDynamicExpr=function(t){if(!t||t.indexOf(" with ")>-1){var e=t.split(/\s+with\s+/);return{tableParams:e[0],columns:e[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(e){t.$watch(e,function(e){void 0!==e&&(t.params=e)},!1),p(),m()},b()}var l=a(0);n.$inject=["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","$document","ngTableColumn","ngTableEventsChannel"],e.ngTableController=n},function(t,e,a){"use strict";function n(){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var e;return l.forEach(t.find("tr"),function(t){t=l.element(t),t.hasClass("ng-table-group")||e||(e=t)}),e?(l.forEach(e.find("td"),function(t){var e=l.element(t),a=function(t){return e.attr("x-data-"+t)||e.attr("data-"+t)||e.attr(t)},n=a("title");n||e.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var s=e.attr("ng-if");s||e.attr("ng-if","$columns[$index].show(this)")}),function(t,e,a,n){var l=n.parseNgTableDynamicExpr(a.ngTableDynamic);n.setupBindingsToInternalScope(l.tableParams),n.compileDirectiveTemplates(),t.$watchCollection(l.columns,function(e){t.$columns=n.buildColumns(e),n.loadFilterData(t.$columns)})}):void 0}}}var l=a(0);n.$inject=[],e.ngTableDynamic=n},function(t,e,a){"use strict";function n(){function t(){e()}function e(){s=o}function a(t){var e=l.extend({},s,t);e.aliasUrls=l.extend({},s.aliasUrls,t.aliasUrls),s=e}function n(){function t(t,e){var a;return a="string"!=typeof t?t.id:t,-1!==a.indexOf("/")?a:n.getUrlForAlias(a,e)}function e(t,e){return s.aliasUrls[t]||s.defaultBaseUrl+t+s.defaultExt}var a,n={config:a,getTemplateUrl:t,getUrlForAlias:e};return Object.defineProperty(n,"config",{get:function(){return a=a||l.copy(s)},enumerable:!0}),n}var s,o={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};this.$get=n,this.resetConfigs=e,this.setConfig=a,t(),n.$inject=[]}var l=a(0);n.$inject=[],e.ngTableFilterConfigProvider=n},function(t,e,a){"use strict";function n(){var t={restrict:"E",replace:!0,templateUrl:l,scope:!0,controller:"ngTableFilterRowController"};return t}var l=a(24);n.$inject=[],e.ngTableFilterRow=n},function(t,e){"use strict";function a(t,e){t.config=e,t.getFilterCellCss=function(t,e){if("horizontal"!==e)return"s12";var a=Object.keys(t).length,n=parseInt((12/a).toString(),10);return"s"+n},t.getFilterPlaceholderValue=function(t,e){return"string"==typeof t?"":t.placeholder}}a.$inject=["$scope","ngTableFilterConfig"],e.ngTableFilterRowController=a},function(t,e,a){"use strict";function n(){var t={restrict:"E",replace:!0,templateUrl:l,scope:!0,controller:"ngTableGroupRowController",controllerAs:"dctrl"};return t}var l=a(29);n.$inject=[],e.ngTableGroupRow=n},function(t,e){"use strict";function a(t){function e(){t.getGroupables=s,t.getGroupTitle=l,t.getVisibleColumns=o,t.groupBy=i,t.isSelectedGroup=c,t.toggleDetail=u,t.$watch("params.group()",d,!0)}function a(){var e;e=t.params.hasGroup(t.$selGroup,"asc")?"desc":t.params.hasGroup(t.$selGroup,"desc")?"":"asc",t.params.group(t.$selGroup,e)}function n(e){return t.$columns.filter(function(a){return a.groupable(t)===e})[0]}function l(e){return r(e)?e.title:e.title(t)}function s(){var e=t.$columns.filter(function(e){return!!e.groupable(t)});return p.concat(e)}function o(){return t.$columns.filter(function(e){return e.show(t)})}function i(e){c(e)?a():r(e)?t.params.group(e):t.params.group(e.groupable(t))}function r(t){return"function"==typeof t}function c(e){return r(e)?e===t.$selGroup:e.groupable(t)===t.$selGroup}function d(e){var a=n(t.$selGroup);if(a&&a.show.assign&&a.show.assign(t,!0),r(e))p=[e],t.$selGroup=e,t.$selGroupTitle=e.title;else{var l=Object.keys(e||{})[0],s=n(l);s&&(t.$selGroupTitle=s.title(t),t.$selGroup=l,s.show.assign&&s.show.assign(t,!1))}}function u(){return t.params.settings().groupOptions.isExpanded=!t.params.settings().groupOptions.isExpanded,t.params.reload()}var p=[];e()}a.$inject=["$scope"],e.ngTableGroupRowController=a},function(t,e,a){"use strict";function n(t,e,a){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(n,s){a.onAfterReloadData(function(t){n.pages=t.generatePagesArray()},n,function(t){return t===n.params}),n.$watch("templateUrl",function(a){if(void 0!==a){var o=l.element('<div ng-include="templateUrl"></div>',e);s.append(o),t(o)(n)}})}}}var l=a(0);n.$inject=["$compile","$document","ngTableEventsChannel"],e.ngTablePagination=n},function(t,e){"use strict";function a(){var t={restrict:"A",controller:n};return t}function n(t,e,a,n){function l(){r=e(a.ngTableSelectFilterDs)(t),t.$watch(function(){return r&&r.data},s)}function s(){i(r).then(function(e){e&&!o(e)&&e.unshift({id:"",title:""}),e=e||[],t.$selectData=e})}function o(t){for(var e,a=0;a<t.length;a++){var n=t[a];if(n&&""===n.id){e=!0;break}}return e}function i(t){var e=t.data;return e instanceof Array?n.when(e):n.when(e&&e())}var r;l()}a.$inject=[],e.ngTableSelectFilterDs=a,n.$inject=["$scope","$parse","$attrs","$q"]},function(t,e,a){"use strict";function n(){var t={restrict:"E",replace:!0,templateUrl:l,scope:!0,controller:"ngTableSorterRowController"};return t}var l=a(32);n.$inject=[],e.ngTableSorterRow=n},function(t,e){"use strict";function a(t){function e(e,a){var n=e.sortable&&e.sortable();if(n&&"string"==typeof n){var l=t.params.settings().defaultSort,s="asc"===l?"desc":"asc",o=t.params.sorting()&&t.params.sorting()[n]&&t.params.sorting()[n]===l,i=a.ctrlKey||a.metaKey?t.params.sorting():{};i[n]=o?s:l,t.params.parameters({sorting:i})}}t.sortBy=e}a.$inject=["$scope"],e.ngTableSorterRowController=a},function(t,e){"use strict"},function(t,e,a){"use strict";var n=a(0),l=function(){function t(){function t(t){function a(a){var l=a.settings().filterOptions;return n.isFunction(l.filterFn)?l.filterFn:t(l.filterFilterName||e.filterFilterName)}function l(a){return t(e.sortingFilterName)}function s(t,e){if(!e.hasFilter())return t;var n=e.filter(!0),l=Object.keys(n),s=l.reduce(function(t,e){return t=c(t,n[e],e)},{}),o=a(e);return o.call(e,t,s,e.settings().filterOptions.filterComparator)}function o(t,e){var a=t.slice((e.page()-1)*e.count(),e.page()*e.count());return e.total(t.length),a}function i(t,e){var a=e.orderBy(),n=l(e);return a.length?n(t,a):t}function r(t,e){if(null==t)return[];var a=n.extend({},d,e.settings().dataOptions),l=a.applyFilter?s(t,e):t,r=a.applySort?i(l,e):l;return a.applyPaging?o(r,e):r}function c(t,e,a){var n=a.split("."),l=t,s=n[n.length-1],o=l,i=n.slice(0,n.length-1);return i.forEach(function(t){o.hasOwnProperty(t)||(o[t]={}),o=o[t]}),o[s]=e,l}var d={applyFilter:!0,applySort:!0,applyPaging:!0};return r.applyPaging=o,r.getFilterFn=a,r.getOrderByFn=l,r}this.filterFilterName="filter",this.sortingFilterName="orderBy";var e=this;this.$get=t,t.$inject=["$filter"]}return t}();e.ngTableDefaultGetDataProvider=l},function(t,e){"use strict";e.ngTableDefaults={params:{},settings:{}}},function(t,e,a){"use strict";function n(t){function e(t,e){var s=t.charAt(0).toUpperCase()+t.substring(1),o=(i={},i["on"+s]=a(t),i["publish"+s]=n(t),i);return l.extend(e,o);var i}function a(e){function a(t){return t?n(t)?t:function(e){return e===t}:function(t){return!0}}function n(t){return"function"==typeof t}function l(t){return t&&"function"==typeof t.$new}return function(n,s,o){var i,r=t;return l(s)?(r=s,i=a(o)):i=a(s),r.$on("ngTable:"+e,function(t,e){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];if(!e.isNullInstance){var s=[e].concat(a);i.apply(this,s)&&n.apply(this,s)}})}}function n(e){return function(){for(var a=[],n=0;n<arguments.length;n++)a[n-0]=arguments[n];t.$broadcast.apply(t,["ngTable:"+e].concat(a))}}var s={};return s=e("afterCreated",s),s=e("afterReloadData",s),s=e("datasetChanged",s),s=e("pagesChanged",s)}var l=a(0);n.$inject=["$rootScope"],e.ngTableEventsChannel=n},function(t,e,a){"use strict";function n(t,e,a,n,s,o){function i(a,i){function r(t){return!isNaN(parseFloat(t))&&isFinite(t)}function c(t){var e=S.groupOptions&&S.groupOptions.defaultSort;if(t){if(p(t))return null==t.sortDirection&&(t.sortDirection=e),t;if("object"==typeof t){for(var a in t)null==t[a]&&(t[a]=e);return t}return n={},n[t]=e,n}return t;var n}function d(t){var e=[];for(var a in t)e.push(("asc"===t[a]?"+":"-")+a);return e}function u(){var t=$.group;return{params:$,groupSortDirection:p(t)?t.sortDirection:void 0}}function p(t){return"function"==typeof t}function m(){var t=$.filter&&$.filter.$,e=b&&b.params.filter&&b.params.filter.$;return!l.equals(t,e)}function g(){S.filterOptions.filterDelay===D.filterDelay&&S.total<=S.filterOptions.filterDelayThreshold&&S.getData===x.getData&&(S.filterOptions.filterDelay=0)}function f(e){var a=S.interceptors||[];return a.reduce(function(e,a){var n=a.response&&a.response.bind(a)||t.when,l=a.responseError&&a.responseError.bind(a)||t.reject;return e.then(function(t){return n(t,y)},function(t){return l(t,y)})},e)}function v(){function e(t){return s(t.settings().dataset,t)}function a(e){var a,o=e.group(),i=void 0;if(p(o))a=o,i=o.sortDirection;else{var r=Object.keys(o)[0];i=o[r],a=function(t){return n(t,r)}}var c=e.settings(),u=c.dataOptions;c.dataOptions={applyPaging:!1};var m=c.getData,g=t.when(m(e));return g.then(function(t){var n={};l.forEach(t,function(t){var e=a(t);n[e]=n[e]||{data:[],$hideRows:!c.groupOptions.isExpanded,value:e},n[e].data.push(t)});var o=[];for(var r in n)o.push(n[r]);if(i){var u=s.getOrderByFn(),p=d({value:i});o=u(o,p)}return s.applyPaging(o,e)})["finally"](function(){c.dataOptions=u})}function n(t,e){var a;if(a="string"==typeof e?e.split("."):e,void 0!==t){if(0===a.length)return t;if(null!==t)return n(t[a[0]],a.slice(1))}}return{getData:e,getGroups:a}}"boolean"==typeof a&&(this.isNullInstance=!0);var b,h,y=this,w=!1,_=[],k=function(){for(var t=[],a=0;a<arguments.length;a++)t[a-0]=arguments[a];S.debugMode&&e.debug&&e.debug.apply(e,t)},D={filterComparator:void 0,filterDelay:500,filterDelayThreshold:1e4,filterFilterName:void 0,filterFn:void 0,filterLayout:"stack"},T={defaultSort:"asc",isExpanded:!0},x=v();this.data=[],this.parameters=function(t,e){if(e=e||!1,void 0!==typeof t){for(var a in t){var n=t[a];if(e&&a.indexOf("[")>=0){for(var s=a.split(/\[(.*)\]/).reverse(),o="",i=0,d=s.length;d>i;i++){var u=s[i];if(""!==u){var p=n;n={},n[o=u]=r(p)?parseFloat(p):p}}"sorting"===o&&($[o]={}),$[o]=l.extend($[o]||{},n[o])}else"group"===a?$[a]=c(t[a]):$[a]=r(t[a])?parseFloat(t[a]):t[a]}return k("ngTable: set parameters",$),this}return $},this.settings=function(t){if(l.isDefined(t)){t.filterOptions&&(t.filterOptions=l.extend({},S.filterOptions,t.filterOptions)),t.groupOptions&&(t.groupOptions=l.extend({},S.groupOptions,t.groupOptions)),l.isArray(t.dataset)&&(t.total=t.dataset.length);var e=S.dataset;S=l.extend(S,t),l.isArray(t.dataset)&&g();var a=t.hasOwnProperty("dataset")&&t.dataset!=e;if(a){w&&this.page(1),w=!1;var n=function(){o.publishDatasetChanged(y,t.dataset,e)};_?_.push(n):n()}return k("ngTable: set settings",S),this}return S},this.page=function(t){return void 0!==t?this.parameters({page:t}):$.page},this.total=function(t){return void 0!==t?this.settings({total:t}):S.total},this.count=function(t){return void 0!==t?this.parameters({count:t,page:1}):$.count},this.filter=function(t){if(null!=t&&"object"==typeof t)return this.parameters({filter:t,page:1});if(t===!0){for(var e=Object.keys($.filter),a={},n=0;n<e.length;n++){var l=$.filter[e[n]];null!=l&&""!==l&&(a[e[n]]=l)}return a}return $.filter},this.group=function(t,e){if(void 0===t)return $.group;var a={page:1};return p(t)&&void 0!==e?(t.sortDirection=e,a.group=t):"string"==typeof t&&void 0!==e?a.group=(n={},n[t]=e,n):a.group=t,this.parameters(a),this;var n},this.sorting=function(t,e){return"string"==typeof t&&void 0!==e?(this.parameters({sorting:(a={},a[t]=e,a)}),this):void 0!==t?this.parameters({sorting:t}):$.sorting;var a},this.isSortBy=function(t,e){return void 0!==e?void 0!==$.sorting[t]&&$.sorting[t]==e:void 0!==$.sorting[t]},this.orderBy=function(){return d($.sorting)},this.generatePagesArray=function(t,e,a,n){arguments.length||(t=this.page(),e=this.total(),a=this.count());var l,s,o,i;n=n&&6>n?6:n;var r=[];if(i=Math.ceil(e/a),i>1){r.push({type:"prev",number:Math.max(1,t-1),active:t>1}),r.push({type:"first",number:1,active:t>1,current:1===t}),s=Math.round((S.paginationMaxBlocks-S.paginationMinBlocks)/2),o=Math.max(2,t-s),l=Math.min(i-1,t+2*s-(t-o)),o=Math.max(2,o-(2*s-(l-o)));for(var c=o;l>=c;)c===o&&2!==c||c===l&&c!==i-1?r.push({type:"more",active:!1}):r.push({type:"page",number:c,active:t!==c,current:t===c}),c++;r.push({type:"last",number:i,active:t!==i,current:t===i}),r.push({type:"next",number:Math.min(i,t+1),active:i>t})}return r},this.isDataReloadRequired=function(){return!w||!l.equals(u(),b)||m()},this.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},this.hasGroup=function(t,e){return null==t?p($.group)||Object.keys($.group).length>0:p(t)?null==e?$.group===t:$.group===t&&t.sortDirection===e:null==e?-1!==Object.keys($.group).indexOf(t):$.group[t]===e},this.hasFilterChanges=function(){var t=b&&b.params.filter;return!l.equals($.filter,t)||m()},this.url=function(t){function e(t,e){a(s)?s.push(e+"="+encodeURIComponent(t)):s[e]=encodeURIComponent(t)}function a(e){return t}function n(t,e){return"group"===e||void 0!==typeof t&&""!==t}t=t||!1;var s=t?[]:{};for(var o in $)if($.hasOwnProperty(o)){var i=$[o],r=encodeURIComponent(o);if("object"==typeof i){for(var c in i)if(n(i[c],o)){var d=r+"["+encodeURIComponent(c)+"]";e(i[c],d)}}else!l.isFunction(i)&&n(i,o)&&e(i,r)}return s},this.reload=function(){var e=this,a=null;if(S.$loading=!0,b=l.copy(u()),w=!0,e.hasGroup())a=f(t.when(S.getGroups(e)));else{var n=S.getData;a=f(t.when(n(e)))}k("ngTable: reload data");var s=e.data;return a.then(function(t){return S.$loading=!1,h=null,e.data=t,o.publishAfterReloadData(e,t,s),e.reloadPages(),t})["catch"](function(e){return h=b,t.reject(e)})},this.hasErrorState=function(){return!(!h||!l.equals(h,u()))},this.reloadPages=function(){var t;return function(){var e=t,a=y.generatePagesArray(y.page(),y.total(),y.count());l.equals(e,a)||(t=a,o.publishPagesChanged(this,a,e))}}();var $={page:1,count:10,filter:{},sorting:{},group:{}};l.extend($,n.params);var S={$loading:!1,dataset:null,total:0,defaultSort:"desc",filterOptions:l.copy(D),groupOptions:l.copy(T),counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"};return this.settings(x),this.settings(n.settings),this.settings(i),this.parameters(a,!0),o.publishAfterCreated(this),l.forEach(_,function(t){t()}),_=null,this}return i}var l=a(0);n.$inject=["$q","$log","$filter","ngTableDefaults","ngTableDefaultGetData","ngTableEventsChannel"],e.ngTableParamsFactory=n},18,function(t,e,a){var n="ng-table/filterRow.html",l='<tr ng-show=show_filter class=ng-table-filters> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if=$column.show(this) class="filter {{$column.class(this)}}" ng-class="params.settings().filterOptions.filterLayout === \'horizontal\' ? \'filter-horizontal\' : \'\'"> <div ng-repeat="(name, filter) in $column.filter(this)" ng-include=config.getTemplateUrl(filter) class=filter-cell ng-class="[getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"> </div> </th> </tr> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/filters/number.html",l='<input type=number name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/filters/select-multiple.html",l='<select ng-options="data.id as data.title for data in $column.data" ng-disabled=$filterRow.disabled multiple=multiple ng-multiple=true ng-model=params.filter()[name] class="filter filter-select-multiple form-control" name={{name}}> </select> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/filters/select.html",l='<select ng-options="data.id as data.title for data in $selectData" ng-table-select-filter-ds=$column ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="filter filter-select form-control" name={{name}}> <option style=display:none value=""></option> </select> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/filters/text.html",l='<input type=text name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/groupRow.html",l='<tr ng-if=params.hasGroup() ng-show=$groupRow.show class=ng-table-group-header> <th colspan={{getVisibleColumns().length}} class=sortable ng-class="{\n                    \'sort-asc\': params.hasGroup($selGroup, \'asc\'),\n                    \'sort-desc\':params.hasGroup($selGroup, \'desc\')\n                  }"> <a href="" ng-click="isSelectorOpen = !isSelectorOpen" class=ng-table-group-selector> <strong class=sort-indicator>{{$selGroupTitle}}</strong> <button class="btn btn-default btn-xs ng-table-group-close" ng-click="$groupRow.show = false; $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon glyphicon-remove"></span> </button> <button class="btn btn-default btn-xs ng-table-group-toggle" ng-click="toggleDetail(); $event.preventDefault(); $event.stopPropagation();"> <span class=glyphicon ng-class="{\n                    \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded,\n                    \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded\n                }"></span> </button> </a> <div class=list-group ng-if=isSelectorOpen> <a href="" class=list-group-item ng-repeat="group in getGroupables()" ng-click=groupBy(group)> <strong>{{ getGroupTitle(group)}}</strong> <strong ng-class="isSelectedGroup(group) && \'sort-indicator\'"></strong> </a> </div> </th> </tr> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/header.html",l="<ng-table-group-row></ng-table-group-row> <ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> ",s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/pager.html",l='<div class="ng-cloak ng-table-pager" ng-if=params.data.length> <div ng-if=params.settings().counts.length class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type=button ng-class="{\'active\':params.count() == count}" ng-click=params.count(count) class="btn btn-default"> <span ng-bind=count></span> </button> </div> <ul ng-if=pages.length class="pagination ng-table-pagination"> <li class=page-item ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch=page.type> <a class=page-link ng-switch-when=prev ng-click=params.page(page.number) href="">&laquo;</a> <a class=page-link ng-switch-when=first ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=page ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=more ng-click=params.page(page.number) href="">&#8230;</a> <a class=page-link ng-switch-when=last ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=next ng-click=params.page(page.number) href="">&raquo;</a> </li> </ul> </div> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){var n="ng-table/sorterRow.html",l="<tr class=ng-table-sort-header> <th title={{$column.headerTitle(this)}} ng-repeat=\"$column in $columns\" ng-class=\"{\n                    'sortable': $column.sortable(this),\n                    'sort-asc': params.sorting()[$column.sortable(this)]=='asc',\n                    'sort-desc': params.sorting()[$column.sortable(this)]=='desc'\n                  }\" ng-click=\"sortBy($column, $event)\" ng-if=$column.show(this) ng-init=\"template = $column.headerTemplateURL(this)\" class=\"header {{$column.class(this)}}\"> <div ng-if=!template class=ng-table-header ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'div'}\"> <span ng-bind=$column.title(this) ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'span'}\"></span> </div> <div ng-if=template ng-include=template></div> </th> </tr> ",s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(n,l)}]),t.exports=n},function(t,e,a){"use strict";function n(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var l=a(0),s=a(2),o=a(1),i=l.module("ngTable",[s["default"].name,o["default"].name]);e.ngTable=i,n(a(2)),n(a(1))}]))}),function(t){"use strict";var e=function(e){var a=t.Deferred(),n=new FileReader;return n.onload=function(t){a.resolve(t.target.result)},n.onerror=a.reject,n.onprogress=a.notify,n.readAsDataURL(e),a.promise()};t.fn.cleanHtml=function(){var e=t(this).html();return e&&e.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},t.fn.wysiwyg=function(a){var n,l,s,o=this,i=function(){l.activeToolbarClass&&t(l.toolbarSelector).find(s).each(function(){var e=t(this).data(l.commandRole);document.queryCommandState(e)?t(this).addClass(l.activeToolbarClass):t(this).removeClass(l.activeToolbarClass)})},r=function(t,e){var a=t.split(" "),n=a.shift(),l=a.join(" ")+(e||"");document.execCommand(n,0,l),i()},c=function(){var t=window.getSelection();return t.getRangeAt&&t.rangeCount?t.getRangeAt(0):void 0},d=function(){n=c()},u=function(){var t=window.getSelection();if(n){try{t.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}t.addRange(n)}},p=function(a){o.focus(),t.each(a,function(a,n){/^image\//.test(n.type)?t.when(e(n)).done(function(t){r("insertimage",t)}).fail(function(t){l.fileUploadError("file-reader",t)}):l.fileUploadError("unsupported-file-type",n.type)})},m=function(t,e){u(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,e||"transparent"),d(),t.data(l.selectionMarker,e)},g=function(e,a){e.find(s).click(function(){u(),o.focus(),r(t(this).data(a.commandRole)),d()}),e.find("[data-toggle=dropdown]").click(u),e.find("input[type=text][data-"+a.commandRole+"]").on("webkitspeechchange change",function(){var e=this.value;this.value="",u(),e&&(o.focus(),r(t(this).data(a.commandRole),e)),d()}).on("focus",function(){var e=t(this);e.data(a.selectionMarker)||(m(e,a.selectionColor),e.focus())}).on("blur",function(){var e=t(this);e.data(a.selectionMarker)&&m(e,!1)}),e.find("input[type=file][data-"+a.commandRole+"]").change(function(){u(),"file"===this.type&&this.files&&this.files.length>0&&p(this.files),d(),this.value=""})},f=function(){o.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&e.files.length>0&&p(e.files)})};return l=t.extend({},t.fn.wysiwyg.defaults,a),s="a[data-"+l.commandRole+"],button[data-"+l.commandRole+"],input[type=button][data-"+l.commandRole+"]",l.dragAndDropImages&&f(),g(t(l.toolbarSelector),l),o.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){d(),i()}),t(window).bind("touchend",function(t){var e=o.is(t.target)||o.has(t.target).length>0,a=c(),n=a&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset;(!n||e)&&(d(),i())}),this},t.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright",
"ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(t,e){console.log("File upload error",t,e)}}}(window.jQuery),/*! nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
function(t){return"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,a){"use strict";var n,l,s,o,i,r,c,d,u,p,m,g,f,v,b,h,y,w,_,k,D,T,x,$,S,C,F,M,E,B,O;x={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},w="scrollbar",y="scroll",u="mousedown",p="mouseenter",m="mousemove",f="mousewheel",g="mouseup",h="resize",i="drag",r="enter",k="up",b="panedown",s="DOMMouseScroll",o="down",D="wheel",c="keydown",d="keyup",_="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,l=null,F=e.requestAnimationFrame,T=e.cancelAnimationFrame,E=a.createElement("div").style,O=function(){var t,e,a,n,l,s;for(n=["t","webkitT","MozT","msT","OT"],t=l=0,s=n.length;s>l;t=++l)if(a=n[t],e=n[t]+"ransform",e in E)return n[t].substr(0,n[t].length-1);return!1}(),B=function(t){return O===!1?!1:""===O?t:O+t.charAt(0).toUpperCase()+t.substr(1)},M=B("transform"),S=M!==!1,$=function(){var t,e,n;return t=a.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=y,e.top="-9999px",a.body.appendChild(t),n=t.offsetWidth-t.clientWidth,a.body.removeChild(t),n},C=function(){var t,a,n;return a=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(a))?(n=/Firefox\/\d{2}\./.exec(a),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,s){this.el=n,this.options=s,l||(l=$()),this.$el=t(this.el),this.doc=t(this.options.documentContext||a),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===s)(e===o&&t.originalEvent.detail>0||e===k&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===f){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===o&&t.originalEvent.wheelDelta<0||e===k&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;S?(t={},t[M]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},F?(T&&this.scrollRAF&&T(this.scrollRAF),this.scrollRAF=F(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass(t.options.activeClass),t.doc.bind(m,t.events[i]).bind(g,t.events[k]),t.body.bind(p,t.events[r]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(e){return t.isBeingDragged=!1,t.pane.removeClass(t.options.activeClass),t.doc.unbind(m,t.events[i]).unbind(g,t.events[k]),t.body.unbind(p,t.events[r]),!1}}(this),resize:function(t){return function(e){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,o),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,k),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var a;if(null!=e)return a=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,a&&(t.sliderY+=-a/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var a;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(a=t.events)[k].apply(a,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(h,t[h]),this.iOSNativeScrolling||(this.slider.bind(u,t[o]),this.pane.bind(u,t[b]).bind(""+f+" "+s,t[D])),this.$content.bind(""+y+" "+f+" "+s+" "+_,t[y])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(h,t[h]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+y+" "+f+" "+s+" "+_,t[y])},c.prototype.generate=function(){var t,a,n,s,o,i,r;return s=this.options,i=s.paneClass,r=s.sliderClass,t=s.contentClass,(o=this.$el.children("."+i)).length||o.children("."+r).length||this.$el.append('<div class="'+i+'"><div class="'+r+'" /></div>'),this.pane=this.$el.children("."+i),this.slider=this.pane.find("."+r),0===l&&C()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),a={right:-14,paddingRight:+n+14}):l&&(a={right:-l},this.$el.addClass(s.enabledClass)),null!=a&&this.$content.css(a),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,a,s,o,i,r,c,d,u,p,m;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,s=t.style,o=s.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+l,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),r=this.pane.outerHeight(!1),d=parseInt(this.pane.css("top"),10),i=parseInt(this.pane.css("bottom"),10),c=r+d+i,m=Math.round(c/e*r),m<this.options.sliderMinHeight?m=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&m>this.options.sliderMaxHeight&&(m=this.options.sliderMaxHeight),o===y&&s.overflowX!==y&&(m+=l),this.maxSliderTop=c-m,this.contentHeight=e,this.paneHeight=r,this.paneOuterHeight=c,this.sliderHeight=m,this.paneTop=d,this.slider.height(m),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&o!==y?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&o===y?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),a=this.$content.css("position"),("static"===a||"relative"===a)&&(p=parseInt(this.$content.css("right"),10),p&&this.$content.css({right:"",marginRight:p})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(f),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(f),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return T&&this.scrollRAF&&(T(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(t){return function(){t.pane.removeClass(t.options.flashedClass)}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var a,n;if((n=this.nanoscroller)||(a=t.extend({},x,e),this.nanoscroller=n=new v(this,a)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}),function(){"use strict";angular.module("cmdb",["ngCookies","ngSanitize","ngWebSocket","ui.router","ui.bootstrap","toastr","ngTable","perfect_scrollbar","angular-loading-bar","pascalprecht.translate","JSONedit","angularFileUpload","angularMoment"])}(),function(){"use strict";function t(t,e,a,n,l,s,o,i,r,c){var d=this;d.types=o,d.itemDetail=r,d.cancel=function(){t.dismiss()};var u=n.swal;d.ticket={impact:5},r.impact&&(d.ticket=r),d.cti_search_w="",d.item_groups=[],d.uploader=new s({queueLimit:5,alias:"upload"}),d.uploader.filters.push({name:"sizeFilter",fn:function(t){return t.size<=5242880}}),l.getData().then(function(t){d.baseData=t,d.item_groups=d.baseData.group}),d.group_arr_to_map=function(){d.group_map={};var t=[];angular.copy(d.baseData.group,t),angular.forEach(t,function(t){d.group_map[t.id]=t})},d.item_change=function(){d.group_arr_to_map();var t={};angular.copy(d.group_map,t),d.item_groups=[],angular.forEach(d.baseData.item_group_map,function(e){e.item_id==d.ticket.item&&(d.group_map[e.group_id].priority="*",d.item_groups.push(d.group_map[e.group_id]),delete t[e.group_id])}),angular.forEach(d.baseData.group,function(e){e.id in t&&d.item_groups.push(e)}),d.item_groups.length>0&&(d.ticket.work_group=d.item_groups[0].id)},d.group_change=function(){delete d.ticket.group_user},d.cti_search=function(){""!=d.cti_search_w.trim()&&e.open({templateUrl:"app/pages/tt/new/cti_search.html",controller:"CtiSearchController",controllerAs:"ctisearch",backdrop:"static",keyboard:!1,bindToController:!0,animation:!1,resolve:{cti_search_w:function(){return d.cti_search_w},baseData:function(){return d.baseData},cti_select:function(){return d.cti_select}}}),d.cti_search_w=""},d.cti_select=function(t,e,a){d.ticket.category=t,d.ticket.type=e,d.ticket.item=a,0!=a&&d.item_change()},d.submit=function(){var t="";t=r.impact?"/api/tt/person/update":"/api/tt/person/create",u({title:"Submit Confirm?",text:"确认提交?",type:"question",showCancelButton:!0}).then(function(){a.post(t,d.ticket).success(function(t){200===t.code&&(d.cancel(),c(),i.success("操作成功！"))}).error(function(t){i.error("操作失败！"+t)})})}}t.$inject=["$uibModalInstance","$uibModal","$http","$window","baseService","FileUploader","types","toastr","itemDetail","reload"],angular.module("cmdb").controller("NewEditController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o){var i=this,r=e.swal;i.types=l,i.ticket={template_user:s.target_user},i.items=s,i.cancel=function(){t.dismiss()},i.submit=function(){r({title:"Submit Confirm?",text:"确认提交?",type:"question",showCancelButton:!0}).then(function(){a.post("/api/tt/person/create/by_copy",i.ticket).success(function(t){200===t.code?(n.success("提交成功！"),o(),i.cancel()):n.error("操作失败！")}).error(function(t){n.error("操作失败！"+t)})})}}t.$inject=["$uibModalInstance","$window","$http","toastr","types","items","reload"],angular.module("cmdb").controller("CopyConfigController",t)}(),function(){"use strict";function t(t,e,a,n,l){var s=this;a.getData().then(function(t){s.baseData=t}),s.tableFilter={},s.querySerch=e.search(),s.search=function(){if(s.tickets=[],s.order_start&&(s.tableFilter.create_start=s.order_start),s.order_end&&(s.tableFilter.create_end=s.order_end),angular.equals(s.tableFilter,{}))return void l.error("ERR (NULL)");if(null===s.tableFilter.create_start&&delete s.tableFilter.create_start,null===s.tableFilter.create_end&&delete s.tableFilter.create_end,s.tableFilter.create_end&&s.tableFilter.create_start&&s.tableFilter.create_start>s.tableFilter.create_end)return void l.error("ERR (Time Wrong!)");s.searched=!0,s.loading=!0;var e=Math.trunc(s.tableFilter.create_start.getTime()/1e3),a=Math.trunc((s.tableFilter.create_end?s.tableFilter.create_end:new Date).getTime()/1e3),o=s.tableFilter.keyword?"&keyword="+s.tableFilter.keyword:"";t.get("/api/tt/statistics/get_todo_tts?start="+e+"&end="+a+"&all=1"+o).success(function(t){200===t.code?(s.loading=!1,s.tickets=t.data,s.tableParams=new n({count:25},{counts:[],dataset:s.tickets})):(s.loading=!1,l.error("获取数据失败"))}).error(function(t){s.loading=!1,l.error("获取数据失败"+t),console.error(t)})},s.querySerch.start&&(s.order_start=new Date(1e3*Number(s.querySerch.start)),s.order_end=new Date(1e3*Number(s.querySerch.end)),s.search()),s.resetFilter=function(){s.tableFilter={}},s.resetFilter()}t.$inject=["$http","$location","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("TodoTotalController",t)}(),function(){"use strict";function t(){var t=function(t,e,a){var n={category:"category",type:"type",item:"item",workgroup:"group",group_user:"group_user"};if(t&&e&&a){var l=t;return angular.forEach(n,function(n,s){s==e&&angular.forEach(a[n],function(a){return a.id==t?"workgroup"==e?void(l=a.group_name):"group_user"==e?void(l=a.email):void(l=a.name):void 0})}),"<nil>"==l?"":l}};return t}angular.module("cmdb").filter("historyColumnMap",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i){if(!t.params.id||12!=t.params.id.length)return void t.go("home.e404");var r=this,c=n.swal;r.no=t.params.id,r.isUpdating=!1,r.uploader=new o({alias:"upload",removeAfterUpload:!0}),r.uploader.filters.push({name:"sizeFilter",fn:function(t){return t.size<=5242880}}),r.uploader.onCompleteItem=function(t,e,a){200!=a?i.error("update error.("+a+")"):200!=e.code?i.error(e.data+"("+e.code+")"):(i.success(e.data),r.init())},r.del_attachment=function(t){c({title:"Delete Confirm?",text:"确认删除?("+t.name+")",type:"question",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/attachment/"+r.ticket.id+"/"+t.uuid).success(function(t){200==t.code&&(c("Success","删除成功","success"),r.init())})})["catch"](c.noop)},r.group_arr_to_map=function(){r.group_map={};var t=[];angular.copy(r.baseData.group,t),angular.forEach(t,function(t){r.group_map[t.id]=t})},r.initItemGroup=function(){r.group_arr_to_map();var t={};angular.copy(r.group_map,t),r.item_groups=[],angular.forEach(r.baseData.item_group_map,function(e){e.item_id==r.ticket.item&&(r.group_map[e.group_id].priority="*",r.item_groups.push(r.group_map[e.group_id]),delete t[e.group_id])}),angular.forEach(r.baseData.group,function(e){e.id in t&&r.item_groups.push(e)})},r.item_change=function(){r.initItemGroup()},r.group_change=function(){delete r.ticket.group_user},r.download=function(t){var e="/api/tt/attachment/download/"+r.ticket.id+"/"+t;n.open(e)},r.submit=function(){return angular.equals(r.ticket,r.oldTicket)?void i.warning("Nothing to update."):"resolved"!=r.ticket.status||""!=r.ticket.root_cause&&""!=r.ticket.solution?void c({title:"Update Confirm?",text:"确认更新?("+r.ticket.no+")",type:"question",showCancelButton:!0}).then(function(){r.isUpdating=!0,a.put("/api/tt/ticket/"+r.ticket.id,r.ticket).success(function(t){200==t.code&&(i.success(t.data),r.init()),r.isUpdating=!1})})["catch"](c.noop):(i.warning("事件状态解决，必须填写解决方案和根本原因<br>Root cause & Solution is required when status is 'Resolved'","",{timeOut:5e3}),void(r.tabActive=2))},r.getReplylog=function(t){a.get("/api/tt/common/replylog/"+t).success(function(t){r.replylog=t.data})},r.addReplylog=function(){""!=r.newReplylog&&"undefined"!=r.newReplylog&&a.post("/api/tt/common/replylog",{ticket_id:r.ticket.id,content:r.newReplylog}).success(function(t){i.success(t.data),r.init(),r.newReplylog=""})},r.getWorklog=function(t){a.get("/api/tt/common/worklog/"+t).success(function(t){r.worklog=t.data})},r.addWorklog=function(){""!=r.newWorklog&&"undefined"!=r.newWorklog&&a.post("/api/tt/common/worklog",{ticket_id:r.ticket.id,content:r.newWorklog}).success(function(t){i.success(t.data),r.init(),r.newWorklog=""})},r.getSyslog=function(t){a.get("/api/tt/common/syslog/"+t).success(function(t){r.syslog=t.data})},r.getStatusFlow=function(t){a.get("/api/tt/status_flow/"+t).success(function(t){r.status_flow=t.data})},r.getApplyUserOa=function(){a.get("/api/tt/base/get_user_info?user="+r.ticket.apply_user).success(function(t){r.OA_applicant=t.data})},r.changeStatus=function(){"resolved"==r.ticket.status&&(r.tabActive=2)},r.init=function(){r.isUpdating=!0,a.get("/api/tt/ticket/"+r.no).success(function(a){404==a.code&&t.go("home.e404"),200==a.code&&(r.ticket=a.data,r.oldTicket={},angular.copy(a.data,r.oldTicket),r.uploader.url="/api/tt/attachment/upload/"+r.ticket.id,r.uploader.queueLimit=5-r.ticket.attachment.length,r.isUpdating=!1,e.debug(r.ticket),l.getData().then(function(t){r.baseData=t,r.initItemGroup()}),r.getSyslog(r.ticket.id),r.getReplylog(r.ticket.id),r.getWorklog(r.ticket.id),r.getStatusFlow(r.ticket.id),r.getApplyUserOa())})},r.init()}t.$inject=["$state","$log","$http","$window","baseService","oauserService","FileUploader","toastr"],angular.module("cmdb").controller("TTShowController",t)}(),function(){"use strict";function t(t,e,a,n,l){var s=this;a.getData().then(function(t){s.baseData=t}),s.search=function(){return s.tickets=[],angular.equals(s.tableFilter,{})?void l.error("ERR (NULL)"):(null===s.tableFilter.create_start&&delete s.tableFilter.create_start,null===s.tableFilter.create_end&&delete s.tableFilter.create_end,s.tableFilter.create_end&&s.tableFilter.create_start&&s.tableFilter.create_start>s.tableFilter.create_end?void l.error("ERR (Time Wrong!)"):(s.searched=!0,s.loading=!0,void e.post("/api/tt/search/list/",s.tableFilter).success(function(t){200==t.code&&(s.tickets=t.data,s.tableParams=new n({count:25},{counts:[],dataset:s.tickets})),s.loading=!1})))},s.resetFilter=function(){s.tableFilter={}},s.resetFilter()}t.$inject=["$state","$http","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("TTSearchController",t)}(),function(){"use strict";function t(t,e,a,n,l,s){var o=this;n.getData().then(function(t){o.baseData=t}),o.querySerch=a.search(),o.tableFilter={},o.search=function(){if(o.tickets=[],o.order_start&&(o.tableFilter.create_start=o.order_start),o.order_end&&(o.tableFilter.create_end=o.order_end),angular.equals(o.tableFilter,{}))return void s.error("ERR (NULL)");if(null===o.tableFilter.create_start&&delete o.tableFilter.create_start,null===o.tableFilter.create_end&&delete o.tableFilter.create_end,o.tableFilter.create_end&&o.tableFilter.create_start&&o.tableFilter.create_start>o.tableFilter.create_end)return void s.error("ERR (Time Wrong!)");o.searched=!0,o.loading=!0;var t=Math.trunc(o.tableFilter.create_start.getTime()/1e3),a=Math.trunc((o.tableFilter.create_end?o.tableFilter.create_end:new Date).getTime()/1e3),n=o.tableFilter.keyword?"&keyword="+o.tableFilter.keyword:"";e.get("/api/tt/statistics/get_todo_tts?start="+t+"&end="+a+"&all=0"+n).success(function(t){200===t.code?(o.loading=!1,o.tickets=t.data,o.tableParams=new l({count:25},{counts:[],dataset:o.tickets})):(o.loading=!1,s.error("获取数据失败"))}).error(function(t){o.loading=!1,s.error("获取数据失败"+t),console.error(t)})},o.querySerch.start&&(o.order_start=new Date(1e3*Number(o.querySerch.start)),o.order_end=new Date(1e3*Number(o.querySerch.end)),o.search()),o.resetFilter=function(){o.tableFilter={}},o.resetFilter()}t.$inject=["$state","$http","$location","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("PersonalTodoController",t)}(),function(){"use strict";function t(t,e,a,n,l,s){var o=this;n.getData().then(function(t){o.baseData=t}),o.querySerch=a.search(),o.tableFilter={},o.search=function(){if(o.tickets=[],o.order_start&&(o.tableFilter.create_start=o.order_start),o.order_end&&(o.tableFilter.create_end=o.order_end),angular.equals(o.tableFilter,{}))return void s.error("ERR (NULL)");if(null===o.tableFilter.create_start&&delete o.tableFilter.create_start,null===o.tableFilter.create_end&&delete o.tableFilter.create_end,o.tableFilter.create_end&&o.tableFilter.create_start&&o.tableFilter.create_start>o.tableFilter.create_end)return void s.error("ERR (Time Wrong!)");o.searched=!0,o.loading=!0;var t=Math.trunc(o.tableFilter.create_start.getTime()/1e3),a=Math.trunc((o.tableFilter.create_end?o.tableFilter.create_end:new Date).getTime()/1e3),n=o.tableFilter.keyword?"&keyword="+o.tableFilter.keyword:"";e.get("/api/tt/statistics/get_tts?start="+t+"&end="+a+n).success(function(t){200===t.code?(o.loading=!1,o.tickets=t.data,o.tableParams=new l({count:25},{counts:[],dataset:o.tickets})):(o.loading=!1,s.error("获取数据失败"))}).error(function(t){o.loading=!1,s.error("获取数据失败"+t),console.error(t)})},o.querySerch.start&&(o.order_start=new Date(1e3*Number(o.querySerch.start)),o.order_end=new Date(1e3*Number(o.querySerch.end)),o.search()),o.resetFilter=function(){o.tableFilter={}},o.resetFilter()}t.$inject=["$state","$http","$location","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("OrderTotalController",t)}(),function(){"use strict";function t(t,e,a,n,l,s){var o=this;o.ticket=l,o.uploader=s,o.tstatus="loading",o.astatus="loading",o.uploader.onCompleteAll=function(){o.astatus="complete",o.redirect()},a.post("/api/tt/ticket",l).success(function(t){if(200==t.code){o.newTT=t.data+"";var e="0000000000",a=e.substring(0,10-o.newTT.length)+o.newTT;o.newTTNo="TT"+a,o.tstatus="success",o.uploader.queue.length>0?(angular.forEach(o.uploader.queue,function(t){t.url="/api/tt/attachment/upload/"+o.newTT}),o.uploader.uploadAll()):(o.astatus="complete",o.redirect())}else o.tstatus="error"}),o.go=function(t){n.close(),e.go(t)},o.cancel=function(){n.close()},o.timeSec=3,o.redirect=function(){t(function(){o.timeSec-=1,0==o.timeSec&&(o.cancel(),e.go("home.tt.show",{id:o.newTTNo}))},1e3,3)}}t.$inject=["$interval","$state","$http","$uibModalInstance","ticket","uploader"],angular.module("cmdb").controller("TTSubmitController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i,r){var c=this,d=n.swal;c.personSelect="默认配置",c.ticket={impact:5},c.cti_search_w="",c.item_groups=[],c.uploader=new i({queueLimit:5,alias:"upload"}),c.uploader.filters.push({name:"sizeFilter",fn:function(t){return t.size<=5242880}}),s.getData().then(function(t){e.debug("base:",t),c.baseData=t,c.item_groups=c.baseData.group}),o.getData().then(function(t){c.ticket.submit_user=t.email,c.ticket.apply_user=t.email}),c.group_arr_to_map=function(){c.group_map={};var t=[];angular.copy(c.baseData.group,t),angular.forEach(t,function(t){c.group_map[t.id]=t})},c.item_change=function(){c.group_arr_to_map();var t={};angular.copy(c.group_map,t),c.item_groups=[],angular.forEach(c.baseData.item_group_map,function(e){e.item_id==c.ticket.item&&(c.group_map[e.group_id].priority="*",c.item_groups.push(c.group_map[e.group_id]),delete t[e.group_id])}),angular.forEach(c.baseData.group,function(e){e.id in t&&c.item_groups.push(e)}),c.item_groups.length>0&&(c.ticket.workgroup=c.item_groups[0].id),(!c.ticket.title&&!c.ticket.content||"<br>"==c.ticket.content&&!c.ticket.title)&&a.get("/api/tt/base/item/"+c.ticket.item).success(function(t){1==t.data.length&&(c.ticket.title=t.data[0].tpl_title,c.ticket.content=t.data[0].tpl_content)})},c.group_change=function(){delete c.ticket.group_user},c.cti_search=function(){""!=c.cti_search_w.trim()&&l.open({templateUrl:"app/pages/tt/new/cti_search.html",controller:"CtiSearchController",controllerAs:"ctisearch",backdrop:"static",keyboard:!1,bindToController:!0,animation:!1,resolve:{cti_search_w:function(){return c.cti_search_w},baseData:function(){return c.baseData},cti_select:function(){return c.cti_select}}}),c.cti_search_w=""},c.cti_select=function(t,e,a){c.ticket.category=t,c.ticket.type=e,c.ticket.item=a,0!=a&&c.item_change()},c.setTicket=function(t){c.ticket.impact=t.impact,c.ticket.category=t.category,c.ticket.group_user=t.group_user,c.ticket.workgroup=t.work_group,c.ticket.type=t.type,c.ticket.item=t.item,c.ticket.title="",c.ticket.content="",c.ticket.email_list=""},c.getUserList=function(){a.get("/api/tt/person/list").success(function(t){if(200===t.code){c.personOption=t.data.map(function(t){return""===t.target_user&&(t.target_user="默认配置"),t}),c.personOption.unshift({target_user:"自定义配置",id:-1,impact:5,category:0,type:0,item:0,work_group:0,group_user:0,edit_user:""});var e=c.personOption.find(function(t){return"默认配置"===t.target_user});if(c.setTicket(e),e){var a=c.personOption.indexOf(e);a>-1&&(c.personOption.splice(a,1),c.personOption.unshift(e))}}}).error(function(t){r.error("获取数据失败！")})},c.getUserList(),c.handlePersonChange=function(){var t=c.personOption.find(function(t){return t.target_user===c.personSelect});c.setTicket(t)},c.submit=function(){d({title:"Submit Confirm?",text:"确认提交?",type:"question",showCancelButton:!0}).then(function(){l.open({templateUrl:"app/pages/tt/new/submit.html",controller:"TTSubmitController",controllerAs:"ttsubmit",backdrop:"static",keyboard:!1,bindToController:!0,size:"lg",animation:!1,resolve:{ticket:function(){return c.ticket},uploader:function(){return c.uploader}}})})["catch"](d.noop)}}t.$inject=["$state","$log","$http","$window","$uibModal","baseService","oauserService","FileUploader","toastr"],angular.module("cmdb").controller("TTNewController",t)}(),function(){"use strict";function t(t,e,a,n){var l=this;l.search_w=e.toLowerCase(),l.baseData=a,l.s_c=[],l.s_t=[],l.s_i=[],angular.forEach(l.baseData.item,function(t){-1!==t.name.toLowerCase().indexOf(l.search_w)&&(l.s_i.push(t),angular.forEach(l.baseData.type,function(e){if(e.id==t.type_id){angular.forEach(l.baseData.category,function(t){if(t.id==e.category_id){var a=angular.copy(t);return a.hide=1,void l.s_c.push(a)}});var a=angular.copy(e);return a.hide=1,void l.s_t.push(a)}}))}),angular.forEach(l.baseData.type,function(t){-1!==t.name.toLowerCase().indexOf(l.search_w)&&(l.s_t.push(t),angular.forEach(l.baseData.category,function(e){if(e.id==t.category_id){var a=angular.copy(e);return a.hide=1,void l.s_c.push(a)}}))}),angular.forEach(l.baseData.category,function(t){if(-1!==t.name.toLowerCase().indexOf(l.search_w)){var e=angular.copy(t);l.s_c.push(e)}}),l.select_c=function(t){n(t.id,0,0)},l.select_t=function(t){angular.forEach(l.baseData.category,function(e){return e.id==t.category_id?void n(e.id,t.id,0):void 0})},l.select_i=function(t){angular.forEach(l.baseData.type,function(e){e.id==t.type_id&&angular.forEach(l.baseData.category,function(a){return a.id==e.category_id?void n(a.id,e.id,t.id):void 0})})},l.cancel=function(){t.close()}}t.$inject=["$uibModalInstance","cti_search_w","baseData","cti_select"],angular.module("cmdb").controller("CtiSearchController",t)}(),function(){"use strict";function t(t,e,a,n,l){var s={assignme:"me_not_finish",selfsubmit:"self_submit_not_finish",emaillistme:"email_me_not_finish",level12:"level_12",myticket:"myticket",menulist:"mygroup_not_finish"},o=t.params.mod,i=this;n.getData().then(function(t){i.baseData=t,e.debug("base",i.baseData)}),i.init=function(){o in s?(i.presetMod=s[o],i.loading=!0,a.get("/api/tt/search/index/"+o).success(function(e){if(i.tickets=e.data,"menulist"==o){var a=t.params.g;void 0!=a?(i.tickets=e.data.group[a],i.groupname=a):(i.tickets=[],angular.forEach(e.data.group,function(t){angular.forEach(t,function(t){i.tickets.push(t)})}))}i.tableParams=new l({count:25},{counts:[],dataset:i.tickets}),i.loading=!1})):t.go("home.e404")},i.init(),i.tableReload=function(a){e.debug(t.params.mod),a&&a.target.blur(),i.init()}}t.$inject=["$state","$log","$http","baseService","NgTableParams"],angular.module("cmdb").controller("TTListController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i,r){var c=this,d=a.swal;r.getData().then(function(e){return e?void 0:void t.go("home.e403")}),s.getData().then(function(t){c.basedata=t,c.init()}),c.init=function(){delete c.currentGroup,delete c.newGroup,delete c.newUser,angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),n.get("/api/tt/base/group_item_user_rel").success(function(t){e.debug("groups:",t),200==t.code&&(c.groups=t.data,c.workgroupTable=new o({count:10},{counts:[],dataset:c.groups}),c.showTab=!0),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},c.reload=function(t){t&&t.target.blur(),c.init()},c.updateGroup=function(){d({title:"Update",html:"Group <br>"+c.currentGroup.group_name,type:"question",showCancelButton:!0}).then(function(){var t=c.currentGroup.work_hour_start.split(":"),e=60*t[0]+1*t[1],a=c.currentGroup.work_hour_end.split(":"),n=60*a[0]+1*a[1];c.currentGroup.work_hour_start=e,c.currentGroup.work_hour_end=n,l.update("base/group/"+c.currentGroup.id,c.currentGroup).then(function(){c.reload()})})},c.delGroup=function(t){d({title:"Delete Confirm?",html:"确认删除?<br>"+t.group_name,type:"warning",showCancelButton:!0}).then(function(){n["delete"]("/api/tt/base/group/"+t.id).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})["catch"](d.noop)},c.addGroup=function(){d({title:"Add",html:"Group <br>"+c.newGroup.group_name,type:"question",showCancelButton:!0}).then(function(){var t=c.newGroup.work_hour_start.split(":"),e=60*t[0]+1*t[1],a=c.newGroup.work_hour_end.split(":"),l=60*a[0]+1*a[1];c.newGroup.work_hour_start=e,c.newGroup.work_hour_end=l,n.post("/api/tt/base/group",c.newGroup).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})["catch"](d.noop)},c.openAddForm=function(){c.newGroup={},delete c.currentGroup,delete c.newUser},c.openEditForm=function(t){c.currentGroup=t;var e=c.currentGroup.work_hour_start,a=c.currentGroup.work_hour_end;c.currentGroup.work_hour_start=Math.floor(e/60)+":"+e%60,c.currentGroup.work_hour_end=Math.floor(a/60)+":"+a%60,delete c.newGroup,delete c.newUser},c.cancelForm=function(){delete c.currentGroup,delete c.newGroup,delete c.newUser},c.openAddUserForm=function(t){c.newUser={group_id:t.id},delete c.currentGroup,delete c.newGroup},c.addUser=function(){d({title:"Add User",text:c.newUser.email,type:"question",showCancelButton:!0}).then(function(){n.post("/api/tt/base/group_user",c.newUser).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})["catch"](d.noop)},c.delUser=function(t){d({title:"Delete User",text:t.email,
type:"warning",showCancelButton:!0}).then(function(){n["delete"]("/api/tt/base/group_user/"+t.id).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})["catch"](d.noop)},c.disableUser=function(t){var e=1==t.disabled?"Enable User ?":"Disable User",a={};angular.copy(t,a),0==a.disabled?a.disabled=1:a.disabled=0,d({title:e,text:t.email,type:"warning",showCancelButton:!0}).then(function(){n.post("/api/tt/search/list/open_ticket_for_user",{id:t.id,group_id:t.group_id}).success(function(e){return 1==a.disabled&&e.data.length>0?void i.warning("该用户有未关闭的单子！"):void n.put("/api/tt/base/group_user/"+t.id,a).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})})["catch"](d.noop)}}t.$inject=["$state","$log","$window","$http","putService","baseService","NgTableParams","toastr","adminService"],angular.module("cmdb").controller("WorkgroupController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o){var i=this;o.getData().then(function(t){return t?void 0:void e.go("home.e403")}),l.getData().then(function(t){i.basedata=t,i.tableInit(),i.showTab=!0}),i.tableInit=function(){i.impactTable=new s({count:10},{counts:[],dataset:i.basedata.impact})},i.tableReload=function(t){t&&t.target.blur(),angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),l.getData(1).then(function(t){i.basedata=t,i.tableInit(),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},i.updateImpact=function(t){n.update("base/impact/"+t.id,t).then(function(){i.tableReload()})}}t.$inject=["$log","$state","$http","putService","baseService","NgTableParams","adminService"],angular.module("cmdb").controller("ImpactController",t)}(),function(){"use strict";function t(t,e){return function(a){var n,l=t.defer();return e.getData().then(function(t){var e=0;angular.forEach(t,function(s,o){s.langkey==a.key&&(n=angular.fromJson(s.data),e=1,l.resolve(n)),0==e&&o==t.length-1&&(n=angular.fromJson(s.data),l.resolve(n))})}),l.promise}}function e(t,e){var a={returnedData:[],getData:function(n){var l=t.defer();return""==a.returnedData||n?e.getData("common/i18n").then(function(t){angular.copy(t,a.returnedData),l.resolve(t)}):l.resolve(a.returnedData),l.promise}};return a}t.$inject=["$q","langService"],e.$inject=["$q","getService"],angular.module("cmdb").factory("langAsyncLoader",t),angular.module("cmdb").service("langService",e)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i){var r=this;i.getData().then(function(e){return e?void 0:void t.go("home.e403")}),r.langData={},r.langInit=function(){angular.element(".loading-container").removeClass("hide"),s.getData().then(function(t){r.langData=t,angular.forEach(r.langData,function(t){t.jsonData=angular.fromJson(t.data),t.wellFormed=!0}),l(function(){r.showTab=!0},0),angular.element(".loading-container").addClass("hide")})},r.langInit(),r.parseJson=function(t,e){try{t.jsonData=angular.fromJson(e),t.wellFormed=!0}catch(a){t.wellFormed=!1}},r.unparseJson=function(t,e){t.jsonString=a("json")(e)},r.save=function(t,e){n.put("/api/tt/common/i18n/"+t,{data:angular.toJson(e)}).success(function(t){200==t.code&&o.success(t.data)})}}t.$inject=["$state","$window","$filter","$http","$timeout","langService","toastr","adminService"],angular.module("cmdb").controller("I18nController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o){var i=this,r=n.swal;o.getData().then(function(t){return t?void 0:void e.go("home.e403")}),s.getData().then(function(t){i.basedata=t,i.init(),i.showTab=!0,i.addGroupOptions={},angular.forEach(i.basedata.group,function(t){i.addGroupOptions[t.id]=t.group_name})}),i.init=function(){i.currentItem={},i.currentType={},i.newItem={},a.get("/api/tt/base/cti_tree_map").success(function(t){i.cti_tree=t.data})},i.reload=function(t){t&&t.target.blur(),angular.element(".loading-container").removeClass("hide"),angular.element(".cti-tree").addClass("hide"),s.getData(1).then(function(t){i.basedata=t,i.init(),angular.element(".loading-container").addClass("hide"),angular.element(".cti-tree").removeClass("hide")})},i.addCategory=function(){r({title:"Add",text:"Category",input:"text",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(t){var e={name:t};a.post("/api/tt/base/category",e).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.addType=function(t){r({title:"Add",html:"Type <br>[Category: "+t.name+" ]",input:"text",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(e){var n={category_id:t.id,name:e};a.post("/api/tt/base/type",n).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.updateSwal=function(t,e){var n={};angular.copy(t,n),r({title:"Update",text:n.name,input:"text",inputPlaceholder:t.name,showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(s){n.name=s,a.put("/api/tt/"+e+t.id,n).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.delSwal=function(t,e,n){r({title:"Delete Confirm?",html:"确认删除?<br>"+e,type:"warning",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/"+n+t.id).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.editItem=function(t){angular.copy(t,i.currentItem),i.currentType={}},i.updateItem=function(){angular.equals(i.currentItem,{})||r({title:"Submit Confirm?",text:"确认修改?",type:"question",showCancelButton:!0}).then(function(){a.put("/api/tt/base/item/"+i.currentItem.id,i.currentItem).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.addItem=function(t){angular.copy(t,i.currentType),i.newItem={type_id:t.id},i.currentItem={}},i.addItemSwal=function(){r({title:"Add Confirm?",html:"确认添加?<br>"+i.newItem.name,type:"question",showCancelButton:!0}).then(function(){a.post("/api/tt/base/item",i.newItem).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.cancelItem=function(){i.newItem={},i.currentType={},i.currentItem={}},i.addGroup=function(){var t=[{title:"Select a WorkGroup",input:"select",inputOptions:i.addGroupOptions,inputPlaceholder:"WorkGroup",showCancelButton:!0,allowOutsideClick:!1,inputValidator:function(t){return new Promise(function(e,a){""==t?a("Can not be NULL"):e()})}},{title:"WorkGroup Priority",text:"input priority",input:"number",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}];r.queue(t).then(function(t){var e=1*t[0],n=1*t[1],s={item_id:i.currentItem.id,group_id:e,priority:n};a.post("/api/tt/base/item_group_map",s).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)},i.delGroup=function(t){r({title:"Add Confirm?",text:"确认解除?",type:"warning",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/base/item_group_map/"+t.id).success(function(t){200==t.code&&(l.success(t.data),i.reload())})})["catch"](r.noop)}}t.$inject=["$log","$state","$http","$window","toastr","baseService","adminService"],angular.module("cmdb").controller("CtiController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i,r){var c=this,d=n.swal;r.getData().then(function(e){return e?void 0:void t.go("home.e403")}),c.init=function(){delete c.currenttpl,delete c.newtpl,angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),l.get("/api/tt/base/email_templates/").success(function(t){200==t.code&&(c.tpls=t.data,c.tplsTable=new o({count:10},{counts:[],dataset:c.tpls}),c.showTab=!0),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},c.reload=function(t){t&&t.target.blur(),c.init()},c.init(),c.openAddForm=function(){c.newtpl={},delete c.currenttpl,e(function(){angular.element(".editor").wysiwyg()})},c.openEditForm=function(t){c.currenttpl=t,delete c.newtpl,e(function(){angular.element(".editor").wysiwyg()})},c.cancelForm=function(){delete c.currenttpl,delete c.newtpl},c.addTpl=function(){d({title:"Add Template",text:c.newtpl.name,type:"question",showCancelButton:!0}).then(function(){l.post("/api/tt/base/email_templates",c.newtpl).success(function(t){200==t.code&&(i.success(t.data),c.reload())})})["catch"](d.noop)},c.updateTpl=function(){d({title:"Update",html:"Template <br>"+c.currenttpl.name,type:"question",showCancelButton:!0}).then(function(){s.update("base/email_templates/"+c.currenttpl.id,c.currenttpl).then(function(){c.reload()})})["catch"](d.noop)}}t.$inject=["$state","$timeout","$log","$window","$http","putService","NgTableParams","toastr","adminService"],angular.module("cmdb").controller("EmailtplController",t)}(),function(){"use strict";function t(){var t={restrict:"A",require:"?ngModel",link:function(t,e,a,n){function l(){var t=e.html();a.stripBr&&"<br>"==t&&(t=""),n.$setViewValue(t)}n&&(n.$render=function(){e.html(n.$viewValue||"")},e.on("blur keyup change",function(){t.$apply(l)}))}};return t}angular.module("cmdb").directive("contenteditable",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i){var r=this,c=s.swal;r.baseDataMap={impact:{},category:{},type:{},item:{},group:{},group_user:{},item_group_map:{}},r.createType=!1,l.getData().then(function(e){return e?void 0:void t.go("home.e403")}),a.getData().then(function(t){r.baseData=t,angular.forEach(t,function(t,e){angular.forEach(t,function(t,a){"impact"===e?r.baseDataMap[e][t.level]=t.name:"group"===e?r.baseDataMap[e][t.id]=t.group_name:"group_user"===e?r.baseDataMap[e][t.id]=t.priority+"-"+t.email:r.baseDataMap[e][t.id]=t.name})})}),r.tableReload=function(t){t&&t.target.blur(),r.configTable=new n({count:10},{counts:[],dataset:[]}),angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),e.get("/api/tt/person/list").success(function(t){200===t.code?(r.tableData=t.data,r.createType=r.tableData.some(function(t){return!t.target_user}),r.configTable=new n({count:10},{counts:[],dataset:t.data}),r.configTotal=t.length,angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")):(i.error("获取数据失败！"),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide"))})},r.tableReload(),r.handleCreate=function(t){o.open({templateUrl:"app/pages/system/configuration/newEdit/newEdit.html",controller:"NewEditController",controllerAs:"newEdit",backdrop:"static",size:"lg",keyboard:!1,bindToController:!0,resolve:{types:function(){return"default"===t?!1:!0},itemDetail:function(){return{}},reload:function(){return r.tableReload}}})},r.deleteConfig=function(t){c({title:"Delete Config?",text:"确认删除?",type:"question",showCancelButton:!0}).then(function(){e["delete"]("/api/tt/person/delete/"+t.id).success(function(t){200===t.code?(i.success("删除成功！"),r.tableReload()):i.error("删除失败！")})})},r.updateConfig=function(t){r.tableData.length&&o.open({templateUrl:"app/pages/system/configuration/newEdit/newEdit.html",controller:"NewEditController",controllerAs:"newEdit",backdrop:"static",size:"lg",keyboard:!1,bindToController:!0,resolve:{types:function(){return t.target_user?!0:!1},itemDetail:function(){return JSON.parse(JSON.stringify(t))},reload:function(){return r.tableReload}}})},r.copyConfig=function(t){o.open({templateUrl:"app/pages/system/configuration/copyConfig/copyConfig.html",controller:"CopyConfigController",controllerAs:"copyConfig",backdrop:"static",size:"lg",keyboard:!1,bindToController:!0,resolve:{types:function(){return t.target_user?!0:!1},items:function(){return JSON.parse(JSON.stringify(t))},reload:function(){return r.tableReload}}})}}t.$inject=["$state","$http","baseService","NgTableParams","adminService","$window","$uibModal","toastr"],angular.module("cmdb").controller("ConfigurationController",t)}(),function(){"use strict";function t(t,e,a,n,l,s,o,i,r){var c=this,d=a.swal;c.updateGroup=function(t){d({title:"Update",html:t.group_name,type:"question",showCancelButton:!0}).then(function(){var e=t.work_hour_start.split(":"),a=60*e[0]+1*e[1],n=t.work_hour_end.split(":"),l=60*n[0]+1*n[1];t.work_hour_start=a,t.work_hour_end=l,i.update("base/group/"+t.id,t).then(function(){c.init()})})["catch"](d.noop)},c.addUser=function(t){var e=[{title:"User Email",input:"email",showCancelButton:!0,allowOutsideClick:!1},{title:"Priority",text:"input priority",input:"number",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:!1,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})}}];d.queue(e).then(function(e){var a=e[0],n=1*e[1],s={group_id:t.id,email:a,priority:n};l.post("/api/tt/base/group_user",s).success(function(t){200==t.code&&(o.success(t.data),c.init())})})["catch"](d.noop)},c.deleteUser=function(t){d({title:"Delete User",text:t.email,type:"warning",showCancelButton:!0}).then(function(){l["delete"]("/api/tt/base/group_user/"+t.id).success(function(t){200==t.code&&(o.success(t.data),c.init())})})["catch"](d.noop)},c.updateUser=function(t){d({title:"Update User",text:t.email,type:"question",showCancelButton:!0}).then(function(){l.put("/api/tt/base/group_user/"+t.id,t).success(function(t){200==t.code&&(o.success(t.data),c.init())})})["catch"](d.noop)},c.init=function(){c.groups=[],c.newUser={},l.get("/api/tt/base/group/").success(function(e){200==e.code&&(c.basegroup=e.data,t.debug("group:",c.basegroup),r.getData().then(function(t){c.oauser=t,angular.forEach(c.basegroup,function(t){var e=t.work_hour_start,a=t.work_hour_end;t.work_hour_start=Math.floor(e/60)+":"+e%60,t.work_hour_end=Math.floor(a/60)+":"+a%60,t.admin_email==c.oauser.email&&c.groups.push(t)})}))})},c.init(),c.disableUser=function(t){var e=1==t.disabled?"Enable User ?":"Disable User",a={};angular.copy(t,a),0==a.disabled?a.disabled=1:a.disabled=0,d({title:e,text:t.email,type:"warning",showCancelButton:!0}).then(function(){l.post("/api/tt/search/list/open_ticket_for_user",{group_user:t.email}).success(function(e){return 1==a.disabled&&e.data.length>0?void o.warning("该用户有未关闭的单子！"):void l.put("/api/tt/base/group_user/"+t.id,a).success(function(t){200==t.code&&(o.success(t.data),c.init())})})})["catch"](d.noop)}}t.$inject=["$log","$state","$window","$filter","$http","$timeout","toastr","putService","oauserService"],angular.module("cmdb").controller("MyGroupController",t)}(),function(){"use strict";function t(t,e,a,n,l){var s=this;a.getData().then(function(t){s.baseData=t}),s.tableFilter={};var o=new Date,i=new Date;i.setDate(i.getDate()-30),s.tableFilter={start:i,end:o},s.report=function(){return angular.equals(s.tableFilter,{})?void l.error("ERR (NULL)"):s.tableFilter.end&&s.tableFilter.start&&s.tableFilter.start>s.tableFilter.end?void l.error("ERR (Time Wrong!)"):(s.loading=!0,void e.post("/api/tt/report/kanban",s.tableFilter).success(function(t){200==t.code&&(s.data=t.data,s.tables={},angular.forEach(s.data,function(t,e){if("group_user"===e)for(var a=0;a<s.baseData.group_user.length;a++)for(var l=0;l<t.length;l++)s.baseData.group_user[a].id==t[l].id&&(t[l].user=s.baseData.group_user[a].email,s.tables[e]=new n({count:30,sorting:{submit_number:"desc"}},{counts:[],dataset:t}));else s.tables[e]=new n({count:30,sorting:{submit_number:"desc"}},{counts:[],dataset:t})})),s.loading=!1}))},s.report()}t.$inject=["$state","$http","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("TTReportController",t)}(),function(){"use strict";function t(){}angular.module("cmdb").controller("MainTTController",t)}(),function(){"use strict";function t(){var t={main:"/",login:"/api/connector/connectorx/sso/loginredirect",chpasswd:"/api/connector/connectorx/sso/chpasswdredirect",logout:"#"};return t}function e(t,e){var a={returnedData:{},getData:function(n){var l=t.defer();return angular.equals({},a.returnedData)||n?e.get("/api/connector/connectorx/sso/userinfo").success(function(t){angular.copy(t,a.returnedData),l.resolve(t)}):l.resolve(a.returnedData),l.promise}};return a}function a(t,e){var a={returnedData:{},getData:function(n){var l=t.defer();return angular.equals({},a.returnedData)||n?e.get("/api/connector/connectorx/sso/userinfo").success(function(t){var e=!1;"1"==t.admin&&(e=!0),angular.copy(e,a.returnedData),l.resolve(e)}):l.resolve(a.returnedData),l.promise}};return a}e.$inject=["$q","$http"],a.$inject=["$q","$http"],angular.module("cmdb").factory("ssoService",t),angular.module("cmdb").factory("oauserService",e),angular.module("cmdb").factory("adminService",a)}(),function(){"use strict";function t(){function t(t,e,a,n,l,s,o,i){var r=this;r.currentMenu=n.get("c3menu"),r.showMenu=function(){angular.element("body").removeClass("sb-l-m"),n.put("c3menu","none"),r.currentMenu=n.get("c3menu"),angular.element("#sidebar_left").nanoScroller({preventPageScrolling:!0}),angular.element(".nano-pane").css("display","block")},r.hideMenu=function(){angular.element("body").addClass("sb-l-m"),n.put("c3menu","sb-l-m"),r.currentMenu=n.get("c3menu"),angular.element("#sidebar_left").nanoScroller({destroy:!0}),angular.element(".nano-pane").css("display","none")},r.toggleMenu=function(){"sb-l-m"!=r.currentMenu?r.hideMenu():r.showMenu()},"sb-l-m"!=r.currentMenu?r.showMenu():r.hideMenu(),s.getData().then(function(t){r.langData=t}),r.changeLang=function(t){e.use(t),r.currentLang=e.proposedLanguage()||e.use()},r.logout=function(){var t=l.location.protocol+"//"+l.location.host;a.get("/api/connector/connectorx/ssologout?siteaddr="+t).success(function(t){t.data?l.location.href=t.data:l.location.reload()})},i.getData().then(function(t){r.user=t})}t.$inject=["$rootScope","$translate","$http","$cookies","$window","langService","ssoService","oauserService"];var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},controller:t,controllerAs:"nav"};return e}angular.module("cmdb").directive("c3navbar",t)}(),function(){"use strict";function t(){function t(t,e){var a=this;a.states=t,e.getData().then(function(t){t&&(a.isAdmin=!0)})}t.$inject=["$state","adminService"];var e={restrict:"E",templateUrl:"app/components/menu/menu.html",scope:{},controller:t,controllerAs:"menu"};return e}angular.module("cmdb").directive("c3menu",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/loading/loading.html"};return t}angular.module("cmdb").directive("cmloading",t)}(),function(){"use strict";function t(){function t(){var t=this;t.year=(new Date).getFullYear()}var e={restrict:"E",templateUrl:"app/components/footer/footer.html",scope:{},controller:t,controllerAs:"footer"};return e}angular.module("cmdb").directive("c3footer",t)}(),function(){"use strict";function t(){function t(t){t.submit=function(){var e=[];angular.forEach(t.data,function(t){e.push(t.no)}),t.ids=e.toLocaleString()}}t.$inject=["scope"];var e={link:t,restrict:"E",templateUrl:"app/components/download/download.html",scope:{data:"="}};return e}angular.module("cmdb").directive("c3download",t)}(),function(){"use strict";function t(){var t=function(t,e,a,n){if(t&&a&&e){var l="",s=!1;return angular.forEach(e,function(e,o){return o==a?(angular.forEach(e,function(e){return e.id==t?(l=void 0!=n?e[n]:e.name,!1):void 0}),s=!0,!1):s?!1:void 0}),l}};return t}function e(){var t=function(t,e,a){var n=t.split(e);return n[a]};return t}function a(){var t=function(t){return Math.floor(t+0)};return t}angular.module("cmdb").filter("baseDataMap",t),angular.module("cmdb").filter("splitStr",e),angular.module("cmdb").filter("floor",a)}(),function(){"use strict";function t(){return{restrict:"A",link:function(t,e,a){e.bind("click",function(){e.toggleClass(a.toggleClass)})}}}function e(){return{restrict:"A",link:function(t,e,a){e.bind("click",function(){e.parent().toggleClass(a.toggleClass)})}}}function a(){return{restrict:"A",link:function(t,e,a){e.bind("hover",function(){e.toggleClass(a.toggleClass)})}}}function n(){return{restrict:"A",link:function(t,e){e.bind("click",function(){var t=!1;t=e.next().hasClass("hide")?!1:!0,t?e.next().addClass("hide"):e.next().removeClass("hide")})}}}function l(){return{require:"ngModel",link:function(t,e,a,n){n.$parsers.push(function(t){return parseInt(t,10)}),n.$formatters.push(function(t){return void 0!=t?""+t:""})}}}angular.module("cmdb").directive("toggleClass",t),angular.module("cmdb").directive("toggleParentClass",e),angular.module("cmdb").directive("toggleHover",a),angular.module("cmdb").directive("toggleNext",n),angular.module("cmdb").directive("convertToNumber",l)}(),function(){"use strict";function t(){function t(t,e,a,n,l,s){if("home"==t.current.name){var o=this;o.currentsDate=new Date,o.orderStart=new Date(o.currentsDate.setMonth(o.currentsDate.getMonth()-1)),o.orderEnd=new Date,o.isFirstLoad=!0,o.isEndFirstLoad=!0,o.loading=!1,o.cardList=[{name:"S.TT.create_order",icon:"/assets/images/tt-order-create-2x.png",type:"create",color:"#2f875a",self:"tt/new",count:0},{name:"S.TT.user_total",icon:"/assets/images/tt-order-user-2x.png",type:"user_count",color:"#3ece85",count:0},{name:"S.TT.order_total",icon:"/assets/images/tt-order-count-2x.png",color:"#467CFD",type:"tt_count",self:"tt/ordertotal",count:0},{name:"S.TT.todo_total",icon:"/assets/images/tt-order-upcoming-2x.png",type:"related_group_toto_count",color:"#ef537b",self:"tt/todototal",count:0},{name:"S.TT.personal_todo",icon:"/assets/images/tt-order-personal-2x.png",type:"self_todo_count",color:"#ff6633",self:"tt/personaltodo",count:0}],o.countTypeMap={related_group_toto_count:0,self_todo_count:0,tt_count:0,user_count:0},o.handleTimeRange=function(t){var e=new Date;if("week"===t)o.orderStart=new Date(e.setDate(e.getDate()-e.getDay()+1)),o.orderEnd=new Date(e.setDate(e.getDate()-e.getDay()+7));else if("month"===t)o.orderStart=new Date(e.getFullYear(),e.getMonth(),1),o.orderEnd=new Date(e.getFullYear(),e.getMonth()+1,0);else if("quarter"===t){var a=Math.floor(e.getMonth()/3)+1;o.orderStart=new Date(e.getFullYear(),3*(a-1),1),o.orderEnd=new Date(e.getFullYear(),3*a,0)}},o.handleJump=function(t){if("user_count"!==t.type){var e="";"create"!==t.type&&(e="?start="+o.orderStart.getTime()/1e3+"&end="+o.orderEnd.getTime()/1e3),window.location.href=window.location.href+t.self+e}},o.getInfoData=function(){var t=Math.trunc(o.orderStart.getTime()/1e3),a=Math.trunc((o.orderEnd?o.orderEnd:new Date).getTime()/1e3);return e.get("/api/tt/statistics/work_order_summary/summary?start="+t+"&end="+a).success(function(t){200===t.code?o.cardList.map(function(e){return e.count=t.data[e.type]||0,e}):s.error("获取数据失败")}).error(function(t){s.error("获取数据失败"+t),console.error(t)})},o.getWeekData=function(){var t=Math.trunc(o.orderStart.getTime()/1e3),a=Math.trunc(o.orderEnd.getTime()/1e3);return e.get("/api/tt/statistics/work_order_summary?start="+t+"&end="+a).success(function(t){if(200===t.code){o.weekData=t.data;var e=o.weekData.map(function(t){return t.date}),a=[],n=[];o.weekData.forEach(function(t){n=Object.keys(t.data)}),a=n.map(function(t){var e=[];return o.weekData.forEach(function(a){e.push(a.data[t])}),{name:t,data:e}}),o.chartLine(e,a)}else s.error("获取数据失败")}).error(function(t){s.error("获取数据失败"+t),console.error(t)})},o.getSubmitData=function(){var t=Math.trunc(o.orderStart.getTime()/1e3),a=Math.trunc(o.orderEnd.getTime()/1e3);return e.get("/api/tt/statistics/work_order_summary/by_apply_user?start="+t+"&end="+a).success(function(t){if(200===t.code){o.submitData=t.data;var e=o.submitData.map(function(t){return t.key}),a=[{name:"工单数量(只展示前10)",data:o.submitData.map(function(t){return t.value})}];o.chartBarSubmit(e,a)}else s.error("获取数据失败")}).error(function(t){s.error("获取数据失败"+t),console.error(t)})},o.getUpComingData=function(){var t=Math.trunc(o.orderStart.getTime()/1e3),a=Math.trunc(o.orderEnd.getTime()/1e3);return e.get("/api/tt/statistics/work_order_summary/by_status?start="+t+"&end="+a+"&status=0").success(function(t){if(200===t.code){o.upcomingData=t.data;var e=o.upcomingData.map(function(t){return t.key}),a=[{name:"工单数量(只展示前10)",data:o.upcomingData.map(function(t){return t.value})}];o.chartBarUpcoming(e,a)}else s.error("获取数据失败")}).error(function(t){s.error("获取数据失败"+t),console.error(t)})},o.getFinishData=function(){var t=Math.trunc(o.orderStart.getTime()/1e3),a=Math.trunc(o.orderEnd.getTime()/1e3);return e.get("/api/tt/statistics/work_order_summary/by_status?start="+t+"&end="+a+"&status=1").success(function(t){if(200===t.code){o.finishData=t.data;var e=o.finishData.map(function(t){return t.key}),a=[{name:"工单数量(只展示前10)",data:o.finishData.map(function(t){return t.value})}];o.chatBarFinish(e,a)}else s.error("获取数据失败")}).error(function(t){s.error("获取数据失败"+t),console.error(t)})},o.getData=function(){try{o.loading=!0;var t=[o.getInfoData(),o.getWeekData(),o.getSubmitData(),o.getUpComingData(),o.getFinishData()];return l.all(t).then(function(t){o.loading=!1})["catch"](function(t){o.loading=!1,console.error("获取数据失败"+t)})}catch(e){s.error("获取数据失败"+e),console.error(e)}},o.getData(),o.chartLine=function(t,e){return Highcharts.chart("line-container",{chart:{type:"spline"},title:{text:"本周工单统计",align:"left"},yAxis:{title:{text:"工单数量"}},xAxis:{categories:t},legend:{layout:"vertical",align:"right"},series:e,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})},o.chartBarSubmit=function(t,e){return Highcharts.chart("submit-container",{chart:{type:"bar"},title:{text:"工单提交排名",align:"left"},xAxis:{categories:t,title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"工单数量",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:""},plotOptions:{bar:{dataLabels:{enabled:!0},groupPadding:.1},series:{color:"#3ece85"}},credits:{enabled:!1},series:e})},o.chartBarUpcoming=function(t,e){return Highcharts.chart("upcoming-container",{chart:{type:"bar"},title:{text:"待办工单排名",align:"left"},xAxis:{categories:t,title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"工单数量",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:""},plotOptions:{bar:{dataLabels:{enabled:!0},groupPadding:.1},series:{color:"#ef537b"}},credits:{enabled:!1},series:e})},o.chatBarFinish=function(t,e){return Highcharts.chart("finish-container",{chart:{type:"bar"},title:{text:"完成工单排名",align:"left"},xAxis:{categories:t,title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:"工单数量",align:"high"},labels:{overflow:"justify"},gridLineWidth:0},tooltip:{valueSuffix:""},plotOptions:{bar:{dataLabels:{enabled:!0},groupPadding:.1},series:{color:"#467CFD"}},credits:{enabled:!1},series:e})},o.getDate=function(t){return n("date")(t,"yyyy-MM-dd")},a.$watchGroup(["c3index.orderStart","c3index.orderEnd"],function(t,e){var a=t[0],n=t[1];o.orderStart=a,o.orderEnd=n;var l=e[0],i=e[1];if(o.isEndFirstLoad)return void(o.isEndFirstLoad=!1);if(o.getDate(l)===o.getDate(a)&&o.getDate(i)===o.getDate(n))return!1;if(a&&n){var r=Math.trunc(a.getTime()/1e3),c=Math.trunc(n.getTime()/1e3);o.sFirstLoad=!1,r>c?s.error("开始时间不能大于结束时间"):o.getData()}})}}t.$inject=["$state","$http","$scope","$filter","$q","toastr"];var e={restrict:"E",templateUrl:"app/components/c3index/c3index.html",scope:{},controller:t,controllerAs:"c3index"};return e}angular.module("cmdb").directive("c3index",t)}(),function(){"use strict";function t(t,e,a){var n={add:function(n,l,s){s=void 0==s?1:0;var o=e.defer();return angular.equals({},l)?s&&a.warning("nothing to add!"):t.post("/api/tt/"+n,l).success(function(t){200==t.code&&(s&&a.success(t.data),o.resolve(t))}),o.promise}};return n}function e(t,e,a){var n={del:function(n,l){var s=e.defer();return l>0?t["delete"]("/api/tt/"+n+"/"+l).success(function(t){200==t.code&&(a.success(t.data),s.resolve(t))}):a.warning("nothing to delete!"),s.promise}};return n}function a(t,e,a){var n={update:function(n,l){var s=e.defer();return angular.equals({},l)?a.warning("nothing to update!"):t.put("/api/tt/"+n,l).success(function(t){200==t.code&&(a.success(t.data),s.resolve(t))}),s.promise}};return n}function n(t,e){var a={getData:function(a,n,l){var s=t.defer(),o="/api/tt/"+a;return n&&l&&(o+="/"+n+"/"+l),e.get(o).success(function(t){s.resolve(t.data)}),s.promise}};return a}t.$inject=["$http","$q","toastr"],e.$inject=["$http","$q","toastr"],a.$inject=["$http","$q","toastr"],n.$inject=["$q","$http"],angular.module("cmdb").service("postService",t),angular.module("cmdb").service("delService",e),angular.module("cmdb").service("putService",a),angular.module("cmdb").service("getService",n)}(),function(){"use strict";function t(t,e){var a={returnedData:{},getData:function(n){var l=t.defer();return angular.equals({},a.returnedData)||n?e.get("/api/tt/base/all").success(function(t){angular.copy(t.data,a.returnedData),l.resolve(t.data)}):l.resolve(a.returnedData),l.promise}};return a}t.$inject=["$q","$http"],angular.module("cmdb").factory("baseService",t)}(),function(){"use strict";function t(t,e,a,n,l){var s={response:function(t){var a=a||n.get("toastr");if(t.config.url.match(/^\/api.*$/)&&t.data&&t.data.hasOwnProperty("code")){if(1e4==t.data.code){var s=e.location.href,o=e.location.protocol+"//"+e.location.host;return e.location.href=l.login+"?siteaddr="+o+"&callback="+s,null}200!=t.data.code&&a.error(t.data.data+" ("+t.data.code+")")}return t},responseError:function(e){if(e.status>=500)return a.path("error/500"),t.reject(e);var l=l||n.get("toastr");return l.error(e.statusText+" ("+e.status+")"),t.reject(e)}};return s}t.$inject=["$q","$window","$location","$injector","ssoService"],angular.module("cmdb").factory("authInterceptor",t)}(),function(){"use strict";function t(t,e,a,n,l){a.back=function(){n.go("home")},angular.element(".scroller").css("height",l.innerHeight-50),angular.element(l).bind("resize",function(){angular.element(".scroller").css("height",l.innerHeight-50)}),a.resizeMenu=function(){angular.element(".scroller").css("height",l.innerHeight-50)}}t.$inject=["$document","$log","$rootScope","$state","$window"],angular.module("cmdb").controller("MainController",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("cmdb").run(t)}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.ttIndex",{url:"ttIndex",templateUrl:"app/main/tt/main.html",controller:"MainTTController",controllerAs:"mainTT"}).state("home.tt",{url:"tt/","abstract":!0,templateUrl:"app/pages/tt/tt.html"}).state("home.tt.new",{url:"new",templateUrl:"app/pages/tt/new/new.html",controller:"TTNewController",controllerAs:"ttnew"}).state("home.tt.show",{url:"show/:id",templateUrl:"app/pages/tt/show/show.html",controller:"TTShowController",controllerAs:"ttshow"}).state("home.tt.ordertotal",{url:"ordertotal",templateUrl:"app/pages/tt/ordertotal/orderTotal.html",controller:"OrderTotalController",controllerAs:"orderTotal"}).state("home.tt.todototal",{url:"todototal",templateUrl:"app/pages/tt/todototal/todoTotal.html",controller:"TodoTotalController",controllerAs:"todoTotal"}).state("home.tt.personaltodo",{url:"personaltodo",templateUrl:"app/pages/tt/personaltodo/personalTodo.html",controller:"PersonalTodoController",controllerAs:"personalTodo"}).state("home.tt.search",{url:"search",templateUrl:"app/pages/tt/search/search.html",controller:"TTSearchController",controllerAs:"ttsearch"}).state("home.tt.list",{url:"list?mod&g",templateUrl:"app/pages/tt/list/list.html",controller:"TTListController",controllerAs:"ttlist"}).state("home.group_manage",{url:"group_manage/","abstract":!0,templateUrl:"app/pages/group_manage/group_manage.html"}).state("home.group_manage.my_group",{url:"my_group",templateUrl:"app/pages/group_manage/my_group/my_group.html",
controller:"MyGroupController",controllerAs:"mygroup"}).state("home.report",{url:"report/","abstract":!0,templateUrl:"app/pages/report/report.html"}).state("home.report.workgroup",{url:"workgroup",templateUrl:"app/pages/report/workgroup/workgroup.html",controller:"TTReportController",controllerAs:"report"}).state("home.report.cti",{url:"cti",templateUrl:"app/pages/report/cti/cti.html",controller:"TTReportController",controllerAs:"report"}).state("home.report.user",{url:"user",templateUrl:"app/pages/report/user/user.html",controller:"TTReportController",controllerAs:"report"}).state("home.system",{url:"system/","abstract":!0,templateUrl:"app/pages/system/system.html"}).state("home.system.i18n",{url:"i18n",templateUrl:"app/pages/system/i18n/i18n.html",controller:"I18nController",controllerAs:"i18n"}).state("home.system.impact",{url:"impact",templateUrl:"app/pages/system/impact/impact.html",controller:"ImpactController",controllerAs:"impact"}).state("home.system.cti",{url:"cti",templateUrl:"app/pages/system/cti/cti.html",controller:"CtiController",controllerAs:"cti"}).state("home.system.workgroup",{url:"workgroup",templateUrl:"app/pages/system/workgroup/workgroup.html",controller:"WorkgroupController",controllerAs:"workgroup"}).state("home.system.email_tpl",{url:"email_tpl",templateUrl:"app/pages/system/email_tpl/email_tpl.html",controller:"EmailtplController",controllerAs:"emailtpl"}).state("home.system.configuration",{url:"configuration",templateUrl:"app/pages/system/configuration/configuration.html",controller:"ConfigurationController",controllerAs:"configuration"}).state("home.e401",{url:"error/401",templateUrl:"app/pages/others/401.html"}).state("home.e403",{url:"error/403",templateUrl:"app/pages/others/403.html"}).state("home.e404",{url:"error/404",templateUrl:"app/pages/others/404.html"}).state("home.e500",{url:"error/500",templateUrl:"app/pages/others/500.html"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("cmdb").config(t)}(),function(){"use strict";angular.module("cmdb").constant("env","debug")}(),function(){"use strict";function t(t,e,a,n,l){"debug"==l?t.debugEnabled(!0):t.debugEnabled(!1),a.interceptors.push("authInterceptor");var s="en";e.useCookieStorage().useLoader("langAsyncLoader").useSanitizeValueStrategy("escape").fallbackLanguage(s).preferredLanguage(s).registerAvailableLanguageKeys(["en","zh_CN"],{"en_*":"en","zh_*":"zh_CN"}).determinePreferredLanguage(),n.allowHtml=!0,n.timeOut=3e3,n.positionClass="toast-top-right",n.progressBar=!0}t.$inject=["$logProvider","$translateProvider","$httpProvider","toastrConfig","env"],angular.module("cmdb").config(t)}(),angular.module("cmdb").run(["$templateCache",function(t){t.put("app/main/main.html","<div><c3navbar></c3navbar><c3menu></c3menu><div id=content_wrapper><div ui-view><c3index></c3index></div></div><c3footer></c3footer></div>"),t.put("app/components/c3index/c3index.html",'<div class="page-content animated fadeIn"><cmloading ng-if=c3index.loading class=home-page-loading></cmloading><!-- 时间选择 --><div class=home-time><!-- 时间选择 - 开始时间 --><div class="input-group home-time-item"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd is-open=c3indedx.dataOpen ng-model=c3index.orderStart> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="c3indedx.dataOpen=1;"><i class="glyphicon glyphicon-calendar"></i></button></span></div><!-- 时间选择 - 结束时间 --><div class="input-group home-time-item"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd is-open=c3indedx.dataOpen2 ng-model=c3index.orderEnd> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="c3indedx.dataOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div><!-- 本周 --> <button class="btn btn-primary home-time-item" ng-click="c3index.handleTimeRange(\'week\')">{{\'S.TT.the_week\'| translate}}</button><!-- 本月 --> <button class="btn btn-primary home-time-item" ng-click="c3index.handleTimeRange(\'month\')">{{\'S.TT.the_month\'| translate}}</button><!-- 本季度 --> <button class="btn btn-primary home-time-item" ng-click="c3index.handleTimeRange(\'quarter\')">{{\'S.TT.the_quarter\'| translate}}</button></div><!-- 卡片展示 --><div class=home-card><div class="block home-card-items" ng-repeat="item in c3index.cardList" ng-click=c3index.handleJump(item)><div class=home-card-items-image-container><img ng-src={{item.icon}}></div><div class=home-card-items-text ng-style={color:item.color}><div class=home-card-items-text-title>{{item.name | translate}}</div><div ng-if="item.type !== \'create\'" class=home-card-items-text-count>{{item.count|| 0}}</div></div></div></div><!-- 折线图 --><div class=block style="margin: 10px"><div ng-show="c3index.weekData.length !== 0" id=line-container></div><div ng-show="c3index.weekData.length === 0" class=empty-week-data id=line-container>{{\'S.TT.empty_data\'| translate}}</div></div><!-- 横向柱状图 --><div class=home-histogram-content style="margin: 10px"><div ng-show="c3index.submitData.length !== 0" id=submit-container class="block home-histogram-content-items" style="width: 33%;height: 320px"></div><div ng-show="c3index.submitData.length === 0" id=submit-container class="block home-histogram-content-items empty-status-data" style="width: 33%;height: 320px">{{\'S.TT.empty_data\'| translate}}</div><div ng-show="c3index.upcomingData.length !== 0" id=upcoming-container class="block home-histogram-content-items" style="width: 33%;height: 320px"></div><div ng-show="c3index.upcomingData.length === 0" id=upcoming-container class="block home-histogram-content-items empty-status-data" style="width: 33%;height: 320px">{{\'S.TT.empty_data\'| translate}}</div><div ng-show="c3index.finishData.length !== 0" id=finish-container class="block home-histogram-content-items" style="width: 33%;height: 320px"></div><div ng-show="c3index.finishData.length === 0" id=finish-container class="block home-histogram-content-items empty-status-data" style="width: 33%;height: 320px">{{\'S.TT.empty_data\'| translate}}</div></div></div>'),t.put("app/components/loading/loading.html","<div class=loading-container><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div>"),t.put("app/components/navbar/navbar.html",'<header class="navbar navbar-fixed-top bg-danger"><div class="navbar-branding bg-openc3-dark"><a class=navbar-brand ui-sref=home><img src=/assets/images/ticket.png> <span translate=S.Index.title></span> </a><span id=toggle_sidemenu_l ng-click=nav.toggleMenu()><i ng-if="nav.currentMenu==\'sb-l-m\'" class="fa fa-bars fa-fw animated fadeInRight"></i> <i ng-if="nav.currentMenu==\'none\'" class="fa fa-ellipsis-v animated fadeInLeft fa-fw"></i></span></div><ul class="nav navbar-nav navbar-right"><li><a ui-sref=home.tt.search class=ripple><i class="fa fa-search fa-lg"></i></a></li><li class=dropdown uib-dropdown><a class="dropdown-toggle ripple" href=javascript:void(0) uib-dropdown-toggle><i class="fa fa-language fa-lg"></i></a><ul class="dropdown-menu pv5 animated animated-short flipInX" uib-dropdown-menu><li ng-repeat="lang in nav.langData"><a href=javascript:void(0); ng-click=nav.changeLang(lang.langkey)><span class="fa fa-language mr10"></span>{{ lang.lang }}</a></li></ul></li><li class="menu-divider hidden-xs"><i class="fa fa-circle"></i></li><li class=dropdown uib-dropdown><a href=javascript:void(0) class="dropdown-toggle fw600 p15 lh30 ripple" uib-dropdown-toggle><span>{{ nav.user.name }}</span> <span class="caret caret-tp hidden-xs"></span></a><ul class="dropdown-menu list-group dropdown-persist w250" uib-dropdown-menu><li class="dropdown-header clearfix"><div class="pull-left ml10">{{ nav.user.email }}</div></li><li class=list-group-item><a href=javascript:void(0) class="animated animated-short fadeInUp" ng-click=nav.logout()><span class="fa fa-power-off"></span><span translate=S.Index.logout></span></a></li></ul></li></ul></header>'),t.put("app/pages/group_manage/group_manage.html","<div ui-view></div>"),t.put("app/pages/others/401.html",'<div id=error-container class=text-center><h1>401</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/403.html",'<div id=error-container class=text-center><h1>403</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/404.html",'<div id=error-container class=text-center><h1>404</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/500.html",'<div id=error-container class=text-center><h1>500</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/report/report.html","<div ui-view></div>"),t.put("app/pages/system/system.html","<div ui-view></div>"),t.put("app/pages/tt/tt.html","<div ui-view></div>"),t.put("app/components/footer/footer.html","<div id=footer><small><span>OPEN-C3 © 2022</span></small></div>"),t.put("app/components/menu/menu.html",'<div id=sidebar_left class="affix nano nano-primary"><div class="sidebar-left-content nano-content has-scrollbar"><ul class="nav sidebar-menu"><li ng-class="{active: menu.states.is(\'home\')}"><a ui-sref=home class=ripple><span class="fa fa-compass"></span> <span class=sidebar-title translate=S.Menu.dashboard></span></a></li><!-- 事件 --><li ng-class="{active: menu.states.includes(\'home.tt\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.tt\')}"><span class="fa fa-ticket"></span> <span class=sidebar-title translate=S.Menu.tt></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.new\')}"><a href ui-sref=home.tt.new translate=S.Menu.create_tt></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.ordertotal\')}"><a href ui-sref=home.tt.ordertotal translate=S.TT.order_total></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.todototal\')}"><a href ui-sref=home.tt.todototal translate=S.TT.todo_total></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.personaltodo\')}"><a href ui-sref=home.tt.personaltodo translate=S.TT.personal_todo></a></li></ul></li><!-- 组管理 --><li ng-class="{active: menu.states.includes(\'home.group_manage\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.group_manage\')}"><span class="fa fa-users"></span> <span class=sidebar-title translate=S.Menu.group_manage></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.group_manage.my_group\')}"><a href ui-sref=home.group_manage.my_group translate=S.Menu.my_group></a></li></ul></li><!-- 报表 --><li ng-class="{active: menu.states.includes(\'home.report\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.report\')}"><span class="fa fa-table"></span> <span class=sidebar-title>报表</span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.report.workgroup\')}"><a href ui-sref=home.report.workgroup>工作组看板</a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.report.cti\')}"><a href ui-sref=home.report.cti>CTI看板</a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.report.user\')}"><a href ui-sref=home.report.user>User看板</a></li></ul></li><!-- 系统设置 --><li ng-class="{active: menu.states.includes(\'home.system\')}" ng-if=menu.isAdmin><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.system\')}"><span class="fa fa-cog"></span> <span class=sidebar-title translate=S.Menu.console></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.search\')}"><a href ui-sref=home.tt.search translate=S.Menu.search_tt></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.i18n\')}"><a ui-sref=home.system.i18n translate=S.Menu.i18n_setting></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.impact\')}"><a ui-sref=home.system.impact translate=S.Menu.impact></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.cti\')}"><a ui-sref=home.system.cti translate=S.Menu.cti></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.workgroup\')}"><a ui-sref=home.system.workgroup translate=S.Menu.workgroup></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.email_tpl\')}"><a ui-sref=home.system.email_tpl translate=S.Menu.email_tpl></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.configuration\')}"><a ui-sref=home.system.configuration translate=S.Menu.configuration></a></li></ul></li><!-- 帮助 --><li><a href=javascript:void(0) class=ripple toggle-class=menu-open><span class="fa fa-file-text-o"></span> <span class=sidebar-title translate=S.Menu.system_doc></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple><a href=https://open-c3.github.io target=_blank translate=S.Menu.user_manual></a></li></ul></li></ul></div></div>'),t.put("app/main/tt/main.html",'<div class=row><div class=col-md-12><div class=widget><div class="widget-content themed-background text-light-op"><strong></strong></div></div></div></div>'),t.put("app/pages/group_manage/my_group/my_group.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.my_group></li></ol></div></div><div class=block><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><uib-tabset><uib-tab ng-repeat="group in mygroup.groups" heading={{group.group_name}}><fieldset><legend>{{group.group_name}}</legend><form class="form-horizontal row" onsubmit="return false" name=addForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=group.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=group.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=group.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=group.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level5_report></div></div><div class="form-group form-actions text-center"><div class="col-md-8 col-md-offset-2"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.update ng-click=mygroup.updateGroup(group)></button></div></div></form></fieldset><fieldset><legend>Users &nbsp; <button class="btn btn-primary" translate=S.Index.add ng-click=mygroup.addUser(group)></button></legend><table class="table text-center"><thead><tr><th class=text-center>No.</th><th class=text-center>Email</th><th class=text-center>Priority</th><th class=text-center>#</th></tr></thead><tbody><tr ng-repeat="u in group.users track by $index"><td>{{$index+1}}</td><td><input type=email class=form-control ng-model=u.email></td><td><input type=number class=form-control ng-model=u.priority></td><td><div class=btn-group><button class="btn btn-primary" translate=S.Index.update ng-click=mygroup.updateUser(u)></button> <button class="btn btn-danger" translate=S.Index.delete ng-click=mygroup.deleteUser(u)></button> <button class="btn btn-primary" ng-if="u.disabled==1" ng-click=mygroup.disableUser(u)>启用</button> <button class="btn btn-warning" ng-if="u.disabled==0" ng-click=mygroup.disableUser(u)>禁用</button></div></td></tr></tbody></table></fieldset></uib-tab></uib-tabset></div>'),t.put("app/pages/report/cti/cti.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>CTI看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.cti class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'#\'"><b ng-if="v.id==\'0\'">全部</b> <b ng-repeat="i in report.baseData.item" ng-if="i.id == v.id"><b ng-repeat="t in report.baseData.type" ng-if="t.id == i.type_id"><b ng-repeat="c in report.baseData.category" ng-if="t.category_id == c.id">{{c.name}} - </b>{{t.name}} - </b>{{i.name}}</b></td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),t.put("app/pages/report/workgroup/workgroup.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>工作组看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.workgroup class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'#\'"><b ng-if="v.id==\'0\'">全部</b> <b ng-if="v.id!=0">{{v.id | baseDataMap:report.baseData:\'group\':\'group_name\' }}</b></td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),t.put("app/pages/system/configuration/configuration.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.configuration></li></ol></div></div><div class=block><button ng-disabled=configuration.createType uib-tooltip="{{configuration.createType ? \'默认只能有一个默认配置\': \'新建默认配置\'}}" class="btn btn-primary configuration-create-button" ng-click="configuration.handleCreate(\'default\')">{{\'D.Base.default_config\' | translate}}</button> <button class="btn btn-primary configuration-create-button" uib-tooltip=新建空白配置 ng-click="configuration.handleCreate(\'empty\')">{{\'D.Base.empty_config\' | translate}}</button><div class="panel panel-primary"><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=configuration.tableReload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ configuration.configTotal || 0 }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=configuration.configTable class="table text-center vertical-center configuration-table-style"><tr ng-repeat="m in $data" ng-class="{\'default-style\': !m.target_user}"><td data-title="\'ID\'">{{m.id}}</td><td data-title="\'影响级别\'">{{m.impact}} - {{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'总类\'">{{configuration.baseDataMap[\'category\'][m.category]}}</td><td data-title="\'子类\'">{{configuration.baseDataMap[\'type\'][m.type]}}</td><td data-title="\'名目\'">{{configuration.baseDataMap[\'item\'][m.item]}}</td><td data-title="\'工作组\'">{{configuration.baseDataMap[\'group\'][m.work_group]}}</td><td data-title="\'组员\'">{{configuration.baseDataMap[\'group_user\'][m.group_user]}}</td><td data-title="\'运维账号\'">{{m.target_user || (\'D.Base.default_config_text\'| translate)}}</td><td data-title="\'编辑人\'">{{m.edit_user || \'-\'}}</td><td data-title="\'操作\'"><button class="btn btn-link" ng-click=configuration.updateConfig(m) uib-tooltip=编辑><i class="fa fa-edit" aria-hidden=true></i></button> <button class="btn btn-link" ng-click=configuration.copyConfig(m) uib-tooltip=复制><i class="fa fa-copy" aria-hidden=true></i></button> <button class="btn btn-link" ng-click=configuration.deleteConfig(m) uib-tooltip=删除><i class="fa fa-times-circle operate-delete-danger" aria-hidden=true></i></button></td></tr></table></div></div></div>'),t.put("app/components/download/download.html",'<form id=dl_form style=display:inline-block action=/api/tt/search/export method=post ng-submit=submit() target=_blank><input name=ids ng-model=ids ng-show=0> <button class="btn btn-primary"><i class="fa fa-download"></i></button></form>'),t.put("app/pages/report/user/user.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>User看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.group_user class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'user\'" filter="{ user: \'text\'}">{{v.user}}</td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),t.put("app/pages/system/impact/impact.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.impact></li></ol></div></div><div class=block><div class=loading-container ng-if=!impact.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=impact.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=impact.tableReload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ impact.impactTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=impact.impactTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'Name (I18N)\'">{{m.name}} ( <small translate=D.Impact.level{{m.level}}></small> )</td><td data-title="\'Level\'">{{m.level}}</td><td data-title="\'响应SLA\'"><input class=form-control type=number ng-model=m.response_sla></td><td data-title="\'解决SLA\'"><input class=form-control type=number ng-model=m.resolve_sla></td><td data-title="\'#\'"><button class="btn btn-primary" ng-click=impact.updateImpact(m)><i class="fa fa-floppy-o"></i></button></td></tr></table></div></div></div>'),t.put("app/pages/system/workgroup/workgroup.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.workgroup></li></ol></div></div><div class=block><div class=loading-container ng-if=!workgroup.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=workgroup.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=workgroup.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ workgroup.workgroupTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=workgroup.workgroupTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'GroupName\'">{{m.group.group_name}}</td><td data-title="\'Group Users\'"><ul class=list-unstyled><li ng-repeat="u in m.users track by $index"><span>{{u.priority}}-{{u.email}}</span><!--禁用--><!--<a href ng-click="workgroup.delUser(u)" title="删除"><i class="fa fa-close text-danger"></i></a>--> <a href ng-click=workgroup.disableUser(u) ng-if="u.disabled==0" class=text-warning>禁用</a> <a href ng-click=workgroup.disableUser(u) ng-if="u.disabled==1" class=text-primary>启用</a></li></ul></td><td data-title="\'C.T.I.\'"><ul class=list-unstyled><li ng-repeat="i in m.items track by $index"><span>{{i}}</span></li></ul></td><td data-title="\'#\'"><div class=btn-group><button class="btn btn-primary" ng-click=workgroup.openAddUserForm(m.group)><i class="fa fa-plus"></i>&nbsp;用户</button></div><div class=btn-group><button class="btn btn-primary" ng-click=workgroup.openEditForm(m.group)><i class="fa fa-edit"></i></button> <button class="btn btn-danger" ng-click=workgroup.delGroup(m.group)><i class="fa fa-trash-o"></i></button></div></td></tr></table><button class="btn btn-primary" translate=S.Index.add ng-click=workgroup.openAddForm()></button><hr><!-- add form start --><fieldset class=addFieldset ng-if=workgroup.newGroup><legend>Add WorkGroup</legend><form class="form-horizontal row" onsubmit="return false" name=addForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newGroup.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newGroup.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.newGroup.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level5_report></div></div><div class="form-group form-actions text-center"><div class="col-md-8 col-md-offset-2"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.add ng-click=workgroup.addGroup()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset><!-- add form end --><!-- edit form start --><fieldset class=addFieldset ng-if=workgroup.currentGroup><legend>Edit WorkGroup</legend><form class=form-horizontal onsubmit="return false" name=editForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.currentGroup.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.currentGroup.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.currentGroup.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level5_report></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=editForm.$invalid translate=S.Index.update ng-click=workgroup.updateGroup()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset><!-- edit form end --><!-- add user form start --><fieldset class=addFieldset ng-if=workgroup.newUser><legend>Add User [Group: {{workgroup.newUser.group_id|baseDataMap:workgroup.basedata:\'group\':\'group_name\'}}]</legend><form class=form-horizontal onsubmit="return false" name=addUserForm novalidate><div class=form-group><label class="col-md-3 control-label">User Email</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newUser.email required></div></div><div class=form-group><label class="col-md-3 control-label">Priority</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.newUser.priority required></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addUserForm.$invalid translate=S.Index.add ng-click=workgroup.addUser()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset></div></div></div>'),
t.put("app/pages/system/i18n/i18n.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.i18n_setting></li></ol></div></div><div class=block id=i18n><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><uib-tabset><uib-tab ng-repeat="lang in i18n.langData" heading={{lang.lang}}><div class=row><div class=col-lg-8><div class=sub-header><button class="btn btn-primary" ng-click="i18n.save(lang.id, lang.jsonData)">保存</button></div><div class=loading-container ng-if=!i18n.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class=jsonView ng-if=i18n.showTab><json child=lang.jsonData default-collapsed=true type=object></json></div></div><div class=col-lg-4><div class=sub-header><button class="btn btn-primary" ng-click=i18n.parseJson(lang,lang.jsonString)><i class="fa fa-arrow-left"></i></button> <button class="btn btn-primary" ng-click=i18n.unparseJson(lang,lang.jsonData)><i class="fa fa-arrow-right"></i></button> <span class=red ng-if=!lang.wellFormed>JSON not well-formed!</span></div><div><textarea class=fluid-width ng-model=lang.jsonString></textarea></div></div></div></uib-tab></uib-tabset></div>'),t.put("app/pages/tt/list/list.html","<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Submenu.{{ttlist.presetMod}}></li><li ng-if=ttlist.groupname>{{ ttlist.groupname }}</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>List</li></ol></div></div><div class=block><div class=\"panel panel-primary\"><div class=panel-heading><span class=panel-controls><c3download data=ttlist.tickets></c3download><button class=\"btn btn-primary\" ng-click=ttlist.tableReload($event)><i class=\"fa fa-refresh\" ng-class=\"{'fa-spin':ttlist.loading}\"></i></button> </span><span>Total: {{ttlist.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=ttlist.loading></cmloading><div class=table-scroll ng-if=!ttlist.loading><table ng-table=ttlist.tableParams class=\"table table-hover text-center table-condensed va-m\"><tbody><tr ng-repeat=\"m in $data\" ng-class=\"{danger:m.response_timeout || m.resolve_timeout}\"><td data-title=\"'#'\"><span>{{ (ttlist.tableParams.page() - 1)*ttlist.tableParams.count() + $index + 1 }}</span></td><td data-title=\"'D.Base.ttno'|translate\"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title=\"'D.Base.impact'|translate\">{{m.impact}}-{{'D.Impact.level' + m.impact | translate}}</td><td data-title=\"'D.Base.status'|translate\">{{'D.Status.' + m.status | translate}}</td><td data-title=\"'C.T.I.'\">{{m.category | baseDataMap:ttlist.baseData:'category'}}.{{m.type | baseDataMap:ttlist.baseData:'type'}}.{{m.item | baseDataMap:ttlist.baseData:'item'}}.</td><td data-title=\"'D.Base.title'|translate\">{{m.title}}</td><td data-title=\"'D.Base.workgroup'|translate\">{{m.workgroup | baseDataMap:ttlist.baseData:'group':'group_name'}}</td><td data-title=\"'D.Base.group_user'|translate\">{{m.group_user | baseDataMap:ttlist.baseData:'group_user':'email'}}</td><td data-title=\"'D.Base.submit_user'|translate\">{{m.submit_user}}</td><td data-title=\"'D.Base.apply_user'|translate\">{{m.apply_user}}</td><td data-title=\"'D.Base.create_time'|translate\">{{m.created_at | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</td><td data-title=\"'D.Base.response_time'|translate\"><span ng-if=\"(m.response_time | date:'yyyy')>'0001'\">{{m.response_time | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</span></td><td data-title=\"'D.Base.resolved_time'|translate\"><span ng-if=\"m.status=='resolved' || m.status=='closed'\">{{m.resolve_time | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</span></td><td data-title=\"'D.Base.response_sla'|translate\"><span class=\"label label-danger\" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class=\"label label-info\" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title=\"'D.Base.resolve_sla'|translate\"><span class=\"label label-danger\" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class=\"label label-info\" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title=\"'S.TT.resolve_deadline'|translate\">{{m.resolve_deadline | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</td></tr></tbody></table></div></div></div></div>"),t.put("app/pages/tt/ordertotal/orderTotal.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.TT.order_total></li></ol></div></div><div class=block id=search><div class="panel panel-dark"><div class=panel-heading><span class=panel-title translate=S.Index.search></span></div><div class=panel-body><form class=form-inline><div class=widget-content><div class=row><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=orderTotal.order_start is-open=orderTotal.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="orderTotal.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=orderTotal.order_end is-open=orderTotal.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="orderTotal.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><input class=form-control placeholder=keyword ng-model=orderTotal.tableFilter.keyword style=width:100%></div></div></div></form></div></div><div class=row><div class="col-md-4 col-md-offset-4 text-center" style=margin-bottom:20px><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=orderTotal.search()><i class="fa fa-search fa-fw"></i> <span translate=S.Index.search></span></button></div><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=orderTotal.resetFilter()><i class="fa fa-repeat fa-fw"></i> <span translate=S.Index.reset></span></button></div></div></div></div><div class=block ng-if=orderTotal.searched><div class="panel panel-primary"><div class=panel-heading><span class=panel-controls><c3download data=orderTotal.tickets></c3download></span><span class=panel-title>Total: {{orderTotal.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=orderTotal.loading></cmloading><div class=table-scroll ng-if=!orderTotal.loading><table ng-table=orderTotal.tableParams class="table table-hover text-center table-condensed va-m"><tbody><tr ng-repeat="m in $data" ng-class="{danger:m.response_timeout || m.resolve_timeout}"><td data-title="\'#\'"><span>{{ (orderTotal.tableParams.page() - 1)*orderTotal.tableParams.count() + $index + 1 }}</span></td><td data-title="\'D.Base.ttno\'|translate"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title="\'D.Base.impact\'|translate">{{m.impact}}-{{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'D.Base.status\'|translate">{{\'D.Status.\' + m.status | translate}}</td><td data-title="\'C.T.I.\'">{{m.category | baseDataMap:orderTotal.baseData:\'category\'}}.{{m.type | baseDataMap:orderTotal.baseData:\'type\'}}.{{m.item | baseDataMap:orderTotal.baseData:\'item\'}}.</td><td data-title="\'D.Base.title\'|translate">{{m.title}}</td><td data-title="\'D.Base.workgroup\'|translate">{{m.workgroup | baseDataMap:orderTotal.baseData:\'group\':\'group_name\'}}</td><td data-title="\'D.Base.group_user\'|translate">{{m.group_user | baseDataMap:orderTotal.baseData:\'group_user\':\'email\'}}</td><td data-title="\'D.Base.submit_user\'|translate">{{m.submit_user}}</td><td data-title="\'D.Base.apply_user\'|translate">{{m.apply_user}}</td><td data-title="\'D.Base.create_time\'|translate">{{m.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td><td data-title="\'D.Base.response_time\'|translate"><span ng-if="(m.response_time | date:\'yyyy\')>\'0001\'">{{m.response_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.resolved_time\'|translate"><span ng-if="m.status==\'resolved\' || m.status==\'closed\'">{{m.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.response_sla\'|translate"><span class="label label-danger" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title="\'D.Base.resolve_sla\'|translate"><span class="label label-danger" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title="\'S.TT.resolve_deadline\'|translate">{{m.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td></tr></tbody></table></div></div></div></div>'),t.put("app/pages/tt/personaltodo/personalTodo.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.TT.personal_todo></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Search</li></ol></div></div><!-- search: start --><div class=block id=search><div class="panel panel-dark"><div class=panel-heading><span class=panel-title translate=S.Index.search></span></div><div class=panel-body><form class=form-inline><div class=widget-content><div class=row><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=personalTodo.order_start is-open=personalTodo.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="personalTodo.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=personalTodo.order_end is-open=personalTodo.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="personalTodo.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><input class=form-control placeholder=keyword ng-model=personalTodo.tableFilter.keyword style=width:100%></div></div></div></form></div></div><div class=row><div class="col-md-4 col-md-offset-4 text-center" style=margin-bottom:20px><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=personalTodo.search()><i class="fa fa-search fa-fw"></i> <span translate=S.Index.search></span></button></div><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=personalTodo.resetFilter()><i class="fa fa-repeat fa-fw"></i> <span translate=S.Index.reset></span></button></div></div></div></div><!-- search: end --><div class=block ng-if=personalTodo.searched><div class="panel panel-primary"><div class=panel-heading><span class=panel-controls><c3download data=personalTodo.tickets></c3download></span><span class=panel-title>Total: {{personalTodo.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=personalTodo.loading></cmloading><div class=table-scroll ng-if=!personalTodo.loading><table ng-table=personalTodo.tableParams class="table table-hover text-center table-condensed va-m"><tbody><tr ng-repeat="m in $data" ng-class="{danger:m.response_timeout || m.resolve_timeout}"><td data-title="\'#\'"><span>{{ (personalTodo.tableParams.page() - 1)*personalTodo.tableParams.count() + $index + 1 }}</span></td><td data-title="\'D.Base.ttno\'|translate"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title="\'D.Base.impact\'|translate">{{m.impact}}-{{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'D.Base.status\'|translate">{{\'D.Status.\' + m.status | translate}}</td><td data-title="\'C.T.I.\'">{{m.category | baseDataMap:personalTodo.baseData:\'category\'}}.{{m.type | baseDataMap:personalTodo.baseData:\'type\'}}.{{m.item | baseDataMap:personalTodo.baseData:\'item\'}}.</td><td data-title="\'D.Base.title\'|translate">{{m.title}}</td><td data-title="\'D.Base.workgroup\'|translate">{{m.workgroup | baseDataMap:personalTodo.baseData:\'group\':\'group_name\'}}</td><td data-title="\'D.Base.group_user\'|translate">{{m.group_user | baseDataMap:personalTodo.baseData:\'group_user\':\'email\'}}</td><td data-title="\'D.Base.submit_user\'|translate">{{m.submit_user}}</td><td data-title="\'D.Base.apply_user\'|translate">{{m.apply_user}}</td><td data-title="\'D.Base.create_time\'|translate">{{m.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td><td data-title="\'D.Base.response_time\'|translate"><span ng-if="(m.response_time | date:\'yyyy\')>\'0001\'">{{m.response_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.resolved_time\'|translate"><span ng-if="m.status==\'resolved\' || m.status==\'closed\'">{{m.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.response_sla\'|translate"><span class="label label-danger" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title="\'D.Base.resolve_sla\'|translate"><span class="label label-danger" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title="\'S.TT.resolve_deadline\'|translate">{{m.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td></tr></tbody></table></div></div></div></div>'),t.put("app/pages/tt/search/search.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.search_tt></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Search</li></ol></div></div><!-- search: start --><div class=block id=search><div class="panel panel-dark"><div class=panel-heading><span class=panel-title translate=S.Index.search></span></div><div class=panel-body><form class=form-inline><div class=widget-content><div class=row><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=ttsearch.tableFilter.create_start is-open=ttsearch.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="ttsearch.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=ttsearch.tableFilter.create_end is-open=ttsearch.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="ttsearch.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><input class=form-control placeholder="group user" ng-model=ttsearch.tableFilter.group_user style=width:100%></div><div class="form-group col-md-3"><input class=form-control placeholder=keyword ng-model=ttsearch.tableFilter.keyword style=width:100%></div></div><div class=row><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.category convert-to-number style=width:100%><option value="" translate=D.Base.category></option><option ng-repeat="d in ttsearch.baseData.category track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.type convert-to-number style=width:100%><option value="" translate=D.Base.type></option><option ng-repeat="d in ttsearch.baseData.type track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.item convert-to-number style=width:100%><option value="" translate=D.Base.item></option><option ng-repeat="d in ttsearch.baseData.item track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.workgroup convert-to-number style=width:100%><option value="" translate=D.Base.workgroup></option><option ng-repeat="d in ttsearch.baseData.group track by $index" value={{d.id}}>{{d.group_name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.impact convert-to-number style=width:100%><option value="" translate=D.Base.impact></option><option ng-repeat="d in ttsearch.baseData.impact track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.status style=width:100%><option value="" translate=D.Base.status></option><option value=assigned translate=D.Status.assigned></option><option value=wip translate=D.Status.wip></option><option value=pending translate=D.Status.pending></option><option value=resolved translate=D.Status.resolved></option><option value=closed translate=D.Status.closed></option></select></div><div class="form-group col-md-3"><input class=form-control placeholder="处理时长（单位：h）=解决时间-创建时间" ng-model=ttsearch.tableFilter.processing_time style=width:100%></div></div></div></form></div></div><div class=row><div class="col-md-4 col-md-offset-4 text-center" style=margin-bottom:20px><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=ttsearch.search()><i class="fa fa-search fa-fw"></i> <span translate=S.Index.search></span></button></div><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=ttsearch.resetFilter()><i class="fa fa-repeat fa-fw"></i> <span translate=S.Index.reset></span></button></div></div></div></div><!-- search: end --><div class=block ng-if=ttsearch.searched><div class="panel panel-primary"><div class=panel-heading><span class=panel-controls><c3download data=ttsearch.tickets></c3download></span><span class=panel-title>Total: {{ttsearch.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=ttsearch.loading></cmloading><div class=table-scroll ng-if=!ttsearch.loading><table ng-table=ttsearch.tableParams class="table table-hover text-center table-condensed va-m"><tbody><tr ng-repeat="m in $data" ng-class="{danger:m.response_timeout || m.resolve_timeout}"><td data-title="\'#\'"><span>{{ (ttsearch.tableParams.page() - 1)*ttsearch.tableParams.count() + $index + 1 }}</span></td><td data-title="\'D.Base.ttno\'|translate"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title="\'D.Base.impact\'|translate">{{m.impact}}-{{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'D.Base.status\'|translate">{{\'D.Status.\' + m.status | translate}}</td><td data-title="\'C.T.I.\'">{{m.category | baseDataMap:ttsearch.baseData:\'category\'}}.{{m.type | baseDataMap:ttsearch.baseData:\'type\'}}.{{m.item | baseDataMap:ttsearch.baseData:\'item\'}}.</td><td data-title="\'D.Base.title\'|translate">{{m.title}}</td><td data-title="\'D.Base.workgroup\'|translate">{{m.workgroup | baseDataMap:ttsearch.baseData:\'group\':\'group_name\'}}</td><td data-title="\'D.Base.group_user\'|translate">{{m.group_user | baseDataMap:ttsearch.baseData:\'group_user\':\'email\'}}</td><td data-title="\'D.Base.submit_user\'|translate">{{m.submit_user}}</td><td data-title="\'D.Base.apply_user\'|translate">{{m.apply_user}}</td><td data-title="\'D.Base.create_time\'|translate">{{m.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td><td data-title="\'D.Base.response_time\'|translate"><span ng-if="(m.response_time | date:\'yyyy\')>\'0001\'">{{m.response_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.resolved_time\'|translate"><span ng-if="m.status==\'resolved\' || m.status==\'closed\'">{{m.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.response_sla\'|translate"><span class="label label-danger" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title="\'D.Base.resolve_sla\'|translate"><span class="label label-danger" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title="\'S.TT.resolve_deadline\'|translate">{{m.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td></tr></tbody></table></div></div></div></div>'),t.put("app/pages/tt/show/show.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs18>{{ttshow.no|uppercase}}</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>{{ttshow.no|uppercase}}</li></ol></div></div><div ng-class="{\'tt-closed\':ttshow.ticket.status==\'closed\'}"></div><div class="row block"><div class="panel status-flow m10 mtn"><div class="panel-body br6 br-primary-light" ng-class="{\'br-danger-light\':ttshow.ticket.status==\'closed\'}"><span><h5><span translate=D.Status.assigned></span><br><small>{{ttshow.ticket.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5></span><span ng-repeat="flow in ttshow.status_flow track by $index"><h5 ng-if="$index+1<ttshow.status_flow.length"><span translate=D.Status.{{flow.oper_after}}></span><br><small>{{flow.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><h4 ng-if="$index+1==ttshow.status_flow.length"><span translate=D.Status.{{flow.oper_after}}></span><br><small>{{flow.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h4></span></div></div><div name=showtt_form class="form-horizontal showtt" onsubmit="return false" novalidate><!--left--><div class=col-md-5><!--事件信息--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.info></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.ttno></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.no }}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.submit_user></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.submit_user }}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.apply_user></label><div class=col-md-9><input class=form-control ng-model=ttshow.ticket.apply_user ng-disabled="ttshow.ticket.status==\'closed\'" required> <span ng-if="ttshow.OA_applicant.accountName!=\'\'" class="help-block fs12 text-muted mb5">{{ttshow.OA_applicant.sybDeptName}}-{{ttshow.OA_applicant.oneDeptName}}-{{ttshow.OA_applicant.twoDeptName}} | {{ttshow.OA_applicant.accountName}}-{{ttshow.OA_applicant.mobile}}</span></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.status></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.status required ng-if="ttshow.ticket.status!=\'closed\'" ng-change=ttshow.changeStatus()><option value=assigned translate=D.Status.assigned></option><option value=wip translate=D.Status.wip>wip</option><option value=pending translate=D.Status.pending>pending</option><option value=resolved translate=D.Status.resolved>resolved</option></select><p ng-if="ttshow.ticket.status==\'closed\'" class="form-control-static text-red text-bold">Closed</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.create_time></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.resolved_time></label><div class=col-md-9><p class=form-control-static ng-if="ttshow.oldTicket.status==\'resolved\' || ttshow.oldTicket.status==\'closed\'">{{ ttshow.oldTicket.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\' }}</p><p class=form-control-static ng-if="ttshow.oldTicket.status!=\'resolved\' && ttshow.oldTicket.status!=\'closed\'">{{ttshow.oldTicket.resolve_days}}&nbsp;days</p></div></div></div></div><!--事件影响--><div class="panel panel-danger panel-border top"><div class=panel-heading><h5 translate=S.TT.effect></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.impact></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.impact ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.impact track by $index" value={{v.id}}>{{v.level}} - {{\'D.Impact.level\' + v.level | translate}}</option></select></div></div></div></div><!--SLA--><div class="panel panel-warning panel-border top"><div class=panel-heading><h5>S.L.A.</h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.response_sla></label><div class=col-md-9><p class=form-control-static><span ng-class="{\'text-red\':ttshow.ticket.response_timeout}">{{ttshow.ticket.response_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.resolve_sla></label><div class=col-md-9><p class=form-control-static><span ng-class="{\'text-red\':ttshow.ticket.resolve_timeout}">{{ttshow.ticket.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></p></div></div></div></div><!--C.T.I--><div class="panel panel-info panel-border top"><div class=panel-heading><h5>C.T.I.</h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.category></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.category ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.category track by $index" value={{v.id}}>{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.type></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.type ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.type track by $index" value={{v.id}} ng-if="v.category_id == ttshow.ticket.category">{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.item></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.item ng-disabled="ttshow.ticket.status==\'closed\'" ng-change=ttshow.item_change() convert-to-number required><option ng-repeat="v in ttshow.baseData.item track by $index" value={{v.id}} ng-if="v.type_id == ttshow.ticket.type">{{v.name}}</option></select></div></div></div></div><!--指派--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.assign></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.workgroup></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.workgroup ng-disabled="ttshow.ticket.status==\'closed\'" ng-change=ttshow.group_change() convert-to-number required><option ng-repeat="v in ttshow.item_groups track by $index" value={{v.id}}>{{v.priority}} {{v.group_name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.group_user></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.group_user convert-to-number required ng-if="ttshow.ticket.status==\'closed\'" disabled><option ng-repeat="v in ttshow.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttshow.ticket.workgroup">{{v.priority}} - {{v.email}}</option></select><select class=form-control size=1 ng-model=ttshow.ticket.group_user convert-to-number required ng-if="ttshow.ticket.status!=\'closed\'"><option value=0 ng-if=ttshow.ticket.group_user></option><option ng-repeat="v in ttshow.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttshow.ticket.workgroup && v.disabled==0">{{v.priority}} - {{v.email}}</option></select></div></div></div></div></div><!--right--><div class=col-md-7><!--事件描述--><div class="panel panel-primary panel-border top"><div class=panel-heading><h5 translate=S.TT.desc></h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.title></label><div class=col-md-10><input class=form-control ng-model=ttshow.ticket.title ng-disabled="ttshow.ticket.status==\'closed\'" required></div></div><div class=form-group><label class="col-md-2 control-label" translate=D.Base.content></label><div class=col-md-10><div ng-model=ttshow.ticket.content contenteditable class=tteditor ng-if="ttshow.ticket.status!=\'closed\'"></div><div class=tteditor ng-bind-html=ttshow.ticket.content ng-if="ttshow.ticket.status==\'closed\'"></div></div></div></div></div><div class="panel panel-success panel-border top"><div class=panel-heading><h5>More</h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.email_list></label><div class=col-md-10><textarea class=form-control rows=2 ng-model=ttshow.ticket.email_list ng-disabled="ttshow.ticket.status==\'closed\'"></textarea></div></div><hr class="short alt"><div class=form-group ng-if="ttshow.ticket.attachment.length<5"><label class="col-md-2 control-label" translate=D.Base.attachment></label><div class=col-md-10><input type=file nv-file-select uploader=ttshow.uploader multiple> <span class=help-block>附件最多5个，单个不大于5MB</span></div></div><div class=form-group><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="item in ttshow.uploader.queue track by $index"><i class="fa fa-file"></i> <b>{{$index+1}}. </b><span>{{ item.file.name }} ({{ item.file.size/1024/1024|number:2}}MB) <a ng-if=!item.isUploading href ng-click=item.remove()><i class="text-danger fa fa-times"></i></a> </span><a href ng-if=!item.isUploading ng-click=item.upload()><i class="fa fa-upload"></i></a> <span ng-if=item.isUploading>(<b>{{item.progress}}%</b>)</span> <span class=text-danger ng-if=item.isError>Upload Error!</span></li></ul><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="a in ttshow.ticket.attachment track by $index"><i class="fa fa-file-o"></i> <b>{{$index+1}}. </b><span><a href ng-click=ttshow.download(a.uuid)>{{ a.name }}</a> ({{ a.size/1024/1024|number:2}}MB) <a href ng-click=ttshow.del_attachment(a)><i class="text-danger fa fa-times"></i></a></span></li></ul></div></div></div><uib-tabset justified=true active=ttshow.tabActive><uib-tab heading="{{\'S.Tab.reply\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/reply.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.worklog\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/worklog.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.solution\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/solution.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.syslog\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/syslog.html\'"></div></uib-tab></uib-tabset></div></div><div class="row text-right" ng-if="ttshow.ticket.status!=\'closed\'"><div class="col-md-9 col-md-offset-3 panel"><i class="fa fa-spin fa-circle-o-notch fa-lg" ng-if=ttshow.isUpdating></i> <button ng-disabled=ttshow.isUpdating class="btn btn-system" ng-click=ttshow.init()><i class="fa fa-refresh fa-fw"></i> <span translate=S.Index.refresh></span></button> <button ng-disabled=ttshow.isUpdating class="btn btn-primary" ng-click=ttshow.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.update></span></button></div></div></div>'),
t.put("app/pages/tt/todototal/todoTotal.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.TT.todo_total></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Search</li></ol></div></div><!-- search: start --><div class=block id=search><div class="panel panel-dark"><div class=panel-heading><span class=panel-title translate=S.Index.search></span></div><div class=panel-body><form class=form-inline><div class=widget-content><div class=row><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=todoTotal.order_start is-open=todoTotal.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="todoTotal.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=todoTotal.order_end is-open=todoTotal.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="todoTotal.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><input class=form-control placeholder=keyword ng-model=todoTotal.tableFilter.keyword style=width:100%></div></div></div></form></div></div><div class=row><div class="col-md-4 col-md-offset-4 text-center" style=margin-bottom:20px><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=todoTotal.search()><i class="fa fa-search fa-fw"></i> <span translate=S.Index.search></span></button></div><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=todoTotal.resetFilter()><i class="fa fa-repeat fa-fw"></i> <span translate=S.Index.reset></span></button></div></div></div></div><!-- search: end --><div class=block ng-if=todoTotal.searched><div class="panel panel-primary"><div class=panel-heading><span class=panel-controls><c3download data=todoTotal.tickets></c3download></span><span class=panel-title>Total: {{todoTotal.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=todoTotal.loading></cmloading><div class=table-scroll ng-if=!todoTotal.loading><table ng-table=todoTotal.tableParams class="table table-hover text-center table-condensed va-m"><tbody><tr ng-repeat="m in $data" ng-class="{danger:m.response_timeout || m.resolve_timeout}"><td data-title="\'#\'"><span>{{ (todoTotal.tableParams.page() - 1)*todoTotal.tableParams.count() + $index + 1 }}</span></td><td data-title="\'D.Base.ttno\'|translate"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title="\'D.Base.impact\'|translate">{{m.impact}}-{{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'D.Base.status\'|translate">{{\'D.Status.\' + m.status | translate}}</td><td data-title="\'C.T.I.\'">{{m.category | baseDataMap:todoTotal.baseData:\'category\'}}.{{m.type | baseDataMap:todoTotal.baseData:\'type\'}}.{{m.item | baseDataMap:todoTotal.baseData:\'item\'}}.</td><td data-title="\'D.Base.title\'|translate">{{m.title}}</td><td data-title="\'D.Base.workgroup\'|translate">{{m.workgroup | baseDataMap:todoTotal.baseData:\'group\':\'group_name\'}}</td><td data-title="\'D.Base.group_user\'|translate">{{m.group_user | baseDataMap:todoTotal.baseData:\'group_user\':\'email\'}}</td><td data-title="\'D.Base.submit_user\'|translate">{{m.submit_user}}</td><td data-title="\'D.Base.apply_user\'|translate">{{m.apply_user}}</td><td data-title="\'D.Base.create_time\'|translate">{{m.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td><td data-title="\'D.Base.response_time\'|translate"><span ng-if="(m.response_time | date:\'yyyy\')>\'0001\'">{{m.response_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.resolved_time\'|translate"><span ng-if="m.status==\'resolved\' || m.status==\'closed\'">{{m.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.response_sla\'|translate"><span class="label label-danger" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title="\'D.Base.resolve_sla\'|translate"><span class="label label-danger" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title="\'S.TT.resolve_deadline\'|translate">{{m.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td></tr></tbody></table></div></div></div></div>'),t.put("app/pages/system/email_tpl/email_tpl.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.email_tpl></li></ol></div></div><div class=block><div class=loading-container ng-if=!emailtpl.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=emailtpl.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=emailtpl.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ emailtpl.tplsTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=emailtpl.tplsTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'Name\'">{{m.name}}</td><td data-title="\'description\'">{{m.description}}</td><td data-title="\'#\'"><button class="btn btn-primary" ng-click=emailtpl.openEditForm(m)><i class="fa fa-edit"></i></button></td></tr></table><button class="btn btn-primary" translate=S.Index.add ng-click=emailtpl.openAddForm()></button><hr><!-- add form start --><fieldset class=addFieldset ng-if=emailtpl.newtpl><legend>Add Email Template</legend><form class=form-horizontal onsubmit="return false" name=addForm novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.name readonly required></div></div><div class=form-group><label class="col-md-3 control-label">Description</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.description required></div></div><div class=form-group><label class="col-md-3 control-label">Title</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.title required></div></div><div class=form-group><label class="col-md-3 control-label">Content</label><div class=col-md-8><!-- editor start --><div class=btn-toolbar data-role=editor-toolbar data-target=.editor><div class=btn-group><a class="btn btn-default" data-edit=bold title=Bold><i class="fa fa-bold"></i></a> <a class="btn btn-default" data-edit=italic title=Italic><i class="fa fa-italic"></i></a> <a class="btn btn-default" data-edit=strikethrough title=Strikethrough><i class="fa fa-strikethrough"></i></a> <a class="btn btn-default" data-edit=underline title=Underline><i class="fa fa-underline"></i></a></div><div class=btn-group><a class="btn btn-default" title=Color toggle-next><i class="fa fa-stop text-danger"></i></a><div class="hide float-toolbar" style=width:90px><a data-edit="foreColor #ff0000"><i class="fa fa-stop" style=color:#f00></i></a> <a data-edit="foreColor #00ff00"><i class="fa fa-stop" style=color:#0f0></i></a> <a data-edit="foreColor #0000ff"><i class="fa fa-stop" style=color:#00f></i></a> <a data-edit="foreColor #000000"><i class="fa fa-stop" style=color:#000></i></a> <a data-edit="foreColor #0080ff"><i class="fa fa-stop" style=color:#0080ff></i></a></div></div><div class=btn-group><a class="btn btn-default" data-edit=justifyleft title="Align Left"><i class="fa fa-align-left"></i></a> <a class="btn btn-default" data-edit=justifycenter title=Center><i class="fa fa-align-center"></i></a> <a class="btn btn-default" data-edit=justifyright title="Align Right"><i class="fa fa-align-right"></i></a> <a class="btn btn-default" data-edit=justifyfull title=Justify><i class="fa fa-align-justify"></i></a></div><div class=btn-group><a class="btn btn-default" title=Hyperlink toggle-next><i class="fa fa-link"></i></a><div class="float-toolbar hide"><input placeholder=URL type=text data-edit=createLink style=float:left;height:32px> <button class="btn btn-default" type=button>Add</button></div><a class="btn btn-default" data-edit=unlink title="Remove Hyperlink"><i class="fa fa-cut"></i></a></div><div class=btn-group><a class="btn btn-default" data-edit=undo title=Undo><i class="fa fa-undo"></i></a> <a class="btn btn-default" data-edit=redo title=Redo><i class="fa fa-repeat"></i></a></div></div><div class=editor ng-model=emailtpl.newtpl.content contenteditable></div><textarea class="editor_html fluid-width" ng-model=emailtpl.newtpl.content rows=10></textarea><!-- editor end --></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.add ng-click=emailtpl.addTpl()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=emailtpl.cancelForm()></button></div></div></form></fieldset><!-- add form end --><!-- edit form start --><fieldset class=addFieldset ng-if=emailtpl.currenttpl><legend>Edit Email Template [{{emailtpl.currenttpl.name}}]</legend><form class=form-horizontal onsubmit="return false" name=addForm novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.name readonly required></div></div><div class=form-group><label class="col-md-3 control-label">Description</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.description required></div></div><div class=form-group><label class="col-md-3 control-label">Title</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.title required></div></div><div class=form-group><label class="col-md-3 control-label">Content</label><div class=col-md-8><!-- editor start --><div class=btn-toolbar data-role=editor-toolbar data-target=.editor><div class=btn-group><a class="btn btn-default" data-edit=bold title=Bold><i class="fa fa-bold"></i></a> <a class="btn btn-default" data-edit=italic title=Italic><i class="fa fa-italic"></i></a> <a class="btn btn-default" data-edit=strikethrough title=Strikethrough><i class="fa fa-strikethrough"></i></a> <a class="btn btn-default" data-edit=underline title=Underline><i class="fa fa-underline"></i></a></div><div class=btn-group><a class="btn btn-default" title=Color toggle-next><i class="fa fa-stop text-danger"></i></a><div class="hide float-toolbar" style=width:90px><a data-edit="foreColor #ff0000"><i class="fa fa-stop" style=color:#f00></i></a> <a data-edit="foreColor #00ff00"><i class="fa fa-stop" style=color:#0f0></i></a> <a data-edit="foreColor #0000ff"><i class="fa fa-stop" style=color:#00f></i></a> <a data-edit="foreColor #000000"><i class="fa fa-stop" style=color:#000></i></a> <a data-edit="foreColor #0080ff"><i class="fa fa-stop" style=color:#0080ff></i></a></div></div><div class=btn-group><a class="btn btn-default" data-edit=justifyleft title="Align Left"><i class="fa fa-align-left"></i></a> <a class="btn btn-default" data-edit=justifycenter title=Center><i class="fa fa-align-center"></i></a> <a class="btn btn-default" data-edit=justifyright title="Align Right"><i class="fa fa-align-right"></i></a> <a class="btn btn-default" data-edit=justifyfull title=Justify><i class="fa fa-align-justify"></i></a></div><div class=btn-group><a class="btn btn-default" title=Hyperlink toggle-next><i class="fa fa-link"></i></a><div class="float-toolbar hide"><input placeholder=URL type=text data-edit=createLink style=float:left;height:32px> <button class="btn btn-default" type=button>Add</button></div><a class="btn btn-default" data-edit=unlink title="Remove Hyperlink"><i class="fa fa-cut"></i></a></div><div class=btn-group><a class="btn btn-default" data-edit=undo title=Undo><i class="fa fa-undo"></i></a> <a class="btn btn-default" data-edit=redo title=Redo><i class="fa fa-repeat"></i></a></div></div><div class=editor ng-model=emailtpl.currenttpl.content contenteditable></div><textarea class="fluid-width editor_html" ng-model=emailtpl.currenttpl.content rows=10></textarea><!-- editor end --></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.update ng-click=emailtpl.updateTpl()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=emailtpl.cancelForm()></button></div></div></form></fieldset><!-- add form end --></div></div></div>'),t.put("app/pages/system/cti/cti.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.cti></li></ol></div></div><div class=block><div class=loading-container ng-if=!cti.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=cti.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=cti.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>CTI</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div><button class="btn btn-primary" ng-click=cti.addCategory()>添加Category</button></div><hr><div class=row><ul class="toggle-menu col-md-6 cti-tree"><li class=open style=margin-bottom:15px ng-repeat="c in cti.cti_tree track by $index"><a href=javascript:void(0) class=submenu toggle-parent-class=open><i class="fa fa-angle-right"></i>{{c.name}} </a><span><label class="pointer text-primary padding-5" ng-click="cti.updateSwal(c,\'base/category/\')"><i class="fa fa-edit"></i></label><label class="pointer text-danger padding-5" ng-click="cti.delSwal(c, c.name, \'base/category/\')"><i class="fa fa-trash"></i></label><label class="pointer text-info padding-5" ng-click=cti.addType(c)><i class="fa fa-plus"></i></label></span><ul><li class=open ng-repeat="t in c.types track by $index"><a href=javascript:void(0) class=submenu toggle-parent-class=open><i class="fa fa-angle-right"></i>{{t.name}} </a><span><label class="pointer text-primary padding-5" ng-click="cti.updateSwal(t,\'base/type/\')"><i class="fa fa-edit"></i></label><label class="pointer text-danger padding-5" ng-click="cti.delSwal(t, t.name, \'base/type/\')"><i class="fa fa-trash"></i></label><label class="pointer text-info padding-5" ng-click=cti.addItem(t)><i class="fa fa-plus"></i></label></span><ul><li ng-repeat="i in t.items track by $index"><a href=javascript:void(0) ng-click=cti.editItem(i)>{{i.name}}</a></li></ul></li></ul></li></ul><!-- item edit --><fieldset class=col-md-6 ng-if=cti.currentItem.id><legend>Edit Item</legend><form class="item_form form-horizontal" novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-9><input type=text class=form-control ng-model=cti.currentItem.name></div></div><hr><div class=form-group><label class="col-md-3 control-label">title</label><div class=col-md-9><input type=text class=form-control ng-model=cti.currentItem.tpl_title></div></div><div class=form-group><label class="col-md-3 control-label">content</label><div class=col-md-9><textarea class=form-control rows=8 ng-model=cti.currentItem.tpl_content></textarea></div></div><hr><div class=form-group><label class="col-md-3 control-label">groups</label><div class=col-md-9><ul class=list-unstyled><li ng-repeat="map in cti.basedata.item_group_map" ng-if="map.item_id==cti.currentItem.id"><span>{{map.priority}}-{{map.group_id|baseDataMap:cti.basedata:\'group\':\'group_name\'}}</span> <span><a href ng-click=cti.delGroup(map)><i class="fa fa-close text-danger"></i></a></span></li><li><a href ng-click=cti.addGroup()><i class="fa fa-plus text-primary"></i></a></li></ul></div></div><div class=form-group><div class="col-md-9 col-md-offset-3"><button class="btn btn-primary" translate=S.Index.update ng-click=cti.updateItem()></button> <button class="btn btn-danger" translate=S.Index.delete ng-click="cti.delSwal(cti.currentItem, cti.currentItem.name, \'base/item/\')"></button> <button class="btn btn-default" translate=S.Index.cancel ng-click=cti.cancelItem()></button></div></div></form></fieldset><!-- item edit --><!-- item add --><fieldset class=col-md-6 ng-if=cti.currentType.id><legend>Add Item [Type: {{cti.currentType.name}}]</legend><form class="item_form form-horizontal" novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-9><input type=text class=form-control ng-model=cti.newItem.name></div></div><hr><div class=form-group><label class="col-md-3 control-label">title</label><div class=col-md-9><input type=text class=form-control ng-model=cti.newItem.tpl_title></div></div><div class=form-group><label class="col-md-3 control-label">content</label><div class=col-md-9><textarea class=form-control rows=10 ng-model=cti.newItem.tpl_content></textarea></div></div><div class=form-group><div class="col-md-9 col-md-offset-3"><button class="btn btn-primary" translate=S.Index.add ng-click=cti.addItemSwal()></button> <button class="btn btn-default" translate=S.Index.cancel ng-click=cti.cancelItem()></button></div></div></form></fieldset><!-- item add --></div></div></div></div>'),t.put("app/pages/tt/new/cti_search.html",'<div class=modal-body><div class=row><div class=col-md-4><h5 translate=D.Base.category class=text-bold></h5><ul class=list-unstyled><li ng-repeat="c in ctisearch.s_c track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_c(c) ng-if="c.hide!=1">{{c.name}}</a> <span ng-if="c.hide==1">{{c.name}}</span></li></ul></div><div class=col-md-4><h5 translate=D.Base.type class=text-bold></h5><ul class=list-unstyled><li ng-repeat="t in ctisearch.s_t track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_t(t) ng-if="t.hide!=1">{{t.name}}</a> <span ng-if="t.hide==1">{{t.name}}</span></li></ul></div><div class=col-md-4><h5 translate=D.Base.item class=text-bold></h5><ul class=list-unstyled><li ng-repeat="i in ctisearch.s_i track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_i(i)>{{i.name}}</a></li></ul></div></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=ctisearch.cancel() translate=S.Index.back></button></div>'),t.put("app/pages/tt/new/new.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.create_tt></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>New</li></ol></div></div><div class="row block"><form name=newtt_form class="form-horizontal newtt" onsubmit="return false" novalidate><div class=col-md-12><!-- 选择账号 --><div class="panel panel-alert panel-border top"><div class=panel-heading><h5 translate=D.Base.work_order_classification></h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label"><span translate=D.Base.select_person_number></span> &nbsp; <span class=text-danger>*</span></label><div class=col-md-10><select class=form-control size=1 ng-model=ttnew.personSelect ng-change=ttnew.handlePersonChange() required><option ng-repeat="v in ttnew.personOption" value={{v.target_user}}>{{v.target_user || \'D.Base.default_config_text\'}}</option></select></div></div></div></div></div><!--left--><div class=col-md-5 ng-if="ttnew.personSelect !== \'默认配置\'"><!--事件影响--><div class="panel panel-danger panel-border top"><div class=panel-heading><h5 translate=S.TT.effect></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.impact></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-8><select class=form-control size=1 ng-model=ttnew.ticket.impact convert-to-number required><option ng-repeat="v in ttnew.baseData.impact track by $index" value={{v.id}}>{{v.level}} - {{\'D.Impact.level\' + v.level | translate}}</option></select></div><div class=col-md-1 style=line-height:30px;padding:3px><a href=https://open-c3.github.io target=_blank><i class="fa fa-question-circle-o fa-lg"></i></a></div></div></div></div><!--C.T.I--><div class="panel panel-warning panel-border top"><div class=panel-heading><h5 class=pull-left>C.T.I.</h5><span class=pull-right><input type=text style="padding:3px 10px;height:36px" class=form-control placeholder=Search(搜索) ng-model=ttnew.cti_search_w ng-keyup="$event.keyCode == 13 ? ttnew.cti_search() : null"></span></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.category></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.category convert-to-number required><option ng-repeat="v in ttnew.baseData.category track by $index" value={{v.id}}>{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.type></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.type convert-to-number required><option ng-repeat="v in ttnew.baseData.type track by $index" value={{v.id}} ng-if="v.category_id == ttnew.ticket.category">{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.item></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.item ng-change=ttnew.item_change() convert-to-number required><option ng-repeat="v in ttnew.baseData.item track by $index" value={{v.id}} ng-if="v.type_id == ttnew.ticket.type">{{v.name}}</option></select></div></div></div></div><!--指派--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.assign></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.workgroup></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.workgroup ng-change=ttnew.group_change() convert-to-number required><option ng-repeat="v in ttnew.item_groups track by $index" value={{v.id}}>{{v.priority}} {{v.group_name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.group_user></span>&nbsp;<span class=text-danger>&nbsp;*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.group_user convert-to-number required><option value=""></option><option ng-repeat="v in ttnew.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttnew.ticket.workgroup && v.disabled==0">{{v.priority}} - {{v.email}}</option></select></div></div></div></div><!--联系人--><div class="panel panel-info panel-border top"><div class=panel-heading><h5 translate=S.TT.contact></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.submit_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><p class=form-control-static>{{ ttnew.ticket.submit_user }}</p></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.apply_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><input class=form-control ng-model=ttnew.ticket.apply_user required></div></div></div></div></div><!--right--><div class=col-md-7 ng-class="{\'col-md-12\': ttnew.personSelect === \'默认配置\'}"><!--事件描述--><div class="panel panel-primary panel-border top"><div class=panel-heading><h5 translate=S.TT.desc></h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label"><span translate=D.Base.title></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-10><input class=form-control ng-model=ttnew.ticket.title required></div></div><div class=form-group><label class="col-md-2 control-label"><span translate=D.Base.content></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-10><div ng-model=ttnew.ticket.content contenteditable class=tteditor></div></div></div></div></div><div class="panel panel-success panel-border top"><div class=panel-heading><h5>More</h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.email_list></label><div class=col-md-10><ng-form name=someForm><textarea name=email class=form-control rows=2 ng-model=ttnew.ticket.email_list pattern=^[a-zA-Z0-9_-]+@[a-zA-Z]+\\.[a-zA-Z]+(,[a-zA-Z0-9_-]+@[a-zA-Z]+\\.[a-zA-Z]*)*$></textarea><span style=color:red ng-show=someForm.email.$error.pattern>请输入正确的邮箱地址格式，多个邮箱地址之间用逗号分隔</span> <span class=help-block>填写OA邮箱,多个邮箱地址之间用逗号分隔</span></ng-form></div></div><hr class="short alt"><div class=form-group><label class="col-md-2 control-label" translate=D.Base.attachment></label><div class=col-md-10><input type=file nv-file-select uploader=ttnew.uploader multiple> <span class=help-block>附件最多5个，单个不大于5MB</span></div></div><div class=form-group><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="item in ttnew.uploader.queue track by $index"><i class="fa fa-file-o"></i> <b>{{$index+1}}. </b><span>{{ item.file.name }} ({{ item.file.size/1024/1024|number:2}}MB) <a href ng-click=item.remove()><i class="text-danger fa fa-times"></i></a></span></li></ul></div></div></div></div><div class="form-group text-right"><div class="col-md-9 col-md-offset-3 panel"><button ng-disabled=newtt_form.$invalid class="btn btn-primary" ng-click=ttnew.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.submit></span></button></div></div></form></div>'),t.put("app/pages/tt/new/submit.html",'<div class=modal-body><div class=text-center><i class="fa fa-check-circle-o text-info fa-4x" ng-if="ttsubmit.astatus==\'complete\'"></i> <i class="fa fa-circle-o-notch fa-spin text-primary fa-4x" ng-if="ttsubmit.astatus!=\'complete\'"></i></div><ul class=list-unstyled><li><h4 class=inline>提交(submit) <i class="text-success fa fa-check" ng-if="ttsubmit.tstatus==\'success\'"></i> <i class="text-danger fa fa-warning" ng-if="ttsubmit.tstatus==\'error\'"></i> <a href ui-sref=home.tt.show({id:ttsubmit.newTTNo}) ng-if="ttsubmit.tstatus==\'success\' && ttsubmit.astatus==\'complete\'" translate=S.Index.view ng-click=ttsubmit.cancel()></a> <span ng-if="ttsubmit.tstatus==\'success\' && ttsubmit.astatus==\'complete\'">&nbsp; redirecting in {{ttsubmit.timeSec}} seconds</span></h4></li><li ng-if="ttsubmit.uploader.queue.length > 0 && ttsubmit.tstatus == \'success\'"><h4>上传附件(uploading files)</h4><div ng-repeat="item in ttsubmit.uploader.queue track by $index" class=row><div class=col-md-6><span><b>{{ $index+1 }}.</b> {{item.file.name}} <b>({{ item.file.size/1024/1024|number:2}}MB)</b></span> <i class="fa fa-check text-success" ng-if=item.isSuccess></i> <i class="fa fa-check text-danger" ng-if=item.isError></i></div><div class=col-md-6><div class=progress><div class="progress-bar progress-bar-info" style=width:{{item.progress}}%>{{item.progress}}%</div></div></div></div></li></ul><div class=text-center ng-if="ttsubmit.tstatus!=\'success\'"><button class="btn btn-primary" ng-click="ttsubmit.go(\'home\')" translate=S.Menu.dashboard></button> <button class="btn btn-primary" ng-click=ttsubmit.cancel() translate=S.Index.back></button></div></div>'),t.put("app/pages/system/configuration/copyConfig/copyConfig.html",'<div class="row block"><div class="panel panel-primary"><div class="panel-heading config-model-title"><div ng-if=!copyConfig.types>{{\'D.Base.copy_default_config\' | translate}}</div><div ng-if=copyConfig.types>{{\'D.Base.copy_empty_config\'| translate}}</div><span class=panel-controls><button class="btn btn-primary" uib-tooltip="{{\'S.Index.close\'|translate}}" ng-click=copyConfig.cancel()><i class="fa fa-times" aria-hidden=true></i></button></span></div><form name=newtt_form class="form-horizontal newtt" onsubmit="return false" novalidate><div class=col-md-12><!--复制账号--><div class="panel panel-info panel-border top"><div class=panel-heading><h5 translate=D.Base.copy_user_config></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.target_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><p class=form-control-static>{{ copyConfig.items.target_user|| (\'D.Base.default_config_text\'| translate) }}</p></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.template_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><input class=form-control ng-model=copyConfig.ticket.target_user required></div></div></div></div></div><div class="form-group text-right"><div class="col-md-9 col-md-offset-3 panel"><button ng-disabled=newtt_form.$invalid class="btn btn-primary" ng-click=copyConfig.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.submit></span></button> <button class="btn btn-warning" ng-click=copyConfig.cancel()><span translate=S.Index.cancel></span></button></div></div></form></div></div>'),t.put("app/pages/system/configuration/newEdit/newEdit.html",'<div class="row block"><div class="panel panel-primary"><div class="panel-heading config-model-title"><!-- 编辑配置 --><div ng-if=newEdit.itemDetail.impact><div ng-if=!newEdit.types>{{\'D.Base.edit_default_config\' | translate}}</div><div ng-if=newEdit.types>{{\'D.Base.edit_empty_config\'| translate}}</div></div><!-- 新建配置 --><div ng-if=!newEdit.itemDetail.impact><div ng-if=!newEdit.types>{{\'D.Base.default_config\' | translate}}</div><div ng-if=newEdit.types>{{\'D.Base.empty_config\'| translate}}</div></div><span class=panel-controls><button class="btn btn-primary" uib-tooltip="{{\'S.Index.close\'|translate}}" ng-click=newEdit.cancel()><i class="fa fa-times" aria-hidden=true></i></button></span></div><form name=newtt_form class="form-horizontal newtt" onsubmit="return false" novalidate><div class=col-md-12><!--联系人--><div ng-if=newEdit.types class="panel panel-info panel-border top"><div class=panel-heading><h5 translate=D.Base.copy_user_config></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.target_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><input class=form-control ng-model=newEdit.ticket.target_user required></div></div></div></div><!--事件影响--><div class="panel panel-danger panel-border top"><div class=panel-heading><h5 translate=S.TT.effect></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.impact></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-8><select class=form-control size=1 ng-model=newEdit.ticket.impact convert-to-number required><option ng-repeat="v in newEdit.baseData.impact track by $index" value={{v.id}}>{{v.level}} - {{\'D.Impact.level\' + v.level | translate}}</option></select></div><div class=col-md-1 style=line-height:30px;padding:3px><a href=https://open-c3.github.io target=_blank><i class="fa fa-question-circle-o fa-lg"></i></a></div></div></div></div><!--C.T.I--><div class="panel panel-warning panel-border top"><div class=panel-heading><h5 class=pull-left>C.T.I.</h5><span class=pull-right><input type=text style="padding:3px 10px;height:36px" class=form-control placeholder=Search(搜索) ng-model=newEdit.cti_search_w ng-keyup="$event.keyCode == 13 ? newEdit.cti_search() : null"></span></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.category></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=newEdit.ticket.category convert-to-number required><option ng-repeat="v in newEdit.baseData.category track by $index" value={{v.id}}>{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.type></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=newEdit.ticket.type convert-to-number required><option ng-repeat="v in newEdit.baseData.type track by $index" value={{v.id}} ng-if="v.category_id == newEdit.ticket.category">{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.item></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=newEdit.ticket.item ng-change=newEdit.item_change() convert-to-number required><option ng-repeat="v in newEdit.baseData.item track by $index" value={{v.id}} ng-if="v.type_id == newEdit.ticket.type">{{v.name}}</option></select></div></div></div></div><!--指派--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.assign></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.workgroup></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=newEdit.ticket.work_group ng-change=newEdit.group_change() convert-to-number required><option ng-repeat="v in newEdit.item_groups track by $index" value={{v.id}}>{{v.priority}} {{v.group_name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.group_user></span>&nbsp;<span class=text-danger>&nbsp;*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=newEdit.ticket.group_user convert-to-number required><option value=""></option><option ng-repeat="v in newEdit.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == newEdit.ticket.work_group && v.disabled==0">{{v.priority}} - {{v.email}}</option></select></div></div></div></div></div><div class="form-group text-right"><div class="col-md-9 col-md-offset-3 panel"><button ng-disabled=newtt_form.$invalid class="btn btn-primary" ng-click=newEdit.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.submit></span></button> <button class="btn btn-warning" ng-click=newEdit.cancel()><span translate=S.Index.cancel></span></button></div></div></form></div></div>'),
t.put("app/pages/tt/show/tabs/reply.html",'<div class=block-section style=height:300px;overflow-y:auto><div class=row style=height:40px;margin:5px><div class="form-group col-md-10"><input class=form-control ng-model=ttshow.newReplylog></div><div class="form-group col-md-2"><a href=javascript:void(0) class="btn btn-primary" translate=S.Index.submit ng-disabled=!ttshow.newReplylog ng-click=ttshow.addReplylog()></a> {{addreplylogform}}</div></div><div style=height:240px><div ng-repeat="log in ttshow.replylog" class=reply-log><h5>{{log.oper_user}} <small>{{log.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><span>{{log.content}}</span></div></div></div>'),t.put("app/pages/tt/show/tabs/solution.html",'<div class=block-section style=height:300px;overflow-y:auto ng-class="{\'solution-highlight\':(ttshow.ticket.root_cause==\'\'||ttshow.ticket.solution==\'\') && ttshow.ticket.status==\'resolved\'}"><div class=form-group style="margin:5px 0"><label class="control-label col-md-2" translate=D.Base.root_cause></label><div class=tteditor contenteditable ng-model=ttshow.ticket.root_cause style=height:90px></div></div><div class=form-group style="margin:5px 0"><label class="control-label col-md-2" translate=D.Base.solution></label><div class=tteditor contenteditable ng-model=ttshow.ticket.solution style=height:190px></div></div></div>'),t.put("app/pages/tt/show/tabs/syslog.html","<div class=block-section style=height:300px;overflow-y:auto><ul class=list-unstyled><li ng-repeat=\"log in ttshow.syslog\"><span><b>{{log.oper_user | splitStr:'@':0 }} </b></span><span>[ {{log.created_at | amDateFormat:'YYYY-MM-DD HH:mm:ss'}} ] : </span><span><label class=label ng-class=\"{'label-primary':log.oper_type=='update', 'label-success':log.oper_type=='add', 'label-danger':log.oper_type=='delete'}\">{{log.oper_type}}</label></span>&nbsp; <span translate=D.Base.{{log.oper_column}}></span>&nbsp; <span ng-if=\"log.oper_type!='update'\"><code>{{log.content}}</code></span> <span ng-if=\"log.oper_type=='update'\"><span ng-if=\"log.oper_column!='title' && log.oper_column!='content' && log.oper_column!='root_cause' && log.oper_column!='solution' && log.oper_column!='status'\"><code>{{ log.oper_pre | historyColumnMap:log.oper_column:ttshow.baseData }}</code> -&gt; <code>{{ log.oper_after | historyColumnMap:log.oper_column:ttshow.baseData }}</code> </span><span ng-if=\"log.oper_column=='status'\"><code translate=\"D.Status.{{ log.oper_pre }}\"></code> -&gt; <code translate=\"D.Status.{{ log.oper_after }}\"></code></span></span></li></ul></div>"),t.put("app/pages/tt/show/tabs/worklog.html",'<div class=block-section style=height:300px;overflow-y:auto><div class=row style=height:40px;margin:5px><div class="form-group col-md-12"><div ng-model=ttshow.newWorklog contenteditable class=tteditor></div></div><div class="form-group col-md-12"><a href=javascript:void(0) class="btn btn-primary" translate=S.Index.submit ng-disabled=!ttshow.newWorklog ng-click=ttshow.addWorklog()></a> {{addworklogform}}</div></div><div style=height:240px><div ng-repeat="log in ttshow.worklog" class=reply-log><h5>{{log.oper_user}} <small>{{log.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><div ng-bind-html=log.content></div></div></div></div>')}]);