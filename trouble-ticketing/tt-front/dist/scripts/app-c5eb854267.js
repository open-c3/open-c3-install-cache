!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?exports["ng-table"]=e(require("angular")):t["ng-table"]=e(t.angular)}(this,function(t){return function(t){function e(l){if(a[l])return a[l].exports;var n=a[l]={i:l,l:!1,exports:{}};return t[l].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,e,a){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=33)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var a=e.slice(1),l=t[e[0]];return function(t,e,n){l.apply(this,[t,e,n].concat(a))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(e,a){e.exports=t},function(t,e,a){"use strict";function l(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var n=a(0),s=a(4),i=a(5),o=a(6),r=a(7),c=a(8),d=a(9),u=a(10),p=a(11),m=a(12),g=a(13),f=a(14),v=a(15),b=a(16),h=a(17);a(25),a(27),a(26),a(28),a(31),a(30),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n.module("ngTable-browser",[]).directive("ngTable",s.ngTable).factory("ngTableColumn",i.ngTableColumn).directive("ngTableColumnsBinding",o.ngTableColumnsBinding).controller("ngTableController",r.ngTableController).directive("ngTableDynamic",c.ngTableDynamic).provider("ngTableFilterConfig",d.ngTableFilterConfigProvider).directive("ngTableFilterRow",u.ngTableFilterRow).controller("ngTableFilterRowController",p.ngTableFilterRowController).directive("ngTableGroupRow",m.ngTableGroupRow).controller("ngTableGroupRowController",g.ngTableGroupRowController).directive("ngTablePagination",f.ngTablePagination).directive("ngTableSelectFilterDs",v.ngTableSelectFilterDs).directive("ngTableSorterRow",b.ngTableSorterRow).controller("ngTableSorterRowController",h.ngTableSorterRowController),l(a(18))},function(t,e,a){"use strict";function l(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var n=a(0),s=a(19),i=a(20),o=a(22),r=a(21);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n.module("ngTable-core",[]).provider("ngTableDefaultGetData",s.ngTableDefaultGetDataProvider).value("ngTableDefaults",i.ngTableDefaults).factory("NgTableParams",o.ngTableParamsFactory).factory("ngTableEventsChannel",r.ngTableEventsChannel),l(a(23))},,function(t,e,a){"use strict";function l(t,e){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var a,l,s=[],i=0,o=[];return n.forEach(t.find("tr"),function(t){o.push(n.element(t))}),a=o.filter(function(t){return!t.hasClass("ng-table-group")})[0],l=o.filter(function(t){return t.hasClass("ng-table-group")})[0],a?(n.forEach(a.find("td"),function(t){var a=n.element(t);if(!a.attr("ignore-cell")||"true"!==a.attr("ignore-cell")){var o=function(t){return a.attr("x-data-"+t)||a.attr("data-"+t)||a.attr(t)},r=function(t,e){a.attr("x-data-"+t)?a.attr("x-data-"+t,e):a.attr("data"+t)?a.attr("data"+t,e):a.attr(t,e)},c=function(t){var a=o(t);if(a){var l,n=function(t){return void 0!==l?l:e(a)(t)};return n.assign=function(t,n){var s=e(a);s.assign?s.assign(t.$parent,n):l=n},n}},d=o("title-alt")||o("title");d&&a.attr("data-title-text","{{"+d+"}}"),s.push({id:i++,title:c("title"),titleAlt:c("title-alt"),headerTitle:c("header-title"),sortable:c("sortable"),"class":c("header-class"),filter:c("filter"),groupable:c("groupable"),headerTemplateURL:c("header"),filterData:c("filter-data"),show:a.attr("ng-if")?c("ng-if"):void 0}),(l||a.attr("ng-if"))&&r("ng-if","$columns["+(s.length-1)+"].show(this)")}}),function(t,e,a,l){t.$columns=s=l.buildColumns(s),l.setupBindingsToInternalScope(a.ngTable),l.loadFilterData(s),l.compileDirectiveTemplates()}):void 0}}}var n=a(0);l.$inject=["$q","$parse"],e.ngTable=l},function(t,e,a){"use strict";function l(){function t(t,a,s){var i=Object.create(t),o=e();for(var r in o)void 0===i[r]&&(i[r]=o[r]),n.isFunction(i[r])||!function(e){var a=function n(){return 1!==arguments.length||l(arguments[0])?t[e]:void n.assign(null,arguments[0])};a.assign=function(a,l){t[e]=l},i[e]=a}(r),function(e){var o=i[e];i[e]=function(){if(1!==arguments.length||l(arguments[0])){var e=arguments[0]||a,r=Object.create(e);return n.extend(r,{$column:i,$columns:s}),o.call(t,r)}o.assign(null,arguments[0])},o.assign&&(i[e].assign=o.assign)}(r);return i}function e(){return{"class":a(""),filter:a(!1),groupable:a(!1),filterData:n.noop,headerTemplateURL:a(!1),headerTitle:a(""),sortable:a(!1),show:a(!0),title:a(""),titleAlt:a("")}}function a(t){var e=t,a=function n(){return 1!==arguments.length||l(arguments[0])?e:void n.assign(null,arguments[0])};return a.assign=function(t,a){e=a},a}function l(t){return null!=t&&n.isFunction(t.$new)}return{buildColumn:t}}var n=a(0);l.$inject=[],e.ngTableColumn=l},function(t,e){"use strict";function a(t){function e(e,a,l){var n=t(l.ngTableColumnsBinding).assign;n&&e.$watch("$columns",function(t){var a=(t||[]).slice(0);n(e,a)})}var a={restrict:"A",require:"ngTable",link:e};return a}a.$inject=["$parse"],e.ngTableColumnsBinding=a},function(t,e,a){"use strict";function l(t,e,a,l,s,i,o,r,c,d){function u(e){if(e&&!t.params.hasErrorState()){var a=t.params,l=a.settings().filterOptions;if(a.hasFilterChanges()){var n=function(){a.page(1),a.reload()};l.filterDelay?h(n,l.filterDelay):n()}else a.reload()}}function p(){i.showFilter?t.$parent.$watch(i.showFilter,function(e){t.show_filter=e}):t.$watch(f,function(e){t.show_filter=e}),i.disableFilter&&t.$parent.$watch(i.disableFilter,function(e){t.$filterRow.disabled=e})}function m(){if(t.$groupRow={show:!1},i.showGroup){var e=l(i.showGroup);t.$parent.$watch(e,function(e){t.$groupRow.show=e}),e.assign&&t.$watch("$groupRow.show",function(a){e.assign(t.$parent,a)})}else t.$watch("params.hasGroup()",function(e){t.$groupRow.show=e})}function g(){return(t.$columns||[]).filter(function(e){return e.show(t)})}function f(){return!!t.$columns&&v(t.$columns,function(e){return e.show(t)&&!!e.filter(t)})}function v(t,e){for(var a=!1,l=0;l<t.length;l++){var n=t[l];if(e(n)){a=!0;break}}return a}function b(){d.onAfterReloadData(function(e,a){var l=g();e.hasGroup()?(t.$groups=a||[],t.$groups.visibleColumnCount=l.length):(t.$data=a||[],t.$data.visibleColumnCount=l.length)},t,function(e){return t.params===e}),d.onPagesChanged(function(e,a){t.pages=a},t,function(e){return t.params===e})}t.$filterRow={disabled:!1},t.$loading=!1,t.hasOwnProperty("params")||(t.params=new e(!0));var h=function(){var t;return function(e,l){a.cancel(t),t=a(e,l)}}();t.$watch("params",function(t,e){t!==e&&t&&t.reload()},!1),t.$watch("params.isDataReloadRequired()",u),this.compileDirectiveTemplates=function(){if(!o.hasClass("ng-table")){t.templates={header:i.templateHeader?i.templateHeader:"ng-table/header.html",pagination:i.templatePagination?i.templatePagination:"ng-table/pager.html"},o.addClass("ng-table");var e=null,a=!1;n.forEach(o.children(),function(t){"THEAD"===t.tagName&&(a=!0)}),a||(e=n.element('<thead ng-include="templates.header"></thead>',r),o.prepend(e));var l=n.element('<div ng-table-pagination="params" template-url="templates.pagination"></div>',r);o.after(l),e&&s(e)(t),s(l)(t)}},this.loadFilterData=function(e){function a(t){return t&&"object"==typeof t&&"function"==typeof t.then}n.forEach(e,function(e){var l=e.filterData(t);return l?a(l)?(delete e.filterData,l.then(function(t){n.isArray(t)||n.isFunction(t)||n.isObject(t)||(t=[]),e.data=t})):e.data=l:void delete e.filterData})},this.buildColumns=function(e){var a=[];return(e||[]).forEach(function(e){a.push(c.buildColumn(e,t,a))}),a},this.parseNgTableDynamicExpr=function(t){if(!t||t.indexOf(" with ")>-1){var e=t.split(/\s+with\s+/);return{tableParams:e[0],columns:e[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(e){t.$watch(e,function(e){void 0!==e&&(t.params=e)},!1),p(),m()},b()}var n=a(0);l.$inject=["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","$document","ngTableColumn","ngTableEventsChannel"],e.ngTableController=l},function(t,e,a){"use strict";function l(){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var e;return n.forEach(t.find("tr"),function(t){t=n.element(t),t.hasClass("ng-table-group")||e||(e=t)}),e?(n.forEach(e.find("td"),function(t){var e=n.element(t),a=function(t){return e.attr("x-data-"+t)||e.attr("data-"+t)||e.attr(t)},l=a("title");l||e.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var s=e.attr("ng-if");s||e.attr("ng-if","$columns[$index].show(this)")}),function(t,e,a,l){var n=l.parseNgTableDynamicExpr(a.ngTableDynamic);l.setupBindingsToInternalScope(n.tableParams),l.compileDirectiveTemplates(),t.$watchCollection(n.columns,function(e){t.$columns=l.buildColumns(e),l.loadFilterData(t.$columns)})}):void 0}}}var n=a(0);l.$inject=[],e.ngTableDynamic=l},function(t,e,a){"use strict";function l(){function t(){e()}function e(){s=i}function a(t){var e=n.extend({},s,t);e.aliasUrls=n.extend({},s.aliasUrls,t.aliasUrls),s=e}function l(){function t(t,e){var a;return a="string"!=typeof t?t.id:t,-1!==a.indexOf("/")?a:l.getUrlForAlias(a,e)}function e(t,e){return s.aliasUrls[t]||s.defaultBaseUrl+t+s.defaultExt}var a,l={config:a,getTemplateUrl:t,getUrlForAlias:e};return Object.defineProperty(l,"config",{get:function(){return a=a||n.copy(s)},enumerable:!0}),l}var s,i={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};this.$get=l,this.resetConfigs=e,this.setConfig=a,t(),l.$inject=[]}var n=a(0);l.$inject=[],e.ngTableFilterConfigProvider=l},function(t,e,a){"use strict";function l(){var t={restrict:"E",replace:!0,templateUrl:n,scope:!0,controller:"ngTableFilterRowController"};return t}var n=a(24);l.$inject=[],e.ngTableFilterRow=l},function(t,e){"use strict";function a(t,e){t.config=e,t.getFilterCellCss=function(t,e){if("horizontal"!==e)return"s12";var a=Object.keys(t).length,l=parseInt((12/a).toString(),10);return"s"+l},t.getFilterPlaceholderValue=function(t,e){return"string"==typeof t?"":t.placeholder}}a.$inject=["$scope","ngTableFilterConfig"],e.ngTableFilterRowController=a},function(t,e,a){"use strict";function l(){var t={restrict:"E",replace:!0,templateUrl:n,scope:!0,controller:"ngTableGroupRowController",controllerAs:"dctrl"};return t}var n=a(29);l.$inject=[],e.ngTableGroupRow=l},function(t,e){"use strict";function a(t){function e(){t.getGroupables=s,t.getGroupTitle=n,t.getVisibleColumns=i,t.groupBy=o,t.isSelectedGroup=c,t.toggleDetail=u,t.$watch("params.group()",d,!0)}function a(){var e;e=t.params.hasGroup(t.$selGroup,"asc")?"desc":t.params.hasGroup(t.$selGroup,"desc")?"":"asc",t.params.group(t.$selGroup,e)}function l(e){return t.$columns.filter(function(a){return a.groupable(t)===e})[0]}function n(e){return r(e)?e.title:e.title(t)}function s(){var e=t.$columns.filter(function(e){return!!e.groupable(t)});return p.concat(e)}function i(){return t.$columns.filter(function(e){return e.show(t)})}function o(e){c(e)?a():r(e)?t.params.group(e):t.params.group(e.groupable(t))}function r(t){return"function"==typeof t}function c(e){return r(e)?e===t.$selGroup:e.groupable(t)===t.$selGroup}function d(e){var a=l(t.$selGroup);if(a&&a.show.assign&&a.show.assign(t,!0),r(e))p=[e],t.$selGroup=e,t.$selGroupTitle=e.title;else{var n=Object.keys(e||{})[0],s=l(n);s&&(t.$selGroupTitle=s.title(t),t.$selGroup=n,s.show.assign&&s.show.assign(t,!1))}}function u(){return t.params.settings().groupOptions.isExpanded=!t.params.settings().groupOptions.isExpanded,t.params.reload()}var p=[];e()}a.$inject=["$scope"],e.ngTableGroupRowController=a},function(t,e,a){"use strict";function l(t,e,a){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(l,s){a.onAfterReloadData(function(t){l.pages=t.generatePagesArray()},l,function(t){return t===l.params}),l.$watch("templateUrl",function(a){if(void 0!==a){var i=n.element('<div ng-include="templateUrl"></div>',e);s.append(i),t(i)(l)}})}}}var n=a(0);l.$inject=["$compile","$document","ngTableEventsChannel"],e.ngTablePagination=l},function(t,e){"use strict";function a(){var t={restrict:"A",controller:l};return t}function l(t,e,a,l){function n(){r=e(a.ngTableSelectFilterDs)(t),t.$watch(function(){return r&&r.data},s)}function s(){o(r).then(function(e){e&&!i(e)&&e.unshift({id:"",title:""}),e=e||[],t.$selectData=e})}function i(t){for(var e,a=0;a<t.length;a++){var l=t[a];if(l&&""===l.id){e=!0;break}}return e}function o(t){var e=t.data;return e instanceof Array?l.when(e):l.when(e&&e())}var r;n()}a.$inject=[],e.ngTableSelectFilterDs=a,l.$inject=["$scope","$parse","$attrs","$q"]},function(t,e,a){"use strict";function l(){var t={restrict:"E",replace:!0,templateUrl:n,scope:!0,controller:"ngTableSorterRowController"};return t}var n=a(32);l.$inject=[],e.ngTableSorterRow=l},function(t,e){"use strict";function a(t){function e(e,a){var l=e.sortable&&e.sortable();if(l&&"string"==typeof l){var n=t.params.settings().defaultSort,s="asc"===n?"desc":"asc",i=t.params.sorting()&&t.params.sorting()[l]&&t.params.sorting()[l]===n,o=a.ctrlKey||a.metaKey?t.params.sorting():{};o[l]=i?s:n,t.params.parameters({sorting:o})}}t.sortBy=e}a.$inject=["$scope"],e.ngTableSorterRowController=a},function(t,e){"use strict"},function(t,e,a){"use strict";var l=a(0),n=function(){function t(){function t(t){function a(a){var n=a.settings().filterOptions;return l.isFunction(n.filterFn)?n.filterFn:t(n.filterFilterName||e.filterFilterName)}function n(a){return t(e.sortingFilterName)}function s(t,e){if(!e.hasFilter())return t;var l=e.filter(!0),n=Object.keys(l),s=n.reduce(function(t,e){return t=c(t,l[e],e)},{}),i=a(e);return i.call(e,t,s,e.settings().filterOptions.filterComparator)}function i(t,e){var a=t.slice((e.page()-1)*e.count(),e.page()*e.count());return e.total(t.length),a}function o(t,e){var a=e.orderBy(),l=n(e);return a.length?l(t,a):t}function r(t,e){if(null==t)return[];var a=l.extend({},d,e.settings().dataOptions),n=a.applyFilter?s(t,e):t,r=a.applySort?o(n,e):n;return a.applyPaging?i(r,e):r}function c(t,e,a){var l=a.split("."),n=t,s=l[l.length-1],i=n,o=l.slice(0,l.length-1);return o.forEach(function(t){i.hasOwnProperty(t)||(i[t]={}),i=i[t]}),i[s]=e,n}var d={applyFilter:!0,applySort:!0,applyPaging:!0};return r.applyPaging=i,r.getFilterFn=a,r.getOrderByFn=n,r}this.filterFilterName="filter",this.sortingFilterName="orderBy";var e=this;this.$get=t,t.$inject=["$filter"]}return t}();e.ngTableDefaultGetDataProvider=n},function(t,e){"use strict";e.ngTableDefaults={params:{},settings:{}}},function(t,e,a){"use strict";function l(t){function e(t,e){var s=t.charAt(0).toUpperCase()+t.substring(1),i=(o={},o["on"+s]=a(t),o["publish"+s]=l(t),o);return n.extend(e,i);var o}function a(e){function a(t){return t?l(t)?t:function(e){return e===t}:function(t){return!0}}function l(t){return"function"==typeof t}function n(t){return t&&"function"==typeof t.$new}return function(l,s,i){var o,r=t;return n(s)?(r=s,o=a(i)):o=a(s),r.$on("ngTable:"+e,function(t,e){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(!e.isNullInstance){var s=[e].concat(a);o.apply(this,s)&&l.apply(this,s)}})}}function l(e){return function(){for(var a=[],l=0;l<arguments.length;l++)a[l-0]=arguments[l];t.$broadcast.apply(t,["ngTable:"+e].concat(a))}}var s={};return s=e("afterCreated",s),s=e("afterReloadData",s),s=e("datasetChanged",s),s=e("pagesChanged",s)}var n=a(0);l.$inject=["$rootScope"],e.ngTableEventsChannel=l},function(t,e,a){"use strict";function l(t,e,a,l,s,i){function o(a,o){function r(t){return!isNaN(parseFloat(t))&&isFinite(t)}function c(t){var e=S.groupOptions&&S.groupOptions.defaultSort;if(t){if(p(t))return null==t.sortDirection&&(t.sortDirection=e),t;if("object"==typeof t){for(var a in t)null==t[a]&&(t[a]=e);return t}return l={},l[t]=e,l}return t;var l}function d(t){var e=[];for(var a in t)e.push(("asc"===t[a]?"+":"-")+a);return e}function u(){var t=T.group;return{params:T,groupSortDirection:p(t)?t.sortDirection:void 0}}function p(t){return"function"==typeof t}function m(){var t=T.filter&&T.filter.$,e=b&&b.params.filter&&b.params.filter.$;return!n.equals(t,e)}function g(){S.filterOptions.filterDelay===x.filterDelay&&S.total<=S.filterOptions.filterDelayThreshold&&S.getData===D.getData&&(S.filterOptions.filterDelay=0)}function f(e){var a=S.interceptors||[];return a.reduce(function(e,a){var l=a.response&&a.response.bind(a)||t.when,n=a.responseError&&a.responseError.bind(a)||t.reject;return e.then(function(t){return l(t,w)},function(t){return n(t,w)})},e)}function v(){function e(t){return s(t.settings().dataset,t)}function a(e){var a,i=e.group(),o=void 0;if(p(i))a=i,o=i.sortDirection;else{var r=Object.keys(i)[0];o=i[r],a=function(t){return l(t,r)}}var c=e.settings(),u=c.dataOptions;c.dataOptions={applyPaging:!1};var m=c.getData,g=t.when(m(e));return g.then(function(t){var l={};n.forEach(t,function(t){var e=a(t);l[e]=l[e]||{data:[],$hideRows:!c.groupOptions.isExpanded,value:e},l[e].data.push(t)});var i=[];for(var r in l)i.push(l[r]);if(o){var u=s.getOrderByFn(),p=d({value:o});i=u(i,p)}return s.applyPaging(i,e)})["finally"](function(){c.dataOptions=u})}function l(t,e){var a;if(a="string"==typeof e?e.split("."):e,void 0!==t){if(0===a.length)return t;if(null!==t)return l(t[a[0]],a.slice(1))}}return{getData:e,getGroups:a}}"boolean"==typeof a&&(this.isNullInstance=!0);var b,h,w=this,y=!1,k=[],_=function(){for(var t=[],a=0;a<arguments.length;a++)t[a-0]=arguments[a];S.debugMode&&e.debug&&e.debug.apply(e,t)},x={filterComparator:void 0,filterDelay:500,filterDelayThreshold:1e4,filterFilterName:void 0,filterFn:void 0,filterLayout:"stack"},$={defaultSort:"asc",isExpanded:!0},D=v();this.data=[],this.parameters=function(t,e){if(e=e||!1,void 0!==typeof t){for(var a in t){var l=t[a];if(e&&a.indexOf("[")>=0){for(var s=a.split(/\[(.*)\]/).reverse(),i="",o=0,d=s.length;d>o;o++){var u=s[o];if(""!==u){var p=l;l={},l[i=u]=r(p)?parseFloat(p):p}}"sorting"===i&&(T[i]={}),T[i]=n.extend(T[i]||{},l[i])}else"group"===a?T[a]=c(t[a]):T[a]=r(t[a])?parseFloat(t[a]):t[a]}return _("ngTable: set parameters",T),this}return T},this.settings=function(t){if(n.isDefined(t)){t.filterOptions&&(t.filterOptions=n.extend({},S.filterOptions,t.filterOptions)),t.groupOptions&&(t.groupOptions=n.extend({},S.groupOptions,t.groupOptions)),n.isArray(t.dataset)&&(t.total=t.dataset.length);var e=S.dataset;S=n.extend(S,t),n.isArray(t.dataset)&&g();var a=t.hasOwnProperty("dataset")&&t.dataset!=e;if(a){y&&this.page(1),y=!1;var l=function(){i.publishDatasetChanged(w,t.dataset,e)};k?k.push(l):l()}return _("ngTable: set settings",S),this}return S},this.page=function(t){return void 0!==t?this.parameters({page:t}):T.page},this.total=function(t){return void 0!==t?this.settings({total:t}):S.total},this.count=function(t){return void 0!==t?this.parameters({count:t,page:1}):T.count},this.filter=function(t){if(null!=t&&"object"==typeof t)return this.parameters({filter:t,page:1});if(t===!0){for(var e=Object.keys(T.filter),a={},l=0;l<e.length;l++){var n=T.filter[e[l]];null!=n&&""!==n&&(a[e[l]]=n)}return a}return T.filter},this.group=function(t,e){if(void 0===t)return T.group;var a={page:1};return p(t)&&void 0!==e?(t.sortDirection=e,a.group=t):"string"==typeof t&&void 0!==e?a.group=(l={},l[t]=e,l):a.group=t,this.parameters(a),this;var l},this.sorting=function(t,e){return"string"==typeof t&&void 0!==e?(this.parameters({sorting:(a={},a[t]=e,a)}),this):void 0!==t?this.parameters({sorting:t}):T.sorting;var a},this.isSortBy=function(t,e){return void 0!==e?void 0!==T.sorting[t]&&T.sorting[t]==e:void 0!==T.sorting[t]},this.orderBy=function(){return d(T.sorting)},this.generatePagesArray=function(t,e,a,l){arguments.length||(t=this.page(),e=this.total(),a=this.count());var n,s,i,o;l=l&&6>l?6:l;var r=[];if(o=Math.ceil(e/a),o>1){r.push({type:"prev",number:Math.max(1,t-1),active:t>1}),r.push({type:"first",number:1,active:t>1,current:1===t}),s=Math.round((S.paginationMaxBlocks-S.paginationMinBlocks)/2),i=Math.max(2,t-s),n=Math.min(o-1,t+2*s-(t-i)),i=Math.max(2,i-(2*s-(n-i)));for(var c=i;n>=c;)c===i&&2!==c||c===n&&c!==o-1?r.push({type:"more",active:!1}):r.push({type:"page",number:c,active:t!==c,current:t===c}),c++;r.push({type:"last",number:o,active:t!==o,current:t===o}),r.push({type:"next",number:Math.min(o,t+1),active:o>t})}return r},this.isDataReloadRequired=function(){return!y||!n.equals(u(),b)||m()},this.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},this.hasGroup=function(t,e){return null==t?p(T.group)||Object.keys(T.group).length>0:p(t)?null==e?T.group===t:T.group===t&&t.sortDirection===e:null==e?-1!==Object.keys(T.group).indexOf(t):T.group[t]===e},this.hasFilterChanges=function(){var t=b&&b.params.filter;return!n.equals(T.filter,t)||m()},this.url=function(t){function e(t,e){a(s)?s.push(e+"="+encodeURIComponent(t)):s[e]=encodeURIComponent(t)}function a(e){return t}function l(t,e){return"group"===e||void 0!==typeof t&&""!==t}t=t||!1;var s=t?[]:{};for(var i in T)if(T.hasOwnProperty(i)){var o=T[i],r=encodeURIComponent(i);if("object"==typeof o){for(var c in o)if(l(o[c],i)){var d=r+"["+encodeURIComponent(c)+"]";e(o[c],d)}}else!n.isFunction(o)&&l(o,i)&&e(o,r)}return s},this.reload=function(){var e=this,a=null;if(S.$loading=!0,b=n.copy(u()),y=!0,e.hasGroup())a=f(t.when(S.getGroups(e)));else{var l=S.getData;a=f(t.when(l(e)))}_("ngTable: reload data");var s=e.data;return a.then(function(t){return S.$loading=!1,h=null,e.data=t,i.publishAfterReloadData(e,t,s),e.reloadPages(),t})["catch"](function(e){return h=b,t.reject(e)})},this.hasErrorState=function(){return!(!h||!n.equals(h,u()))},this.reloadPages=function(){var t;return function(){var e=t,a=w.generatePagesArray(w.page(),w.total(),w.count());n.equals(e,a)||(t=a,i.publishPagesChanged(this,a,e))}}();var T={page:1,count:10,filter:{},sorting:{},group:{}};n.extend(T,l.params);var S={$loading:!1,dataset:null,total:0,defaultSort:"desc",filterOptions:n.copy(x),groupOptions:n.copy($),counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"};return this.settings(D),this.settings(l.settings),this.settings(o),this.parameters(a,!0),i.publishAfterCreated(this),n.forEach(k,function(t){t()}),k=null,this}return o}var n=a(0);l.$inject=["$q","$log","$filter","ngTableDefaults","ngTableDefaultGetData","ngTableEventsChannel"],e.ngTableParamsFactory=l},18,function(t,e,a){var l="ng-table/filterRow.html",n='<tr ng-show=show_filter class=ng-table-filters> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if=$column.show(this) class="filter {{$column.class(this)}}" ng-class="params.settings().filterOptions.filterLayout === \'horizontal\' ? \'filter-horizontal\' : \'\'"> <div ng-repeat="(name, filter) in $column.filter(this)" ng-include=config.getTemplateUrl(filter) class=filter-cell ng-class="[getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"> </div> </th> </tr> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/filters/number.html",n='<input type=number name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/filters/select-multiple.html",n='<select ng-options="data.id as data.title for data in $column.data" ng-disabled=$filterRow.disabled multiple=multiple ng-multiple=true ng-model=params.filter()[name] class="filter filter-select-multiple form-control" name={{name}}> </select> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/filters/select.html",n='<select ng-options="data.id as data.title for data in $selectData" ng-table-select-filter-ds=$column ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="filter filter-select form-control" name={{name}}> <option style=display:none value=""></option> </select> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/filters/text.html",n='<input type=text name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/groupRow.html",n='<tr ng-if=params.hasGroup() ng-show=$groupRow.show class=ng-table-group-header> <th colspan={{getVisibleColumns().length}} class=sortable ng-class="{\n                    \'sort-asc\': params.hasGroup($selGroup, \'asc\'),\n                    \'sort-desc\':params.hasGroup($selGroup, \'desc\')\n                  }"> <a href="" ng-click="isSelectorOpen = !isSelectorOpen" class=ng-table-group-selector> <strong class=sort-indicator>{{$selGroupTitle}}</strong> <button class="btn btn-default btn-xs ng-table-group-close" ng-click="$groupRow.show = false; $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon glyphicon-remove"></span> </button> <button class="btn btn-default btn-xs ng-table-group-toggle" ng-click="toggleDetail(); $event.preventDefault(); $event.stopPropagation();"> <span class=glyphicon ng-class="{\n                    \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded,\n                    \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded\n                }"></span> </button> </a> <div class=list-group ng-if=isSelectorOpen> <a href="" class=list-group-item ng-repeat="group in getGroupables()" ng-click=groupBy(group)> <strong>{{ getGroupTitle(group)}}</strong> <strong ng-class="isSelectedGroup(group) && \'sort-indicator\'"></strong> </a> </div> </th> </tr> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/header.html",n="<ng-table-group-row></ng-table-group-row> <ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> ",s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/pager.html",n='<div class="ng-cloak ng-table-pager" ng-if=params.data.length> <div ng-if=params.settings().counts.length class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type=button ng-class="{\'active\':params.count() == count}" ng-click=params.count(count) class="btn btn-default"> <span ng-bind=count></span> </button> </div> <ul ng-if=pages.length class="pagination ng-table-pagination"> <li class=page-item ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch=page.type> <a class=page-link ng-switch-when=prev ng-click=params.page(page.number) href="">&laquo;</a> <a class=page-link ng-switch-when=first ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=page ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=more ng-click=params.page(page.number) href="">&#8230;</a> <a class=page-link ng-switch-when=last ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=next ng-click=params.page(page.number) href="">&raquo;</a> </li> </ul> </div> ',s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){var l="ng-table/sorterRow.html",n="<tr class=ng-table-sort-header> <th title={{$column.headerTitle(this)}} ng-repeat=\"$column in $columns\" ng-class=\"{\n                    'sortable': $column.sortable(this),\n                    'sort-asc': params.sorting()[$column.sortable(this)]=='asc',\n                    'sort-desc': params.sorting()[$column.sortable(this)]=='desc'\n                  }\" ng-click=\"sortBy($column, $event)\" ng-if=$column.show(this) ng-init=\"template = $column.headerTemplateURL(this)\" class=\"header {{$column.class(this)}}\"> <div ng-if=!template class=ng-table-header ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'div'}\"> <span ng-bind=$column.title(this) ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'span'}\"></span> </div> <div ng-if=template ng-include=template></div> </th> </tr> ",s=a(0);s.module("ng").run(["$templateCache",function(t){t.put(l,n)}]),t.exports=l},function(t,e,a){"use strict";function l(t){for(var a in t)e.hasOwnProperty(a)||(e[a]=t[a])}var n=a(0),s=a(2),i=a(1),o=n.module("ngTable",[s["default"].name,i["default"].name]);e.ngTable=o,l(a(2)),l(a(1))}]))}),function(t){"use strict";var e=function(e){var a=t.Deferred(),l=new FileReader;return l.onload=function(t){a.resolve(t.target.result)},l.onerror=a.reject,l.onprogress=a.notify,l.readAsDataURL(e),a.promise()};t.fn.cleanHtml=function(){var e=t(this).html();return e&&e.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},t.fn.wysiwyg=function(a){var l,n,s,i=this,o=function(){n.activeToolbarClass&&t(n.toolbarSelector).find(s).each(function(){var e=t(this).data(n.commandRole);document.queryCommandState(e)?t(this).addClass(n.activeToolbarClass):t(this).removeClass(n.activeToolbarClass)})},r=function(t,e){var a=t.split(" "),l=a.shift(),n=a.join(" ")+(e||"");document.execCommand(l,0,n),o()},c=function(){var t=window.getSelection();return t.getRangeAt&&t.rangeCount?t.getRangeAt(0):void 0},d=function(){l=c()},u=function(){var t=window.getSelection();if(l){try{t.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}t.addRange(l)}},p=function(a){i.focus(),t.each(a,function(a,l){/^image\//.test(l.type)?t.when(e(l)).done(function(t){r("insertimage",t)}).fail(function(t){n.fileUploadError("file-reader",t)}):n.fileUploadError("unsupported-file-type",l.type)})},m=function(t,e){u(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,e||"transparent"),d(),t.data(n.selectionMarker,e)},g=function(e,a){e.find(s).click(function(){u(),i.focus(),r(t(this).data(a.commandRole)),d()}),e.find("[data-toggle=dropdown]").click(u),e.find("input[type=text][data-"+a.commandRole+"]").on("webkitspeechchange change",function(){var e=this.value;this.value="",u(),e&&(i.focus(),r(t(this).data(a.commandRole),e)),d()}).on("focus",function(){var e=t(this);e.data(a.selectionMarker)||(m(e,a.selectionColor),e.focus())}).on("blur",function(){var e=t(this);e.data(a.selectionMarker)&&m(e,!1)}),e.find("input[type=file][data-"+a.commandRole+"]").change(function(){u(),"file"===this.type&&this.files&&this.files.length>0&&p(this.files),d(),this.value=""})},f=function(){i.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&e.files.length>0&&p(e.files)})};return n=t.extend({},t.fn.wysiwyg.defaults,a),s="a[data-"+n.commandRole+"],button[data-"+n.commandRole+"],input[type=button][data-"+n.commandRole+"]",n.dragAndDropImages&&f(),g(t(n.toolbarSelector),n),i.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){d(),o()}),t(window).bind("touchend",function(t){var e=i.is(t.target)||i.has(t.target).length>0,a=c(),l=a&&a.startContainer===a.endContainer&&a.startOffset===a.endOffset;(!l||e)&&(d(),o())}),this},t.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright",
"ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(t,e){console.log("File upload error",t,e)}}}(window.jQuery),/*! nanoScrollerJS - v0.8.7 - 2015
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2015 James Florentino; Licensed MIT */
function(t){return"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,a){"use strict";var l,n,s,i,o,r,c,d,u,p,m,g,f,v,b,h,w,y,k,_,x,$,D,T,S,C,F,M,j,E,B;D={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",enabledClass:"has-scrollbar",flashedClass:"flashed",activeClass:"active",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},y="scrollbar",w="scroll",u="mousedown",p="mouseenter",m="mousemove",f="mousewheel",g="mouseup",h="resize",o="drag",r="enter",_="up",b="panedown",s="DOMMouseScroll",i="down",x="wheel",c="keydown",d="keyup",k="touchmove",l="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,n=null,F=e.requestAnimationFrame,$=e.cancelAnimationFrame,j=a.createElement("div").style,B=function(){var t,e,a,l,n,s;for(l=["t","webkitT","MozT","msT","OT"],t=n=0,s=l.length;s>n;t=++n)if(a=l[t],e=l[t]+"ransform",e in j)return l[t].substr(0,l[t].length-1);return!1}(),E=function(t){return B===!1?!1:""===B?t:B+t.charAt(0).toUpperCase()+t.substr(1)},M=E("transform"),S=M!==!1,T=function(){var t,e,l;return t=a.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=w,e.top="-9999px",a.body.appendChild(t),l=t.offsetWidth-t.clientWidth,a.body.removeChild(t),l},C=function(){var t,a,l;return a=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(a))?(l=/Firefox\/\d{2}\./.exec(a),l&&(l=l[0].replace(/\D+/g,"")),t&&+l>23):!1},v=function(){function c(l,s){this.el=l,this.options=s,n||(n=T()),this.$el=t(this.el),this.doc=t(this.options.documentContext||a),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===s)(e===i&&t.originalEvent.detail>0||e===_&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===f){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===i&&t.originalEvent.wheelDelta<0||e===_&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;S?(t={},t[M]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},F?($&&this.scrollRAF&&$(this.scrollRAF),this.scrollRAF=F(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass(t.options.activeClass),t.doc.bind(m,t.events[o]).bind(g,t.events[_]),t.body.bind(p,t.events[r]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(e){return t.isBeingDragged=!1,t.pane.removeClass(t.options.activeClass),t.doc.unbind(m,t.events[o]).unbind(g,t.events[_]),t.body.unbind(p,t.events[r]),!1}}(this),resize:function(t){return function(e){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,i),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,_),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var a;if(null!=e)return a=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,a&&(t.sliderY+=-a/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var a;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(a=t.events)[_].apply(a,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(h,t[h]),this.iOSNativeScrolling||(this.slider.bind(u,t[i]),this.pane.bind(u,t[b]).bind(""+f+" "+s,t[x])),this.$content.bind(""+w+" "+f+" "+s+" "+k,t[w])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(h,t[h]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+f+" "+s+" "+k,t[w])},c.prototype.generate=function(){var t,a,l,s,i,o,r;return s=this.options,o=s.paneClass,r=s.sliderClass,t=s.contentClass,(i=this.$el.children("."+o)).length||i.children("."+r).length||this.$el.append('<div class="'+o+'"><div class="'+r+'" /></div>'),this.pane=this.$el.children("."+o),this.slider=this.pane.find("."+r),0===n&&C()?(l=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),a={right:-14,paddingRight:+l+14}):n&&(a={right:-n},this.$el.addClass(s.enabledClass)),null!=a&&this.$content.css(a),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,a,s,i,o,r,c,d,u,p,m;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,s=t.style,i=s.overflowY,l&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+n,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),r=this.pane.outerHeight(!1),d=parseInt(this.pane.css("top"),10),o=parseInt(this.pane.css("bottom"),10),c=r+d+o,m=Math.round(c/e*r),m<this.options.sliderMinHeight?m=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&m>this.options.sliderMaxHeight&&(m=this.options.sliderMaxHeight),i===w&&s.overflowX!==w&&(m+=n),this.maxSliderTop=c-m,this.contentHeight=e,this.paneHeight=r,this.paneOuterHeight=c,this.sliderHeight=m,this.paneTop=d,this.slider.height(m),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&i!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&i===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),a=this.$content.css("position"),("static"===a||"relative"===a)&&(p=parseInt(this.$content.css("right"),10),p&&this.$content.css({right:"",marginRight:p})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(f),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(f),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return $&&this.scrollRAF&&($(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),l&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass(this.options.enabledClass)&&(this.$el.removeClass(this.options.enabledClass),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass(this.options.flashedClass),setTimeout(function(t){return function(){t.pane.removeClass(t.options.flashedClass)}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var a,l;if((l=this.nanoscroller)||(a=t.extend({},D,e),this.nanoscroller=l=new v(this,a)),e&&"object"==typeof e){if(t.extend(l.options,e),null!=e.scrollBottom)return l.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return l.scrollTop(e.scrollTop);if(e.scrollTo)return l.scrollTo(e.scrollTo);if("bottom"===e.scroll)return l.scrollBottom(0);if("top"===e.scroll)return l.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return l.scrollTo(e.scroll);if(e.stop)return l.stop();if(e.destroy)return l.destroy();if(e.flash)return l.flash()}return l.reset()})},t.fn.nanoScroller.Constructor=v}),function(){"use strict";angular.module("cmdb",["ngCookies","ngSanitize","ngWebSocket","ui.router","ui.bootstrap","toastr","ngTable","perfect_scrollbar","angular-loading-bar","pascalprecht.translate","JSONedit","angularFileUpload","angularMoment"])}(),function(){"use strict";function t(){var t=function(t,e,a){var l={category:"category",type:"type",item:"item",workgroup:"group",group_user:"group_user"};if(t&&e&&a){var n=t;return angular.forEach(l,function(l,s){s==e&&angular.forEach(a[l],function(a){return a.id==t?"workgroup"==e?void(n=a.group_name):"group_user"==e?void(n=a.email):void(n=a.name):void 0})}),"<nil>"==n?"":n}};return t}angular.module("cmdb").filter("historyColumnMap",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o){if(!t.params.id||12!=t.params.id.length)return void t.go("home.e404");var r=this,c=l.swal;r.no=t.params.id,r.isUpdating=!1,r.uploader=new i({alias:"upload",removeAfterUpload:!0}),r.uploader.filters.push({name:"sizeFilter",fn:function(t){return t.size<=5242880}}),r.uploader.onCompleteItem=function(t,e,a){200!=a?o.error("update error.("+a+")"):200!=e.code?o.error(e.data+"("+e.code+")"):(o.success(e.data),r.init())},r.del_attachment=function(t){c({title:"Delete Confirm?",text:"确认删除?("+t.name+")",type:"question",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/attachment/"+r.ticket.id+"/"+t.uuid).success(function(t){200==t.code&&(c("Success","删除成功","success"),r.init())})})["catch"](c.noop)},r.group_arr_to_map=function(){r.group_map={};var t=[];angular.copy(r.baseData.group,t),angular.forEach(t,function(t){r.group_map[t.id]=t})},r.initItemGroup=function(){r.group_arr_to_map();var t={};angular.copy(r.group_map,t),r.item_groups=[],angular.forEach(r.baseData.item_group_map,function(e){e.item_id==r.ticket.item&&(r.group_map[e.group_id].priority="*",r.item_groups.push(r.group_map[e.group_id]),delete t[e.group_id])}),angular.forEach(r.baseData.group,function(e){e.id in t&&r.item_groups.push(e)})},r.item_change=function(){r.initItemGroup()},r.group_change=function(){delete r.ticket.group_user},r.download=function(t){var e="/api/tt/attachment/download/"+r.ticket.id+"/"+t;l.open(e)},r.submit=function(){return angular.equals(r.ticket,r.oldTicket)?void o.warning("Nothing to update."):"resolved"!=r.ticket.status||""!=r.ticket.root_cause&&""!=r.ticket.solution?void c({title:"Update Confirm?",text:"确认更新?("+r.ticket.no+")",type:"question",showCancelButton:!0}).then(function(){r.isUpdating=!0,a.put("/api/tt/ticket/"+r.ticket.id,r.ticket).success(function(t){200==t.code&&(o.success(t.data),r.init()),r.isUpdating=!1})})["catch"](c.noop):(o.warning("事件状态解决，必须填写解决方案和根本原因<br>Root cause & Solution is required when status is 'Resolved'","",{timeOut:5e3}),void(r.tabActive=2))},r.getReplylog=function(t){a.get("/api/tt/common/replylog/"+t).success(function(t){r.replylog=t.data})},r.addReplylog=function(){""!=r.newReplylog&&"undefined"!=r.newReplylog&&a.post("/api/tt/common/replylog",{ticket_id:r.ticket.id,content:r.newReplylog}).success(function(t){o.success(t.data),r.init(),r.newReplylog=""})},r.getWorklog=function(t){a.get("/api/tt/common/worklog/"+t).success(function(t){r.worklog=t.data})},r.addWorklog=function(){""!=r.newWorklog&&"undefined"!=r.newWorklog&&a.post("/api/tt/common/worklog",{ticket_id:r.ticket.id,content:r.newWorklog}).success(function(t){o.success(t.data),r.init(),r.newWorklog=""})},r.getSyslog=function(t){a.get("/api/tt/common/syslog/"+t).success(function(t){r.syslog=t.data})},r.getStatusFlow=function(t){a.get("/api/tt/status_flow/"+t).success(function(t){r.status_flow=t.data})},r.changeStatus=function(){"resolved"==r.ticket.status&&(r.tabActive=2)},r.init=function(){r.isUpdating=!0,a.get("/api/tt/ticket/"+r.no).success(function(a){404==a.code&&t.go("home.e404"),200==a.code&&(r.ticket=a.data,r.oldTicket={},angular.copy(a.data,r.oldTicket),r.uploader.url="/api/tt/attachment/upload/"+r.ticket.id,r.uploader.queueLimit=5-r.ticket.attachment.length,r.isUpdating=!1,e.debug(r.ticket),n.getData().then(function(t){r.baseData=t,r.initItemGroup()}),r.getSyslog(r.ticket.id),r.getReplylog(r.ticket.id),r.getWorklog(r.ticket.id),r.getStatusFlow(r.ticket.id))})},r.init()}t.$inject=["$state","$log","$http","$window","baseService","oauserService","FileUploader","toastr"],angular.module("cmdb").controller("TTShowController",t)}(),function(){"use strict";function t(t,e,a,l,n){var s=this;a.getData().then(function(t){s.baseData=t}),s.search=function(){return s.tickets=[],angular.equals(s.tableFilter,{})?void n.error("ERR (NULL)"):(null===s.tableFilter.create_start&&delete s.tableFilter.create_start,null===s.tableFilter.create_end&&delete s.tableFilter.create_end,s.tableFilter.create_end&&s.tableFilter.create_start&&s.tableFilter.create_start>s.tableFilter.create_end?void n.error("ERR (Time Wrong!)"):(s.searched=!0,s.loading=!0,void e.post("/api/tt/search/list/",s.tableFilter).success(function(t){200==t.code&&(s.tickets=t.data,s.tableParams=new l({count:25},{counts:[],dataset:s.tickets})),s.loading=!1})))},s.resetFilter=function(){s.tableFilter={}},s.resetFilter()}t.$inject=["$state","$http","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("TTSearchController",t)}(),function(){"use strict";function t(t,e,a,l,n,s){var i=this;i.ticket=n,i.uploader=s,i.tstatus="loading",i.astatus="loading",i.uploader.onCompleteAll=function(){i.astatus="complete",i.redirect()},a.post("/api/tt/ticket",n).success(function(t){if(200==t.code){i.newTT=t.data+"";var e="0000000000",a=e.substring(0,10-i.newTT.length)+i.newTT;i.newTTNo="TT"+a,i.tstatus="success",i.uploader.queue.length>0?(angular.forEach(i.uploader.queue,function(t){t.url="/api/tt/attachment/upload/"+i.newTT}),i.uploader.uploadAll()):(i.astatus="complete",i.redirect())}else i.tstatus="error"}),i.go=function(t){l.close(),e.go(t)},i.cancel=function(){l.close()},i.timeSec=3,i.redirect=function(){t(function(){i.timeSec-=1,0==i.timeSec&&(i.cancel(),e.go("home.tt.show",{id:i.newTTNo}))},1e3,3)}}t.$inject=["$interval","$state","$http","$uibModalInstance","ticket","uploader"],angular.module("cmdb").controller("TTSubmitController",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o){var r=this,c=l.swal;r.ticket={impact:5},r.cti_search_w="",r.item_groups=[],r.uploader=new o({queueLimit:5,alias:"upload"}),r.uploader.filters.push({name:"sizeFilter",fn:function(t){return t.size<=5242880}}),s.getData().then(function(t){e.debug("base:",t),r.baseData=t,r.item_groups=r.baseData.group}),i.getData().then(function(t){r.ticket.submit_user=t.email,r.ticket.apply_user=t.email}),r.group_arr_to_map=function(){r.group_map={};var t=[];angular.copy(r.baseData.group,t),angular.forEach(t,function(t){r.group_map[t.id]=t})},r.item_change=function(){r.group_arr_to_map();var t={};angular.copy(r.group_map,t),r.item_groups=[],angular.forEach(r.baseData.item_group_map,function(e){e.item_id==r.ticket.item&&(r.group_map[e.group_id].priority="*",r.item_groups.push(r.group_map[e.group_id]),delete t[e.group_id])}),angular.forEach(r.baseData.group,function(e){e.id in t&&r.item_groups.push(e)}),r.item_groups.length>0&&(r.ticket.workgroup=r.item_groups[0].id),(!r.ticket.title&&!r.ticket.content||"<br>"==r.ticket.content&&!r.ticket.title)&&a.get("/api/tt/base/item/"+r.ticket.item).success(function(t){1==t.data.length&&(r.ticket.title=t.data[0].tpl_title,r.ticket.content=t.data[0].tpl_content)})},r.group_change=function(){delete r.ticket.group_user},r.cti_search=function(){""!=r.cti_search_w.trim()&&n.open({templateUrl:"app/pages/tt/new/cti_search.html",controller:"CtiSearchController",controllerAs:"ctisearch",backdrop:"static",keyboard:!1,bindToController:!0,animation:!1,resolve:{cti_search_w:function(){return r.cti_search_w},baseData:function(){return r.baseData},cti_select:function(){return r.cti_select}}}),r.cti_search_w=""},r.cti_select=function(t,e,a){r.ticket.category=t,r.ticket.type=e,r.ticket.item=a,0!=a&&r.item_change()},r.submit=function(){c({title:"Submit Confirm?",text:"确认提交?",type:"question",showCancelButton:!0}).then(function(){n.open({templateUrl:"app/pages/tt/new/submit.html",controller:"TTSubmitController",controllerAs:"ttsubmit",backdrop:"static",keyboard:!1,bindToController:!0,size:"lg",animation:!1,resolve:{ticket:function(){return r.ticket},uploader:function(){return r.uploader}}})})["catch"](c.noop)}}t.$inject=["$state","$log","$http","$window","$uibModal","baseService","oauserService","FileUploader"],angular.module("cmdb").controller("TTNewController",t)}(),function(){"use strict";function t(t,e,a,l){var n=this;n.search_w=e.toLowerCase(),n.baseData=a,n.s_c=[],n.s_t=[],n.s_i=[],angular.forEach(n.baseData.item,function(t){-1!==t.name.toLowerCase().indexOf(n.search_w)&&(n.s_i.push(t),angular.forEach(n.baseData.type,function(e){if(e.id==t.type_id){angular.forEach(n.baseData.category,function(t){if(t.id==e.category_id){var a=angular.copy(t);return a.hide=1,void n.s_c.push(a)}});var a=angular.copy(e);return a.hide=1,void n.s_t.push(a)}}))}),angular.forEach(n.baseData.type,function(t){-1!==t.name.toLowerCase().indexOf(n.search_w)&&(n.s_t.push(t),angular.forEach(n.baseData.category,function(e){if(e.id==t.category_id){var a=angular.copy(e);return a.hide=1,void n.s_c.push(a)}}))}),angular.forEach(n.baseData.category,function(t){if(-1!==t.name.toLowerCase().indexOf(n.search_w)){var e=angular.copy(t);n.s_c.push(e)}}),n.select_c=function(t){l(t.id,0,0)},n.select_t=function(t){angular.forEach(n.baseData.category,function(e){return e.id==t.category_id?void l(e.id,t.id,0):void 0})},n.select_i=function(t){angular.forEach(n.baseData.type,function(e){e.id==t.type_id&&angular.forEach(n.baseData.category,function(a){return a.id==e.category_id?void l(a.id,e.id,t.id):void 0})})},n.cancel=function(){t.close()}}t.$inject=["$uibModalInstance","cti_search_w","baseData","cti_select"],angular.module("cmdb").controller("CtiSearchController",t)}(),function(){"use strict";function t(t,e,a,l,n){var s={assignme:"me_not_finish",selfsubmit:"self_submit_not_finish",emaillistme:"email_me_not_finish",level12:"level_12",myticket:"myticket",menulist:"mygroup_not_finish"},i=t.params.mod,o=this;l.getData().then(function(t){o.baseData=t,e.debug("base",o.baseData)}),o.init=function(){i in s?(o.presetMod=s[i],o.loading=!0,a.get("/api/tt/search/index/"+i).success(function(e){if(o.tickets=e.data,"menulist"==i){var a=t.params.g;void 0!=a?(o.tickets=e.data.group[a],o.groupname=a):(o.tickets=[],angular.forEach(e.data.group,function(t){angular.forEach(t,function(t){o.tickets.push(t)})}))}o.tableParams=new n({count:25},{counts:[],dataset:o.tickets}),o.loading=!1})):t.go("home.e404")},o.init(),o.tableReload=function(a){e.debug(t.params.mod),a&&a.target.blur(),o.init()}}t.$inject=["$state","$log","$http","baseService","NgTableParams"],angular.module("cmdb").controller("TTListController",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o,r){var c=this,d=a.swal;r.getData().then(function(e){return e?void 0:void t.go("home.e403")}),s.getData().then(function(t){c.basedata=t,c.init()}),c.init=function(){delete c.currentGroup,delete c.newGroup,delete c.newUser,angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),l.get("/api/tt/base/group_item_user_rel").success(function(t){e.debug("groups:",t),200==t.code&&(c.groups=t.data,c.workgroupTable=new i({count:10},{counts:[],dataset:c.groups}),c.showTab=!0),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},c.reload=function(t){t&&t.target.blur(),c.init()},c.updateGroup=function(){d({title:"Update",html:"Group <br>"+c.currentGroup.group_name,type:"question",showCancelButton:!0}).then(function(){var t=c.currentGroup.work_hour_start.split(":"),e=60*t[0]+1*t[1],a=c.currentGroup.work_hour_end.split(":"),l=60*a[0]+1*a[1];c.currentGroup.work_hour_start=e,c.currentGroup.work_hour_end=l,n.update("base/group/"+c.currentGroup.id,c.currentGroup).then(function(){c.reload()})})},c.delGroup=function(t){d({title:"Delete Confirm?",html:"确认删除?<br>"+t.group_name,type:"warning",showCancelButton:!0}).then(function(){l["delete"]("/api/tt/base/group/"+t.id).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})["catch"](d.noop)},c.addGroup=function(){d({title:"Add",html:"Group <br>"+c.newGroup.group_name,type:"question",showCancelButton:!0}).then(function(){var t=c.newGroup.work_hour_start.split(":"),e=60*t[0]+1*t[1],a=c.newGroup.work_hour_end.split(":"),n=60*a[0]+1*a[1];c.newGroup.work_hour_start=e,c.newGroup.work_hour_end=n,l.post("/api/tt/base/group",c.newGroup).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})["catch"](d.noop)},c.openAddForm=function(){c.newGroup={},delete c.currentGroup,delete c.newUser},c.openEditForm=function(t){c.currentGroup=t;var e=c.currentGroup.work_hour_start,a=c.currentGroup.work_hour_end;c.currentGroup.work_hour_start=Math.floor(e/60)+":"+e%60,c.currentGroup.work_hour_end=Math.floor(a/60)+":"+a%60,delete c.newGroup,delete c.newUser},c.cancelForm=function(){delete c.currentGroup,delete c.newGroup,delete c.newUser},c.openAddUserForm=function(t){c.newUser={group_id:t.id},delete c.currentGroup,delete c.newGroup},c.addUser=function(){d({title:"Add User",text:c.newUser.email,type:"question",showCancelButton:!0}).then(function(){l.post("/api/tt/base/group_user",c.newUser).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})["catch"](d.noop)},c.delUser=function(t){d({title:"Delete User",text:t.email,type:"warning",showCancelButton:!0}).then(function(){l["delete"]("/api/tt/base/group_user/"+t.id).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})["catch"](d.noop)},c.disableUser=function(t){var e=1==t.disabled?"Enable User ?":"Disable User",a={};angular.copy(t,a),0==a.disabled?a.disabled=1:a.disabled=0,d({title:e,text:t.email,type:"warning",showCancelButton:!0}).then(function(){l.post("/api/tt/search/list/open_ticket_for_user",{id:t.id,group_id:t.group_id}).success(function(e){return 1==a.disabled&&e.data.length>0?void o.warning("该用户有未关闭的单子！"):void l.put("/api/tt/base/group_user/"+t.id,a).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})})["catch"](d.noop)}}t.$inject=["$state","$log","$window","$http","putService","baseService","NgTableParams","toastr","adminService"],angular.module("cmdb").controller("WorkgroupController",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i){var o=this;i.getData().then(function(t){return t?void 0:void e.go("home.e403")}),n.getData().then(function(t){o.basedata=t,o.tableInit(),o.showTab=!0}),o.tableInit=function(){o.impactTable=new s({count:10},{counts:[],dataset:o.basedata.impact})},o.tableReload=function(t){t&&t.target.blur(),angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),n.getData(1).then(function(t){o.basedata=t,o.tableInit(),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},o.updateImpact=function(t){l.update("base/impact/"+t.id,t).then(function(){o.tableReload()})}}t.$inject=["$log","$state","$http","putService","baseService","NgTableParams","adminService"],angular.module("cmdb").controller("ImpactController",t)}(),function(){"use strict";function t(t,e){return function(a){var l,n=t.defer();return e.getData().then(function(t){var e=0;angular.forEach(t,function(s,i){s.langkey==a.key&&(l=angular.fromJson(s.data),e=1,n.resolve(l)),0==e&&i==t.length-1&&(l=angular.fromJson(s.data),n.resolve(l))})}),n.promise}}function e(t,e){var a={returnedData:[],getData:function(l){var n=t.defer();return""==a.returnedData||l?e.getData("common/i18n").then(function(t){angular.copy(t,a.returnedData),n.resolve(t)}):n.resolve(a.returnedData),n.promise}};return a}t.$inject=["$q","langService"],e.$inject=["$q","getService"],angular.module("cmdb").factory("langAsyncLoader",t),angular.module("cmdb").service("langService",e)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o){var r=this;o.getData().then(function(e){return e?void 0:void t.go("home.e403")}),r.langData={},r.langInit=function(){angular.element(".loading-container").removeClass("hide"),s.getData().then(function(t){r.langData=t,angular.forEach(r.langData,function(t){t.jsonData=angular.fromJson(t.data),t.wellFormed=!0}),n(function(){r.showTab=!0},0),angular.element(".loading-container").addClass("hide")})},r.langInit(),r.parseJson=function(t,e){try{t.jsonData=angular.fromJson(e),t.wellFormed=!0}catch(a){t.wellFormed=!1}},r.unparseJson=function(t,e){t.jsonString=a("json")(e)},r.save=function(t,e){l.put("/api/tt/common/i18n/"+t,{data:angular.toJson(e)}).success(function(t){200==t.code&&i.success(t.data)})}}t.$inject=["$state","$window","$filter","$http","$timeout","langService","toastr","adminService"],angular.module("cmdb").controller("I18nController",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o,r){var c=this,d=l.swal;r.getData().then(function(e){return e?void 0:void t.go("home.e403")}),c.init=function(){delete c.currenttpl,delete c.newtpl,angular.element(".loading-container").removeClass("hide"),angular.element(".table").addClass("hide"),n.get("/api/tt/base/email_templates/").success(function(t){200==t.code&&(c.tpls=t.data,c.tplsTable=new i({count:10},{counts:[],dataset:c.tpls}),c.showTab=!0),angular.element(".loading-container").addClass("hide"),angular.element(".table").removeClass("hide")})},c.reload=function(t){t&&t.target.blur(),c.init()},c.init(),c.openAddForm=function(){c.newtpl={},delete c.currenttpl,e(function(){angular.element(".editor").wysiwyg()})},c.openEditForm=function(t){c.currenttpl=t,delete c.newtpl,e(function(){angular.element(".editor").wysiwyg()})},c.cancelForm=function(){delete c.currenttpl,delete c.newtpl},c.addTpl=function(){d({title:"Add Template",text:c.newtpl.name,type:"question",showCancelButton:!0}).then(function(){n.post("/api/tt/base/email_templates",c.newtpl).success(function(t){200==t.code&&(o.success(t.data),c.reload())})})["catch"](d.noop)},c.updateTpl=function(){d({title:"Update",html:"Template <br>"+c.currenttpl.name,type:"question",showCancelButton:!0}).then(function(){s.update("base/email_templates/"+c.currenttpl.id,c.currenttpl).then(function(){c.reload()})})["catch"](d.noop)}}t.$inject=["$state","$timeout","$log","$window","$http","putService","NgTableParams","toastr","adminService"],angular.module("cmdb").controller("EmailtplController",t)}(),function(){"use strict";function t(){var t={restrict:"A",require:"?ngModel",link:function(t,e,a,l){function n(){var t=e.html();a.stripBr&&"<br>"==t&&(t=""),l.$setViewValue(t)}l&&(l.$render=function(){e.html(l.$viewValue||"")},e.on("blur keyup change",function(){t.$apply(n)}))}};return t}angular.module("cmdb").directive("contenteditable",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i){var o=this,r=l.swal;i.getData().then(function(t){return t?void 0:void e.go("home.e403")}),s.getData().then(function(t){o.basedata=t,o.init(),o.showTab=!0,o.addGroupOptions={},angular.forEach(o.basedata.group,function(t){o.addGroupOptions[t.id]=t.group_name})}),o.init=function(){o.currentItem={},o.currentType={},o.newItem={},a.get("/api/tt/base/cti_tree_map").success(function(t){o.cti_tree=t.data})},o.reload=function(t){t&&t.target.blur(),angular.element(".loading-container").removeClass("hide"),angular.element(".cti-tree").addClass("hide"),s.getData(1).then(function(t){o.basedata=t,o.init(),angular.element(".loading-container").addClass("hide"),angular.element(".cti-tree").removeClass("hide")})},o.addCategory=function(){r({title:"Add",text:"Category",input:"text",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(t){var e={name:t};a.post("/api/tt/base/category",e).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.addType=function(t){r({title:"Add",html:"Type <br>[Category: "+t.name+" ]",input:"text",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(e){var l={category_id:t.id,name:e};a.post("/api/tt/base/type",l).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.updateSwal=function(t,e){var l={};angular.copy(t,l),r({title:"Update",text:l.name,input:"text",inputPlaceholder:t.name,showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}).then(function(s){l.name=s,a.put("/api/tt/"+e+t.id,l).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.delSwal=function(t,e,l){r({title:"Delete Confirm?",html:"确认删除?<br>"+e,type:"warning",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/"+l+t.id).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.editItem=function(t){angular.copy(t,o.currentItem),o.currentType={}},o.updateItem=function(){angular.equals(o.currentItem,{})||r({title:"Submit Confirm?",text:"确认修改?",type:"question",showCancelButton:!0}).then(function(){a.put("/api/tt/base/item/"+o.currentItem.id,o.currentItem).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.addItem=function(t){angular.copy(t,o.currentType),o.newItem={type_id:t.id},o.currentItem={}},o.addItemSwal=function(){r({title:"Add Confirm?",html:"确认添加?<br>"+o.newItem.name,type:"question",showCancelButton:!0}).then(function(){a.post("/api/tt/base/item",o.newItem).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.cancelItem=function(){o.newItem={},
o.currentType={},o.currentItem={}},o.addGroup=function(){var t=[{title:"Select a WorkGroup",input:"select",inputOptions:o.addGroupOptions,inputPlaceholder:"WorkGroup",showCancelButton:!0,allowOutsideClick:!1,inputValidator:function(t){return new Promise(function(e,a){""==t?a("Can not be NULL"):e()})}},{title:"WorkGroup Priority",text:"input priority",input:"number",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})},allowOutsideClick:!1}];r.queue(t).then(function(t){var e=1*t[0],l=1*t[1],s={item_id:o.currentItem.id,group_id:e,priority:l};a.post("/api/tt/base/item_group_map",s).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)},o.delGroup=function(t){r({title:"Add Confirm?",text:"确认解除?",type:"warning",showCancelButton:!0}).then(function(){a["delete"]("/api/tt/base/item_group_map/"+t.id).success(function(t){200==t.code&&(n.success(t.data),o.reload())})})["catch"](r.noop)}}t.$inject=["$log","$state","$http","$window","toastr","baseService","adminService"],angular.module("cmdb").controller("CtiController",t)}(),function(){"use strict";function t(t,e,a,l,n,s,i,o,r){var c=this,d=a.swal;c.updateGroup=function(t){d({title:"Update",html:t.group_name,type:"question",showCancelButton:!0}).then(function(){var e=t.work_hour_start.split(":"),a=60*e[0]+1*e[1],l=t.work_hour_end.split(":"),n=60*l[0]+1*l[1];t.work_hour_start=a,t.work_hour_end=n,o.update("base/group/"+t.id,t).then(function(){c.init()})})["catch"](d.noop)},c.addUser=function(t){var e=[{title:"User Email",input:"email",showCancelButton:!0,allowOutsideClick:!1},{title:"Priority",text:"input priority",input:"number",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:!1,preConfirm:function(t){return new Promise(function(e,a){""==t&&a("can not be null"),e()})}}];d.queue(e).then(function(e){var a=e[0],l=1*e[1],s={group_id:t.id,email:a,priority:l};n.post("/api/tt/base/group_user",s).success(function(t){200==t.code&&(i.success(t.data),c.init())})})["catch"](d.noop)},c.deleteUser=function(t){d({title:"Delete User",text:t.email,type:"warning",showCancelButton:!0}).then(function(){n["delete"]("/api/tt/base/group_user/"+t.id).success(function(t){200==t.code&&(i.success(t.data),c.init())})})["catch"](d.noop)},c.updateUser=function(t){d({title:"Update User",text:t.email,type:"question",showCancelButton:!0}).then(function(){n.put("/api/tt/base/group_user/"+t.id,t).success(function(t){200==t.code&&(i.success(t.data),c.init())})})["catch"](d.noop)},c.init=function(){c.groups=[],c.newUser={},n.get("/api/tt/base/group/").success(function(e){200==e.code&&(c.basegroup=e.data,t.debug("group:",c.basegroup),r.getData().then(function(t){c.oauser=t,angular.forEach(c.basegroup,function(t){var e=t.work_hour_start,a=t.work_hour_end;t.work_hour_start=Math.floor(e/60)+":"+e%60,t.work_hour_end=Math.floor(a/60)+":"+a%60,t.admin_email==c.oauser.email&&c.groups.push(t)})}))})},c.init(),c.disableUser=function(t){var e=1==t.disabled?"Enable User ?":"Disable User",a={};angular.copy(t,a),0==a.disabled?a.disabled=1:a.disabled=0,d({title:e,text:t.email,type:"warning",showCancelButton:!0}).then(function(){n.post("/api/tt/search/list/open_ticket_for_user",{group_user:t.email}).success(function(e){return 1==a.disabled&&e.data.length>0?void i.warning("该用户有未关闭的单子！"):void n.put("/api/tt/base/group_user/"+t.id,a).success(function(t){200==t.code&&(i.success(t.data),c.init())})})})["catch"](d.noop)}}t.$inject=["$log","$state","$window","$filter","$http","$timeout","toastr","putService","oauserService"],angular.module("cmdb").controller("MyGroupController",t)}(),function(){"use strict";function t(t,e,a,l,n){var s=this;a.getData().then(function(t){s.baseData=t}),s.tableFilter={};var i=new Date,o=new Date;o.setDate(o.getDate()-30),s.tableFilter={start:o,end:i},s.report=function(){return angular.equals(s.tableFilter,{})?void n.error("ERR (NULL)"):s.tableFilter.end&&s.tableFilter.start&&s.tableFilter.start>s.tableFilter.end?void n.error("ERR (Time Wrong!)"):(s.loading=!0,void e.post("/api/tt/report/kanban",s.tableFilter).success(function(t){200==t.code&&(s.data=t.data,s.tables={},angular.forEach(s.data,function(t,e){if("group_user"===e)for(var a=0;a<s.baseData.group_user.length;a++)for(var n=0;n<t.length;n++)s.baseData.group_user[a].id==t[n].id&&(t[n].user=s.baseData.group_user[a].email,s.tables[e]=new l({count:30,sorting:{submit_number:"desc"}},{counts:[],dataset:t}));else s.tables[e]=new l({count:30,sorting:{submit_number:"desc"}},{counts:[],dataset:t})})),s.loading=!1}))},s.report()}t.$inject=["$state","$http","baseService","NgTableParams","toastr"],angular.module("cmdb").controller("TTReportController",t)}(),function(){"use strict";function t(){}angular.module("cmdb").controller("MainTTController",t)}(),function(){"use strict";function t(){var t={main:"/",login:"/api/connector/connectorx/sso/loginredirect",chpasswd:"/api/connector/connectorx/sso/chpasswdredirect",logout:"#"};return t}function e(t,e){var a={returnedData:{},getData:function(l){var n=t.defer();return angular.equals({},a.returnedData)||l?e.get("/api/connector/connectorx/sso/userinfo").success(function(t){angular.copy(t,a.returnedData),n.resolve(t)}):n.resolve(a.returnedData),n.promise}};return a}function a(t,e){var a={returnedData:{},getData:function(l){var n=t.defer();return angular.equals({},a.returnedData)||l?e.get("/api/connector/connectorx/sso/userinfo").success(function(t){var e=!1;"1"==t.admin&&(e=!0),angular.copy(e,a.returnedData),n.resolve(e)}):n.resolve(a.returnedData),n.promise}};return a}e.$inject=["$q","$http"],a.$inject=["$q","$http"],angular.module("cmdb").factory("ssoService",t),angular.module("cmdb").factory("oauserService",e),angular.module("cmdb").factory("adminService",a)}(),function(){"use strict";function t(){function t(t,e,a,l,n,s,i,o){var r=this;r.currentMenu=l.get("c3menu"),r.showMenu=function(){angular.element("body").removeClass("sb-l-m"),l.put("c3menu","none"),r.currentMenu=l.get("c3menu"),angular.element("#sidebar_left").nanoScroller({preventPageScrolling:!0}),angular.element(".nano-pane").css("display","block")},r.hideMenu=function(){angular.element("body").addClass("sb-l-m"),l.put("c3menu","sb-l-m"),r.currentMenu=l.get("c3menu"),angular.element("#sidebar_left").nanoScroller({destroy:!0}),angular.element(".nano-pane").css("display","none")},r.toggleMenu=function(){"sb-l-m"!=r.currentMenu?r.hideMenu():r.showMenu()},"sb-l-m"!=r.currentMenu?r.showMenu():r.hideMenu(),s.getData().then(function(t){r.langData=t}),r.changeLang=function(t){e.use(t),r.currentLang=e.proposedLanguage()||e.use()},r.logout=function(){var t=n.location.protocol+"//"+n.location.host;a.get("/api/connector/connectorx/ssologout?siteaddr="+t).success(function(t){t.data?n.location.href=t.data:n.location.reload()})},o.getData().then(function(t){r.user=t})}t.$inject=["$rootScope","$translate","$http","$cookies","$window","langService","ssoService","oauserService"];var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{},controller:t,controllerAs:"nav"};return e}angular.module("cmdb").directive("c3navbar",t)}(),function(){"use strict";function t(){function t(t,e){var a=this;a.states=t,e.getData().then(function(t){t&&(a.isAdmin=!0)})}t.$inject=["$state","adminService"];var e={restrict:"E",templateUrl:"app/components/menu/menu.html",scope:{},controller:t,controllerAs:"menu"};return e}angular.module("cmdb").directive("c3menu",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"app/components/loading/loading.html"};return t}angular.module("cmdb").directive("cmloading",t)}(),function(){"use strict";function t(){function t(){var t=this;t.year=(new Date).getFullYear()}var e={restrict:"E",templateUrl:"app/components/footer/footer.html",scope:{},controller:t,controllerAs:"footer"};return e}angular.module("cmdb").directive("c3footer",t)}(),function(){"use strict";function t(){function t(t){t.submit=function(){var e=[];angular.forEach(t.data,function(t){e.push(t.no)}),t.ids=e.toLocaleString()}}t.$inject=["scope"];var e={link:t,restrict:"E",templateUrl:"app/components/download/download.html",scope:{data:"="}};return e}angular.module("cmdb").directive("c3download",t)}(),function(){"use strict";function t(){var t=function(t,e,a,l){if(t&&a&&e){var n="",s=!1;return angular.forEach(e,function(e,i){return i==a?(angular.forEach(e,function(e){return e.id==t?(n=void 0!=l?e[l]:e.name,!1):void 0}),s=!0,!1):s?!1:void 0}),n}};return t}function e(){var t=function(t,e,a){var l=t.split(e);return l[a]};return t}function a(){var t=function(t){return Math.floor(t+0)};return t}angular.module("cmdb").filter("baseDataMap",t),angular.module("cmdb").filter("splitStr",e),angular.module("cmdb").filter("floor",a)}(),function(){"use strict";function t(){return{restrict:"A",link:function(t,e,a){e.bind("click",function(){e.toggleClass(a.toggleClass)})}}}function e(){return{restrict:"A",link:function(t,e,a){e.bind("click",function(){e.parent().toggleClass(a.toggleClass)})}}}function a(){return{restrict:"A",link:function(t,e,a){e.bind("hover",function(){e.toggleClass(a.toggleClass)})}}}function l(){return{restrict:"A",link:function(t,e){e.bind("click",function(){var t=!1;t=e.next().hasClass("hide")?!1:!0,t?e.next().addClass("hide"):e.next().removeClass("hide")})}}}function n(){return{require:"ngModel",link:function(t,e,a,l){l.$parsers.push(function(t){return parseInt(t,10)}),l.$formatters.push(function(t){return void 0!=t?""+t:""})}}}angular.module("cmdb").directive("toggleClass",t),angular.module("cmdb").directive("toggleParentClass",e),angular.module("cmdb").directive("toggleHover",a),angular.module("cmdb").directive("toggleNext",l),angular.module("cmdb").directive("convertToNumber",n)}(),function(){"use strict";function t(){function t(t,e){if("home"==t.current.name){var a=this;e.get("/api/tt/search/index/menulist").success(function(t){a.menulist=t.data}),e.get("/api/tt/search/index/assignme").success(function(t){a.assignme=t.data}),e.get("/api/tt/search/index/selfsubmit").success(function(t){a.selfsubmit=t.data}),e.get("/api/tt/search/index/emaillistme").success(function(t){a.emaillistme=t.data}),e.get("/api/tt/search/index/level12").success(function(t){a.level12=t.data})}}t.$inject=["$state","$http"];var e={restrict:"E",templateUrl:"app/components/c3index/c3index.html",scope:{},controller:t,controllerAs:"c3index"};return e}angular.module("cmdb").directive("c3index",t)}(),function(){"use strict";function t(t,e,a){var l={add:function(l,n,s){s=void 0==s?1:0;var i=e.defer();return angular.equals({},n)?s&&a.warning("nothing to add!"):t.post("/api/tt/"+l,n).success(function(t){200==t.code&&(s&&a.success(t.data),i.resolve(t))}),i.promise}};return l}function e(t,e,a){var l={del:function(l,n){var s=e.defer();return n>0?t["delete"]("/api/tt/"+l+"/"+n).success(function(t){200==t.code&&(a.success(t.data),s.resolve(t))}):a.warning("nothing to delete!"),s.promise}};return l}function a(t,e,a){var l={update:function(l,n){var s=e.defer();return angular.equals({},n)?a.warning("nothing to update!"):t.put("/api/tt/"+l,n).success(function(t){200==t.code&&(a.success(t.data),s.resolve(t))}),s.promise}};return l}function l(t,e){var a={getData:function(a,l,n){var s=t.defer(),i="/api/tt/"+a;return l&&n&&(i+="/"+l+"/"+n),e.get(i).success(function(t){s.resolve(t.data)}),s.promise}};return a}t.$inject=["$http","$q","toastr"],e.$inject=["$http","$q","toastr"],a.$inject=["$http","$q","toastr"],l.$inject=["$q","$http"],angular.module("cmdb").service("postService",t),angular.module("cmdb").service("delService",e),angular.module("cmdb").service("putService",a),angular.module("cmdb").service("getService",l)}(),function(){"use strict";function t(t,e){var a={returnedData:{},getData:function(l){var n=t.defer();return angular.equals({},a.returnedData)||l?e.get("/api/tt/base/all").success(function(t){angular.copy(t.data,a.returnedData),n.resolve(t.data)}):n.resolve(a.returnedData),n.promise}};return a}t.$inject=["$q","$http"],angular.module("cmdb").factory("baseService",t)}(),function(){"use strict";function t(t,e,a,l,n){var s={response:function(t){var a=a||l.get("toastr");if(t.config.url.match(/^\/api.*$/)&&t.data&&t.data.hasOwnProperty("code")){if(1e4==t.data.code){var s=e.location.href,i=e.location.protocol+"//"+e.location.host;return e.location.href=n.login+"?siteaddr="+i+"&callback="+s,null}200!=t.data.code&&a.error(t.data.data+" ("+t.data.code+")")}return t},responseError:function(e){if(e.status>=500)return a.path("error/500"),t.reject(e);var n=n||l.get("toastr");return n.error(e.statusText+" ("+e.status+")"),t.reject(e)}};return s}t.$inject=["$q","$window","$location","$injector","ssoService"],angular.module("cmdb").factory("authInterceptor",t)}(),function(){"use strict";function t(t,e,a,l,n){a.back=function(){l.go("home")},angular.element(".scroller").css("height",n.innerHeight-50),angular.element(n).bind("resize",function(){angular.element(".scroller").css("height",n.innerHeight-50)}),a.resizeMenu=function(){angular.element(".scroller").css("height",n.innerHeight-50)}}t.$inject=["$document","$log","$rootScope","$state","$window"],angular.module("cmdb").controller("MainController",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("cmdb").run(t)}(),function(){"use strict";function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.ttIndex",{url:"ttIndex",templateUrl:"app/main/tt/main.html",controller:"MainTTController",controllerAs:"mainTT"}).state("home.tt",{url:"tt/","abstract":!0,templateUrl:"app/pages/tt/tt.html"}).state("home.tt.new",{url:"new",templateUrl:"app/pages/tt/new/new.html",controller:"TTNewController",controllerAs:"ttnew"}).state("home.tt.show",{url:"show/:id",templateUrl:"app/pages/tt/show/show.html",controller:"TTShowController",controllerAs:"ttshow"}).state("home.tt.search",{url:"search",templateUrl:"app/pages/tt/search/search.html",controller:"TTSearchController",controllerAs:"ttsearch"}).state("home.tt.list",{url:"list?mod&g",templateUrl:"app/pages/tt/list/list.html",controller:"TTListController",controllerAs:"ttlist"}).state("home.group_manage",{url:"group_manage/","abstract":!0,templateUrl:"app/pages/group_manage/group_manage.html"}).state("home.group_manage.my_group",{url:"my_group",templateUrl:"app/pages/group_manage/my_group/my_group.html",controller:"MyGroupController",controllerAs:"mygroup"}).state("home.report",{url:"report/","abstract":!0,templateUrl:"app/pages/report/report.html"}).state("home.report.workgroup",{url:"workgroup",templateUrl:"app/pages/report/workgroup/workgroup.html",controller:"TTReportController",controllerAs:"report"}).state("home.report.cti",{url:"cti",templateUrl:"app/pages/report/cti/cti.html",controller:"TTReportController",controllerAs:"report"}).state("home.report.user",{url:"user",templateUrl:"app/pages/report/user/user.html",controller:"TTReportController",controllerAs:"report"}).state("home.system",{url:"system/","abstract":!0,templateUrl:"app/pages/system/system.html"}).state("home.system.i18n",{url:"i18n",templateUrl:"app/pages/system/i18n/i18n.html",controller:"I18nController",controllerAs:"i18n"}).state("home.system.impact",{url:"impact",templateUrl:"app/pages/system/impact/impact.html",controller:"ImpactController",controllerAs:"impact"}).state("home.system.cti",{url:"cti",templateUrl:"app/pages/system/cti/cti.html",controller:"CtiController",controllerAs:"cti"}).state("home.system.workgroup",{url:"workgroup",templateUrl:"app/pages/system/workgroup/workgroup.html",controller:"WorkgroupController",controllerAs:"workgroup"}).state("home.system.email_tpl",{url:"email_tpl",templateUrl:"app/pages/system/email_tpl/email_tpl.html",controller:"EmailtplController",controllerAs:"emailtpl"}).state("home.e401",{url:"error/401",templateUrl:"app/pages/others/401.html"}).state("home.e403",{url:"error/403",templateUrl:"app/pages/others/403.html"}).state("home.e404",{url:"error/404",templateUrl:"app/pages/others/404.html"}).state("home.e500",{url:"error/500",templateUrl:"app/pages/others/500.html"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("cmdb").config(t)}(),function(){"use strict";angular.module("cmdb").constant("env","debug")}(),function(){"use strict";function t(t,e,a,l,n){"debug"==n?t.debugEnabled(!0):t.debugEnabled(!1),a.interceptors.push("authInterceptor"),e.useCookieStorage().useLoader("langAsyncLoader").useSanitizeValueStrategy("escape").fallbackLanguage("zh_CN").registerAvailableLanguageKeys(["en","zh_CN"],{"en_*":"en","zh_*":"zh_CN"}).determinePreferredLanguage(),l.allowHtml=!0,l.timeOut=3e3,l.positionClass="toast-top-right",l.progressBar=!0}t.$inject=["$logProvider","$translateProvider","$httpProvider","toastrConfig","env"],angular.module("cmdb").config(t)}(),angular.module("cmdb").run(["$templateCache",function(t){t.put("app/main/main.html","<div><c3navbar></c3navbar><c3menu></c3menu><div id=content_wrapper><div ui-view><c3index></c3index></div></div><c3footer></c3footer></div>"),t.put("app/main/tt/main.html",'<div class=row><div class=col-md-12><div class=widget><div class="widget-content themed-background text-light-op"><strong></strong></div></div></div></div>'),t.put("app/pages/group_manage/group_manage.html","<div ui-view></div>"),t.put("app/pages/others/401.html",'<div id=error-container class=text-center><h1>401</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/403.html",'<div id=error-container class=text-center><h1>403</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/404.html",'<div id=error-container class=text-center><h1>404</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/others/500.html",'<div id=error-container class=text-center><h1>500</h1><button class="btn btn-default" ng-click=back()><i class="fa fa-arrow-left"></i> Go back</button></div>'),t.put("app/pages/report/report.html","<div ui-view></div>"),t.put("app/pages/system/system.html","<div ui-view></div>"),t.put("app/pages/tt/tt.html","<div ui-view></div>"),t.put("app/components/c3index/c3index.html",'<div class="page-content animated fadeIn"><div class=block><div class=row><div class=col-md-3><div class="panel panel-primary"><div class=panel-body><ul class=toggle-menu><li class=open style=margin-bottom:15px><a href=javascript:void(0) class=submenu><i class="fa fa-angle-right"></i> <span translate=S.Submenu.quick_search></span></a><ul><li><a href=javascript:void(0) ui-sref="home.tt.list({mod:\'assignme\'})"><span translate=S.Submenu.me_not_finish></span>&nbsp;[{{c3index.assignme.length}}]</a></li><li><a href=javascript:void(0) ui-sref="home.tt.list({mod:\'selfsubmit\'})"><span translate=S.Submenu.self_submit_not_finish></span>&nbsp;[{{c3index.selfsubmit.length}}]</a></li><li><a href=javascript:void(0) ui-sref="home.tt.list({mod:\'emaillistme\'})"><span translate=S.Submenu.email_me_not_finish></span>&nbsp;[{{c3index.emaillistme.length}}]</a></li><li><a href=javascript:void(0) ui-sref="home.tt.list({mod:\'level12\'})"><span translate=S.Submenu.level_12></span>&nbsp;[{{c3index.level12.length}}]</a></li><li><a href=javascript:void(0) ui-sref="home.tt.list({mod:\'myticket\'})"><span translate=S.Submenu.myticket></span></a></li></ul></li><li class=open style=margin-bottom:15px><a href=javascript:void(0) class=submenu><i class="fa fa-angle-right"></i> <span translate=S.Submenu.mygroup_not_finish ui-sref="home.tt.list({mod:\'menulist\'})"></span></a><ul><li ng-repeat="(g,tickets) in c3index.menulist.group track by $index"><a href=javascript:void(0) class=submenu><span ui-sref="home.tt.list({mod:\'menulist\',g:g})">{{g}} [{{tickets.length}}]</span></a></li></ul></li><li class=open style=margin-bottom:15px><a href=javascript:void(0) class=submenu><i class="fa fa-angle-right"></i> <span translate=S.Submenu.me_not_finish ui-sref="home.tt.list({mod:\'assignme\'})"></span>&nbsp;[{{c3index.menulist.me.length}}]</a><ul><li ng-repeat="t in c3index.menulist.me track by $index"><a href=javascript:void(0) target=_blank ui-sref=home.tt.show({id:t.no}) ng-class="{\'text-danger\':t.response_timeout || t.resolve_timeout }">{{t.no}}</a></li></ul></li></ul></div></div></div><div class=col-md-9><h2 class=mt5>Trouble Ticketing System</h2><blockquote class="blockquote-info blockquote-thin"><ul class=pn><ul class="mn fs16"><li class=mb5>一致事件处理流程与一致沟通方式的平台</li><li class=mb5>汇报运维问题的便捷程序</li><li class=mb5>大型（严重）运维事件跟踪的有效工具</li><li class=mb5>运维监控报警系统的有效衔接</li></ul></ul></blockquote><hr class=alt><div class="text-center p20 ptn"><button class="btn btn-system br4 p20 fs16 m10" ui-sref=home.tt.new translate=S.Menu.create_tt></button> <button class="btn btn-info br4 p20 fs16 m10" ui-sref=home.tt.search translate=S.Menu.search_tt></button></div></div></div></div></div>'),t.put("app/components/download/download.html",'<form id=dl_form style=display:inline-block action=/api/tt/search/export method=post ng-submit=submit() target=_blank><input name=ids ng-model=ids ng-show=0> <button class="btn btn-primary"><i class="fa fa-download"></i></button></form>'),t.put("app/components/footer/footer.html","<div id=footer><small><span>OPEN-C3 © 2022</span></small></div>"),t.put("app/components/loading/loading.html","<div class=loading-container><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div>"),t.put("app/components/menu/menu.html",'<div id=sidebar_left class="affix nano nano-primary"><div class="sidebar-left-content nano-content has-scrollbar"><ul class="nav sidebar-menu"><li ng-class="{active: menu.states.is(\'home\')}"><a ui-sref=home class=ripple><span class="fa fa-compass"></span> <span class=sidebar-title translate=S.Menu.dashboard></span></a></li><!-- 事件 --><li ng-class="{active: menu.states.includes(\'home.tt\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.tt\')}"><span class="fa fa-ticket"></span> <span class=sidebar-title translate=S.Menu.tt></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.new\')}"><a href ui-sref=home.tt.new translate=S.Menu.create_tt></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.tt.search\')}"><a href ui-sref=home.tt.search translate=S.Menu.search_tt></a></li></ul></li><!-- 组管理 --><li ng-class="{active: menu.states.includes(\'home.group_manage\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.group_manage\')}"><span class="fa fa-users"></span> <span class=sidebar-title translate=S.Menu.group_manage></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.group_manage.my_group\')}"><a href ui-sref=home.group_manage.my_group translate=S.Menu.my_group></a></li></ul></li><!-- 报表 --><li ng-class="{active: menu.states.includes(\'home.report\')}"><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.report\')}"><span class="fa fa-table"></span> <span class=sidebar-title>报表</span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.report.workgroup\')}"><a href ui-sref=home.report.workgroup>工作组看板</a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.report.cti\')}"><a href ui-sref=home.report.cti>CTI看板</a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.report.user\')}"><a href ui-sref=home.report.user>User看板</a></li></ul></li><!-- 系统设置 --><li ng-class="{active: menu.states.includes(\'home.system\')}" ng-if=menu.isAdmin><a href=javascript:void(0) class=ripple toggle-class=menu-open ng-class="{\'menu-open\': menu.states.includes(\'home.system\')}"><span class="fa fa-cog"></span> <span class=sidebar-title translate=S.Menu.console></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple ng-class="{active: menu.states.includes(\'home.system.i18n\')}"><a ui-sref=home.system.i18n translate=S.Menu.i18n_setting></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.impact\')}"><a ui-sref=home.system.impact translate=S.Menu.impact></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.cti\')}"><a ui-sref=home.system.cti translate=S.Menu.cti></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.workgroup\')}"><a ui-sref=home.system.workgroup translate=S.Menu.workgroup></a></li><li class=ripple ng-class="{active: menu.states.includes(\'home.system.email_tpl\')}"><a ui-sref=home.system.email_tpl translate=S.Menu.email_tpl></a></li></ul></li><!-- 帮助 --><li><a href=javascript:void(0) class=ripple toggle-class=menu-open><span class="fa fa-file-text-o"></span> <span class=sidebar-title translate=S.Menu.system_doc></span> <span class=caret></span></a><ul class="nav sub-nav animated slideInLeft animated-shorter"><li class=ripple><a href=https://open-c3.github.io target=_blank translate=S.Menu.user_manual></a></li></ul></li></ul></div></div>'),t.put("app/components/navbar/navbar.html",'<header class="navbar navbar-fixed-top bg-danger"><div class="navbar-branding bg-openc3-dark"><a class=navbar-brand ui-sref=home><img src=/assets/images/ticket.png> <span translate=S.Index.title></span> </a><span id=toggle_sidemenu_l ng-click=nav.toggleMenu()><i ng-if="nav.currentMenu==\'sb-l-m\'" class="fa fa-bars fa-fw animated fadeInRight"></i> <i ng-if="nav.currentMenu==\'none\'" class="fa fa-ellipsis-v animated fadeInLeft fa-fw"></i></span></div><ul class="nav navbar-nav navbar-right"><li><a ui-sref=home.tt.search class=ripple><i class="fa fa-search fa-lg"></i></a></li><li class=dropdown uib-dropdown><a class="dropdown-toggle ripple" href=javascript:void(0) uib-dropdown-toggle><i class="fa fa-language fa-lg"></i></a><ul class="dropdown-menu pv5 animated animated-short flipInX" uib-dropdown-menu><li ng-repeat="lang in nav.langData"><a href=javascript:void(0); ng-click=nav.changeLang(lang.langkey)><span class="fa fa-language mr10"></span>{{ lang.lang }}</a></li></ul></li><li class="menu-divider hidden-xs"><i class="fa fa-circle"></i></li><li class=dropdown uib-dropdown><a href=javascript:void(0) class="dropdown-toggle fw600 p15 lh30 ripple" uib-dropdown-toggle><span>{{ nav.user.name }}</span> <span class="caret caret-tp hidden-xs"></span></a><ul class="dropdown-menu list-group dropdown-persist w250" uib-dropdown-menu><li class="dropdown-header clearfix"><div class="pull-left ml10">{{ nav.user.email }}</div></li><li class=list-group-item><a href=javascript:void(0) class="animated animated-short fadeInUp" ng-click=nav.logout()><span class="fa fa-power-off"></span><span translate=S.Index.logout></span></a></li></ul></li></ul></header>'),t.put("app/pages/group_manage/my_group/my_group.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.my_group></li></ol></div></div><div class=block><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><uib-tabset><uib-tab ng-repeat="group in mygroup.groups" heading={{group.group_name}}><fieldset><legend>{{group.group_name}}</legend><form class="form-horizontal row" onsubmit="return false" name=addForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=group.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=group.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=group.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=group.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=group.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=group.level5_report></div></div><div class="form-group form-actions text-center"><div class="col-md-8 col-md-offset-2"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.update ng-click=mygroup.updateGroup(group)></button></div></div></form></fieldset><fieldset><legend>Users &nbsp; <button class="btn btn-primary" translate=S.Index.add ng-click=mygroup.addUser(group)></button></legend><table class="table text-center"><thead><tr><th class=text-center>No.</th><th class=text-center>Email</th><th class=text-center>Priority</th><th class=text-center>#</th></tr></thead><tbody><tr ng-repeat="u in group.users track by $index"><td>{{$index+1}}</td><td><input type=email class=form-control ng-model=u.email></td><td><input type=number class=form-control ng-model=u.priority></td><td><div class=btn-group><button class="btn btn-primary" translate=S.Index.update ng-click=mygroup.updateUser(u)></button> <button class="btn btn-danger" translate=S.Index.delete ng-click=mygroup.deleteUser(u)></button> <button class="btn btn-primary" ng-if="u.disabled==1" ng-click=mygroup.disableUser(u)>启用</button> <button class="btn btn-warning" ng-if="u.disabled==0" ng-click=mygroup.disableUser(u)>禁用</button></div></td></tr></tbody></table></fieldset></uib-tab></uib-tabset></div>'),t.put("app/pages/report/cti/cti.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>CTI看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.cti class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'#\'"><b ng-if="v.id==\'0\'">全部</b> <b ng-repeat="i in report.baseData.item" ng-if="i.id == v.id"><b ng-repeat="t in report.baseData.type" ng-if="t.id == i.type_id"><b ng-repeat="c in report.baseData.category" ng-if="t.category_id == c.id">{{c.name}} - </b>{{t.name}} - </b>{{i.name}}</b></td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),
t.put("app/pages/report/user/user.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>User看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.group_user class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'user\'" filter="{ user: \'text\'}">{{v.user}}</td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),t.put("app/pages/report/workgroup/workgroup.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16>报表</li><li>工作组看板</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Report</li></ol></div></div><div class=block><div class="panel panel-dark"><div class=panel-body><form class=form-inline><div class=row><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.start is-open=report.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-4"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=report.tableFilter.end is-open=report.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="report.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class=col-md-1><button class="btn btn-block btn-primary" ng-click=report.report()><i class="fa fa-search fa-fw"></i></button></div></div></form></div></div></div><div class=block><div class="panel panel-primary"><div class=panel-heading><span class=panel-title><b>{{report.tableFilter.start | date:"yyyy-MM-dd"}} 00:00:00</b> To <b>{{report.tableFilter.end | date:"yyyy-MM-dd"}} 23:59:59</b></span></div><div class=panel-body><cmloading ng-if=report.loading></cmloading><div class=table-scroll ng-if=!report.loading><table ng-table=report.tables.workgroup class="table table-hover text-center table-condensed va-m"><tr ng-repeat="v in $data"><td data-title="\'#\'"><b ng-if="v.id==\'0\'">全部</b> <b ng-if="v.id!=0">{{v.id | baseDataMap:report.baseData:\'group\':\'group_name\' }}</b></td><td data-title="\'提交数量\'" sortable>{{v.submit_number}}</td><td data-title="\'解决数量\'">{{v.resolve_number}}</td><td data-title="\'响应超时数量\'">{{v.response_timeout_number}}</td><td data-title="\'解决超时数量\'">{{v.resolve_timeout_number}}</td><td data-title="\'解决率\'">{{v.resolve_rate}}</td><td data-title="\'响应超时率\'">{{v.response_timeout_rate}}</td><td data-title="\'解决超时率\'">{{v.resolve_timeout_rate}}</td><td data-title="\'一次解决率\'">{{v.one_time_resolve_rate}}</td><td data-title="\'平均响应时间\'">{{v.mean_response_time/3600 | floor}}h {{v.mean_response_time % 3600 / 60 | floor}}m {{v.mean_response_time % 60}}s</td><td data-title="\'平均解决时间\'">{{v.mean_resolve_time/3600 | floor}}h {{v.mean_resolve_time % 3600 / 60 | floor}}m {{v.mean_resolve_time % 60}}s</td></tr></table></div></div></div></div>'),t.put("app/pages/system/cti/cti.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.cti></li></ol></div></div><div class=block><div class=loading-container ng-if=!cti.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=cti.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=cti.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>CTI</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div><button class="btn btn-primary" ng-click=cti.addCategory()>添加Category</button></div><hr><div class=row><ul class="toggle-menu col-md-6 cti-tree"><li class=open style=margin-bottom:15px ng-repeat="c in cti.cti_tree track by $index"><a href=javascript:void(0) class=submenu toggle-parent-class=open><i class="fa fa-angle-right"></i>{{c.name}} </a><span><label class="pointer text-primary padding-5" ng-click="cti.updateSwal(c,\'base/category/\')"><i class="fa fa-edit"></i></label><label class="pointer text-danger padding-5" ng-click="cti.delSwal(c, c.name, \'base/category/\')"><i class="fa fa-trash"></i></label><label class="pointer text-info padding-5" ng-click=cti.addType(c)><i class="fa fa-plus"></i></label></span><ul><li class=open ng-repeat="t in c.types track by $index"><a href=javascript:void(0) class=submenu toggle-parent-class=open><i class="fa fa-angle-right"></i>{{t.name}} </a><span><label class="pointer text-primary padding-5" ng-click="cti.updateSwal(t,\'base/type/\')"><i class="fa fa-edit"></i></label><label class="pointer text-danger padding-5" ng-click="cti.delSwal(t, t.name, \'base/type/\')"><i class="fa fa-trash"></i></label><label class="pointer text-info padding-5" ng-click=cti.addItem(t)><i class="fa fa-plus"></i></label></span><ul><li ng-repeat="i in t.items track by $index"><a href=javascript:void(0) ng-click=cti.editItem(i)>{{i.name}}</a></li></ul></li></ul></li></ul><!-- item edit --><fieldset class=col-md-6 ng-if=cti.currentItem.id><legend>Edit Item</legend><form class="item_form form-horizontal" novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-9><input type=text class=form-control ng-model=cti.currentItem.name></div></div><hr><div class=form-group><label class="col-md-3 control-label">title</label><div class=col-md-9><input type=text class=form-control ng-model=cti.currentItem.tpl_title></div></div><div class=form-group><label class="col-md-3 control-label">content</label><div class=col-md-9><textarea class=form-control rows=8 ng-model=cti.currentItem.tpl_content></textarea></div></div><hr><div class=form-group><label class="col-md-3 control-label">groups</label><div class=col-md-9><ul class=list-unstyled><li ng-repeat="map in cti.basedata.item_group_map" ng-if="map.item_id==cti.currentItem.id"><span>{{map.priority}}-{{map.group_id|baseDataMap:cti.basedata:\'group\':\'group_name\'}}</span> <span><a href ng-click=cti.delGroup(map)><i class="fa fa-close text-danger"></i></a></span></li><li><a href ng-click=cti.addGroup()><i class="fa fa-plus text-primary"></i></a></li></ul></div></div><div class=form-group><div class="col-md-9 col-md-offset-3"><button class="btn btn-primary" translate=S.Index.update ng-click=cti.updateItem()></button> <button class="btn btn-danger" translate=S.Index.delete ng-click="cti.delSwal(cti.currentItem, cti.currentItem.name, \'base/item/\')"></button> <button class="btn btn-default" translate=S.Index.cancel ng-click=cti.cancelItem()></button></div></div></form></fieldset><!-- item edit --><!-- item add --><fieldset class=col-md-6 ng-if=cti.currentType.id><legend>Add Item [Type: {{cti.currentType.name}}]</legend><form class="item_form form-horizontal" novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-9><input type=text class=form-control ng-model=cti.newItem.name></div></div><hr><div class=form-group><label class="col-md-3 control-label">title</label><div class=col-md-9><input type=text class=form-control ng-model=cti.newItem.tpl_title></div></div><div class=form-group><label class="col-md-3 control-label">content</label><div class=col-md-9><textarea class=form-control rows=10 ng-model=cti.newItem.tpl_content></textarea></div></div><div class=form-group><div class="col-md-9 col-md-offset-3"><button class="btn btn-primary" translate=S.Index.add ng-click=cti.addItemSwal()></button> <button class="btn btn-default" translate=S.Index.cancel ng-click=cti.cancelItem()></button></div></div></form></fieldset><!-- item add --></div></div></div></div>'),t.put("app/pages/system/email_tpl/email_tpl.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.email_tpl></li></ol></div></div><div class=block><div class=loading-container ng-if=!emailtpl.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=emailtpl.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=emailtpl.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ emailtpl.tplsTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=emailtpl.tplsTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'Name\'">{{m.name}}</td><td data-title="\'description\'">{{m.description}}</td><td data-title="\'#\'"><button class="btn btn-primary" ng-click=emailtpl.openEditForm(m)><i class="fa fa-edit"></i></button></td></tr></table><button class="btn btn-primary" translate=S.Index.add ng-click=emailtpl.openAddForm()></button><hr><!-- add form start --><fieldset class=addFieldset ng-if=emailtpl.newtpl><legend>Add Email Template</legend><form class=form-horizontal onsubmit="return false" name=addForm novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.name readonly required></div></div><div class=form-group><label class="col-md-3 control-label">Description</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.description required></div></div><div class=form-group><label class="col-md-3 control-label">Title</label><div class=col-md-8><input class=form-control ng-model=emailtpl.newtpl.title required></div></div><div class=form-group><label class="col-md-3 control-label">Content</label><div class=col-md-8><!-- editor start --><div class=btn-toolbar data-role=editor-toolbar data-target=.editor><div class=btn-group><a class="btn btn-default" data-edit=bold title=Bold><i class="fa fa-bold"></i></a> <a class="btn btn-default" data-edit=italic title=Italic><i class="fa fa-italic"></i></a> <a class="btn btn-default" data-edit=strikethrough title=Strikethrough><i class="fa fa-strikethrough"></i></a> <a class="btn btn-default" data-edit=underline title=Underline><i class="fa fa-underline"></i></a></div><div class=btn-group><a class="btn btn-default" title=Color toggle-next><i class="fa fa-stop text-danger"></i></a><div class="hide float-toolbar" style=width:90px><a data-edit="foreColor #ff0000"><i class="fa fa-stop" style=color:#f00></i></a> <a data-edit="foreColor #00ff00"><i class="fa fa-stop" style=color:#0f0></i></a> <a data-edit="foreColor #0000ff"><i class="fa fa-stop" style=color:#00f></i></a> <a data-edit="foreColor #000000"><i class="fa fa-stop" style=color:#000></i></a> <a data-edit="foreColor #0080ff"><i class="fa fa-stop" style=color:#0080ff></i></a></div></div><div class=btn-group><a class="btn btn-default" data-edit=justifyleft title="Align Left"><i class="fa fa-align-left"></i></a> <a class="btn btn-default" data-edit=justifycenter title=Center><i class="fa fa-align-center"></i></a> <a class="btn btn-default" data-edit=justifyright title="Align Right"><i class="fa fa-align-right"></i></a> <a class="btn btn-default" data-edit=justifyfull title=Justify><i class="fa fa-align-justify"></i></a></div><div class=btn-group><a class="btn btn-default" title=Hyperlink toggle-next><i class="fa fa-link"></i></a><div class="float-toolbar hide"><input placeholder=URL type=text data-edit=createLink style=float:left;height:32px> <button class="btn btn-default" type=button>Add</button></div><a class="btn btn-default" data-edit=unlink title="Remove Hyperlink"><i class="fa fa-cut"></i></a></div><div class=btn-group><a class="btn btn-default" data-edit=undo title=Undo><i class="fa fa-undo"></i></a> <a class="btn btn-default" data-edit=redo title=Redo><i class="fa fa-repeat"></i></a></div></div><div class=editor ng-model=emailtpl.newtpl.content contenteditable></div><textarea class="editor_html fluid-width" ng-model=emailtpl.newtpl.content rows=10></textarea><!-- editor end --></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.add ng-click=emailtpl.addTpl()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=emailtpl.cancelForm()></button></div></div></form></fieldset><!-- add form end --><!-- edit form start --><fieldset class=addFieldset ng-if=emailtpl.currenttpl><legend>Edit Email Template [{{emailtpl.currenttpl.name}}]</legend><form class=form-horizontal onsubmit="return false" name=addForm novalidate><div class=form-group><label class="col-md-3 control-label">Name</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.name readonly required></div></div><div class=form-group><label class="col-md-3 control-label">Description</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.description required></div></div><div class=form-group><label class="col-md-3 control-label">Title</label><div class=col-md-8><input class=form-control ng-model=emailtpl.currenttpl.title required></div></div><div class=form-group><label class="col-md-3 control-label">Content</label><div class=col-md-8><!-- editor start --><div class=btn-toolbar data-role=editor-toolbar data-target=.editor><div class=btn-group><a class="btn btn-default" data-edit=bold title=Bold><i class="fa fa-bold"></i></a> <a class="btn btn-default" data-edit=italic title=Italic><i class="fa fa-italic"></i></a> <a class="btn btn-default" data-edit=strikethrough title=Strikethrough><i class="fa fa-strikethrough"></i></a> <a class="btn btn-default" data-edit=underline title=Underline><i class="fa fa-underline"></i></a></div><div class=btn-group><a class="btn btn-default" title=Color toggle-next><i class="fa fa-stop text-danger"></i></a><div class="hide float-toolbar" style=width:90px><a data-edit="foreColor #ff0000"><i class="fa fa-stop" style=color:#f00></i></a> <a data-edit="foreColor #00ff00"><i class="fa fa-stop" style=color:#0f0></i></a> <a data-edit="foreColor #0000ff"><i class="fa fa-stop" style=color:#00f></i></a> <a data-edit="foreColor #000000"><i class="fa fa-stop" style=color:#000></i></a> <a data-edit="foreColor #0080ff"><i class="fa fa-stop" style=color:#0080ff></i></a></div></div><div class=btn-group><a class="btn btn-default" data-edit=justifyleft title="Align Left"><i class="fa fa-align-left"></i></a> <a class="btn btn-default" data-edit=justifycenter title=Center><i class="fa fa-align-center"></i></a> <a class="btn btn-default" data-edit=justifyright title="Align Right"><i class="fa fa-align-right"></i></a> <a class="btn btn-default" data-edit=justifyfull title=Justify><i class="fa fa-align-justify"></i></a></div><div class=btn-group><a class="btn btn-default" title=Hyperlink toggle-next><i class="fa fa-link"></i></a><div class="float-toolbar hide"><input placeholder=URL type=text data-edit=createLink style=float:left;height:32px> <button class="btn btn-default" type=button>Add</button></div><a class="btn btn-default" data-edit=unlink title="Remove Hyperlink"><i class="fa fa-cut"></i></a></div><div class=btn-group><a class="btn btn-default" data-edit=undo title=Undo><i class="fa fa-undo"></i></a> <a class="btn btn-default" data-edit=redo title=Redo><i class="fa fa-repeat"></i></a></div></div><div class=editor ng-model=emailtpl.currenttpl.content contenteditable></div><textarea class="fluid-width editor_html" ng-model=emailtpl.currenttpl.content rows=10></textarea><!-- editor end --></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.update ng-click=emailtpl.updateTpl()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=emailtpl.cancelForm()></button></div></div></form></fieldset><!-- add form end --></div></div></div>'),t.put("app/pages/system/i18n/i18n.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.i18n_setting></li></ol></div></div><div class=block id=i18n><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><uib-tabset><uib-tab ng-repeat="lang in i18n.langData" heading={{lang.lang}}><div class=row><div class=col-lg-8><div class=sub-header><button class="btn btn-primary" ng-click="i18n.save(lang.id, lang.jsonData)">保存</button></div><div class=loading-container ng-if=!i18n.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class=jsonView ng-if=i18n.showTab><json child=lang.jsonData default-collapsed=true type=object></json></div></div><div class=col-lg-4><div class=sub-header><button class="btn btn-primary" ng-click=i18n.parseJson(lang,lang.jsonString)><i class="fa fa-arrow-left"></i></button> <button class="btn btn-primary" ng-click=i18n.unparseJson(lang,lang.jsonData)><i class="fa fa-arrow-right"></i></button> <span class=red ng-if=!lang.wellFormed>JSON not well-formed!</span></div><div><textarea class=fluid-width ng-model=lang.jsonString></textarea></div></div></div></uib-tab></uib-tabset></div>'),t.put("app/pages/system/impact/impact.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.impact></li></ol></div></div><div class=block><div class=loading-container ng-if=!impact.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=impact.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=impact.tableReload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ impact.impactTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=impact.impactTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'Name (I18N)\'">{{m.name}} ( <small translate=D.Impact.level{{m.level}}></small> )</td><td data-title="\'Level\'">{{m.level}}</td><td data-title="\'响应SLA\'"><input class=form-control type=number ng-model=m.response_sla></td><td data-title="\'解决SLA\'"><input class=form-control type=number ng-model=m.resolve_sla></td><td data-title="\'#\'"><button class="btn btn-primary" ng-click=impact.updateImpact(m)><i class="fa fa-floppy-o"></i></button></td></tr></table></div></div></div>'),t.put("app/pages/system/workgroup/workgroup.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.workgroup></li></ol></div></div><div class=block><div class=loading-container ng-if=!workgroup.showTab><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><div class="panel panel-primary" ng-if=workgroup.showTab><div class=panel-heading><span class="block-options pull-right"><button class="btn btn-primary" ng-click=workgroup.reload($event)><i class="fa fa-refresh tableFresh"></i></button> </span><span>Total：{{ workgroup.workgroupTable.total() }}</span></div><div class=panel-body><div class="loading-container hide"><div class=loading><div class=l1><div></div></div><div class=l2><div></div></div><div class=l3><div></div></div><div class=l4><div></div></div></div></div><table ng-table=workgroup.workgroupTable class="table text-center vertical-center"><tr ng-repeat="m in $data"><td data-title="\'GroupName\'">{{m.group.group_name}}</td><td data-title="\'Group Users\'"><ul class=list-unstyled><li ng-repeat="u in m.users track by $index"><span>{{u.priority}}-{{u.email}}</span><!--禁用--><!--<a href ng-click="workgroup.delUser(u)" title="删除"><i class="fa fa-close text-danger"></i></a>--> <a href ng-click=workgroup.disableUser(u) ng-if="u.disabled==0" class=text-warning>禁用</a> <a href ng-click=workgroup.disableUser(u) ng-if="u.disabled==1" class=text-primary>启用</a></li></ul></td><td data-title="\'C.T.I.\'"><ul class=list-unstyled><li ng-repeat="i in m.items track by $index"><span>{{i}}</span></li></ul></td><td data-title="\'#\'"><div class=btn-group><button class="btn btn-primary" ng-click=workgroup.openAddUserForm(m.group)><i class="fa fa-plus"></i>&nbsp;用户</button></div><div class=btn-group><button class="btn btn-primary" ng-click=workgroup.openEditForm(m.group)><i class="fa fa-edit"></i></button> <button class="btn btn-danger" ng-click=workgroup.delGroup(m.group)><i class="fa fa-trash-o"></i></button></div></td></tr></table><button class="btn btn-primary" translate=S.Index.add ng-click=workgroup.openAddForm()></button><hr><!-- add form start --><fieldset class=addFieldset ng-if=workgroup.newGroup><legend>Add WorkGroup</legend><form class="form-horizontal row" onsubmit="return false" name=addForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newGroup.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newGroup.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.newGroup.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.newGroup.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.newGroup.level5_report></div></div><div class="form-group form-actions text-center"><div class="col-md-8 col-md-offset-2"><button class="btn btn-primary" ng-disabled=addForm.$invalid translate=S.Index.add ng-click=workgroup.addGroup()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset><!-- add form end --><!-- edit form start --><fieldset class=addFieldset ng-if=workgroup.currentGroup><legend>Edit WorkGroup</legend><form class=form-horizontal onsubmit="return false" name=editForm novalidate><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Name*</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.group_name required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Group Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.currentGroup.group_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Admin Email*</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.currentGroup.admin_email required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Timezone[-12,12]*</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.currentGroup.timezone placeholder=8 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">Workday[0,6]*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_day placeholder=1,2,3,4,5 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour from*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_hour_start placeholder=00:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">workhour to*</label><div class=col-md-8><input class=form-control type=text ng-model=workgroup.currentGroup.work_hour_end placeholder=24:00 required></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L1 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level1_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L2 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level2_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L3 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level3_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L4 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level4_report></div></div><div class="form-group col-md-6"><label class="col-md-4 control-label">L5 Reporter Email</label><div class=col-md-8><input class=form-control ng-model=workgroup.currentGroup.level5_report></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=editForm.$invalid translate=S.Index.update ng-click=workgroup.updateGroup()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset><!-- edit form end --><!-- add user form start --><fieldset class=addFieldset ng-if=workgroup.newUser><legend>Add User [Group: {{workgroup.newUser.group_id|baseDataMap:workgroup.basedata:\'group\':\'group_name\'}}]</legend><form class=form-horizontal onsubmit="return false" name=addUserForm novalidate><div class=form-group><label class="col-md-3 control-label">User Email</label><div class=col-md-8><input class=form-control type=email ng-model=workgroup.newUser.email required></div></div><div class=form-group><label class="col-md-3 control-label">Priority</label><div class=col-md-8><input class=form-control type=number ng-model=workgroup.newUser.priority required></div></div><div class="form-group form-actions"><div class="col-md-8 col-md-offset-3"><button class="btn btn-primary" ng-disabled=addUserForm.$invalid translate=S.Index.add ng-click=workgroup.addUser()></button> <button class="btn btn-danger" translate=S.Index.cancel ng-click=workgroup.cancelForm()></button></div></div></form></fieldset></div></div></div>'),t.put("app/pages/tt/list/list.html","<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Submenu.{{ttlist.presetMod}}></li><li ng-if=ttlist.groupname>{{ ttlist.groupname }}</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>List</li></ol></div></div><div class=block><div class=\"panel panel-primary\"><div class=panel-heading><span class=panel-controls><c3download data=ttlist.tickets></c3download><button class=\"btn btn-primary\" ng-click=ttlist.tableReload($event)><i class=\"fa fa-refresh\" ng-class=\"{'fa-spin':ttlist.loading}\"></i></button> </span><span>Total: {{ttlist.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=ttlist.loading></cmloading><div class=table-scroll ng-if=!ttlist.loading><table ng-table=ttlist.tableParams class=\"table table-hover text-center table-condensed va-m\"><tbody><tr ng-repeat=\"m in $data\" ng-class=\"{danger:m.response_timeout || m.resolve_timeout}\"><td data-title=\"'#'\"><span>{{ (ttlist.tableParams.page() - 1)*ttlist.tableParams.count() + $index + 1 }}</span></td><td data-title=\"'D.Base.ttno'|translate\"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title=\"'D.Base.impact'|translate\">{{m.impact}}-{{'D.Impact.level' + m.impact | translate}}</td><td data-title=\"'D.Base.status'|translate\">{{'D.Status.' + m.status | translate}}</td><td data-title=\"'C.T.I.'\">{{m.category | baseDataMap:ttlist.baseData:'category'}}.{{m.type | baseDataMap:ttlist.baseData:'type'}}.{{m.item | baseDataMap:ttlist.baseData:'item'}}.</td><td data-title=\"'D.Base.title'|translate\">{{m.title}}</td><td data-title=\"'D.Base.workgroup'|translate\">{{m.workgroup | baseDataMap:ttlist.baseData:'group':'group_name'}}</td><td data-title=\"'D.Base.group_user'|translate\">{{m.group_user | baseDataMap:ttlist.baseData:'group_user':'email'}}</td><td data-title=\"'D.Base.submit_user'|translate\">{{m.submit_user}}</td><td data-title=\"'D.Base.apply_user'|translate\">{{m.apply_user}}</td><td data-title=\"'D.Base.create_time'|translate\">{{m.created_at | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</td><td data-title=\"'D.Base.response_time'|translate\"><span ng-if=\"(m.response_time | date:'yyyy')>'0001'\">{{m.response_time | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</span></td><td data-title=\"'D.Base.resolved_time'|translate\"><span ng-if=\"m.status=='resolved' || m.status=='closed'\">{{m.resolve_time | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</span></td><td data-title=\"'D.Base.response_sla'|translate\"><span class=\"label label-danger\" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class=\"label label-info\" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title=\"'D.Base.resolve_sla'|translate\"><span class=\"label label-danger\" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class=\"label label-info\" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title=\"'S.TT.resolve_deadline'|translate\">{{m.resolve_deadline | amDateFormat:'YYYY-MM-DD HH:mm:ss'}}</td></tr></tbody></table></div></div></div></div>"),
t.put("app/pages/tt/new/cti_search.html",'<div class=modal-body><div class=row><div class=col-md-4><h5 translate=D.Base.category class=text-bold></h5><ul class=list-unstyled><li ng-repeat="c in ctisearch.s_c track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_c(c) ng-if="c.hide!=1">{{c.name}}</a> <span ng-if="c.hide==1">{{c.name}}</span></li></ul></div><div class=col-md-4><h5 translate=D.Base.type class=text-bold></h5><ul class=list-unstyled><li ng-repeat="t in ctisearch.s_t track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_t(t) ng-if="t.hide!=1">{{t.name}}</a> <span ng-if="t.hide==1">{{t.name}}</span></li></ul></div><div class=col-md-4><h5 translate=D.Base.item class=text-bold></h5><ul class=list-unstyled><li ng-repeat="i in ctisearch.s_i track by $index"><a href=javascript:void(0) ng-click=ctisearch.select_i(i)>{{i.name}}</a></li></ul></div></div></div><div class=modal-footer><button class="btn btn-primary" ng-click=ctisearch.cancel() translate=S.Index.back></button></div>'),t.put("app/pages/tt/new/new.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.create_tt></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>New</li></ol></div></div><div class="row block"><form name=newtt_form class="form-horizontal newtt" onsubmit="return false" novalidate><!--left--><div class=col-md-5><!--事件影响--><div class="panel panel-danger panel-border top"><div class=panel-heading><h5 translate=S.TT.effect></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.impact></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-8><select class=form-control size=1 ng-model=ttnew.ticket.impact convert-to-number required><option ng-repeat="v in ttnew.baseData.impact track by $index" value={{v.id}}>{{v.level}} - {{\'D.Impact.level\' + v.level | translate}}</option></select></div><div class=col-md-1 style=line-height:30px;padding:3px><a href=https://open-c3.github.io target=_blank><i class="fa fa-question-circle-o fa-lg"></i></a></div></div></div></div><!--C.T.I--><div class="panel panel-warning panel-border top"><div class=panel-heading><h5 class=pull-left>C.T.I.</h5><span class=pull-right><input type=text style="padding:3px 10px;height:36px" class=form-control placeholder=Search(搜索) ng-model=ttnew.cti_search_w ng-keyup="$event.keyCode == 13 ? ttnew.cti_search() : null"></span></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.category></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.category convert-to-number required><option ng-repeat="v in ttnew.baseData.category track by $index" value={{v.id}}>{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.type></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.type convert-to-number required><option ng-repeat="v in ttnew.baseData.type track by $index" value={{v.id}} ng-if="v.category_id == ttnew.ticket.category">{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.item></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.item ng-change=ttnew.item_change() convert-to-number required><option ng-repeat="v in ttnew.baseData.item track by $index" value={{v.id}} ng-if="v.type_id == ttnew.ticket.type">{{v.name}}</option></select></div></div></div></div><!--指派--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.assign></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.workgroup></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.workgroup ng-change=ttnew.group_change() convert-to-number required><option ng-repeat="v in ttnew.item_groups track by $index" value={{v.id}}>{{v.priority}} {{v.group_name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.group_user></span>&nbsp;<span class=text-danger>&nbsp;</span></label><div class=col-md-9><select class=form-control size=1 ng-model=ttnew.ticket.group_user convert-to-number><option value=""></option><option ng-repeat="v in ttnew.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttnew.ticket.workgroup && v.disabled==0">{{v.priority}} - {{v.email}}</option></select></div></div></div></div><!--联系人--><div class="panel panel-info panel-border top"><div class=panel-heading><h5 translate=S.TT.contact></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.submit_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><p class=form-control-static>{{ ttnew.ticket.submit_user }}</p></div></div><div class=form-group><label class="col-md-3 control-label"><span translate=D.Base.apply_user></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-9><input class=form-control ng-model=ttnew.ticket.apply_user required></div></div></div></div></div><!--right--><div class=col-md-7><!--事件描述--><div class="panel panel-primary panel-border top"><div class=panel-heading><h5 translate=S.TT.desc></h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label"><span translate=D.Base.title></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-10><input class=form-control ng-model=ttnew.ticket.title required></div></div><div class=form-group><label class="col-md-2 control-label"><span translate=D.Base.content></span>&nbsp;<span class=text-danger>*</span></label><div class=col-md-10><div ng-model=ttnew.ticket.content contenteditable class=tteditor></div></div></div></div></div><div class="panel panel-success panel-border top"><div class=panel-heading><h5>More</h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.email_list></label><div class=col-md-10><ng-form name=someForm><textarea name=email class=form-control rows=2 ng-model=ttnew.ticket.email_list pattern=^[a-zA-Z0-9_-]+@[a-zA-Z]+\\.[a-zA-Z]+(,[a-zA-Z0-9_-]+@[a-zA-Z]+\\.[a-zA-Z]*)*$></textarea><span style=color:red ng-show=someForm.email.$error.pattern>请输入正确的邮箱地址格式，多个邮箱地址之间用逗号分隔</span> <span class=help-block>填写OA邮箱,多个邮箱地址之间用逗号分隔</span></ng-form></div></div><hr class="short alt"><div class=form-group><label class="col-md-2 control-label" translate=D.Base.attachment></label><div class=col-md-10><input type=file nv-file-select uploader=ttnew.uploader multiple> <span class=help-block>附件最多5个，单个不大于5MB</span></div></div><div class=form-group><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="item in ttnew.uploader.queue track by $index"><i class="fa fa-file-o"></i> <b>{{$index+1}}. </b><span>{{ item.file.name }} ({{ item.file.size/1024/1024|number:2}}MB) <a href ng-click=item.remove()><i class="text-danger fa fa-times"></i></a></span></li></ul></div></div></div></div><div class="form-group text-right"><div class="col-md-9 col-md-offset-3 panel"><button ng-disabled=newtt_form.$invalid class="btn btn-primary" ng-click=ttnew.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.submit></span></button></div></div></form></div>'),t.put("app/pages/tt/new/submit.html",'<div class=modal-body><div class=text-center><i class="fa fa-check-circle-o text-info fa-4x" ng-if="ttsubmit.astatus==\'complete\'"></i> <i class="fa fa-circle-o-notch fa-spin text-primary fa-4x" ng-if="ttsubmit.astatus!=\'complete\'"></i></div><ul class=list-unstyled><li><h4 class=inline>提交(submit) <i class="text-success fa fa-check" ng-if="ttsubmit.tstatus==\'success\'"></i> <i class="text-danger fa fa-warning" ng-if="ttsubmit.tstatus==\'error\'"></i> <a href ui-sref=home.tt.show({id:ttsubmit.newTTNo}) ng-if="ttsubmit.tstatus==\'success\' && ttsubmit.astatus==\'complete\'" translate=S.Index.view ng-click=ttsubmit.cancel()></a> <span ng-if="ttsubmit.tstatus==\'success\' && ttsubmit.astatus==\'complete\'">&nbsp; redirecting in {{ttsubmit.timeSec}} seconds</span></h4></li><li ng-if="ttsubmit.uploader.queue.length > 0 && ttsubmit.tstatus == \'success\'"><h4>上传附件(uploading files)</h4><div ng-repeat="item in ttsubmit.uploader.queue track by $index" class=row><div class=col-md-6><span><b>{{ $index+1 }}.</b> {{item.file.name}} <b>({{ item.file.size/1024/1024|number:2}}MB)</b></span> <i class="fa fa-check text-success" ng-if=item.isSuccess></i> <i class="fa fa-check text-danger" ng-if=item.isError></i></div><div class=col-md-6><div class=progress><div class="progress-bar progress-bar-info" style=width:{{item.progress}}%>{{item.progress}}%</div></div></div></div></li></ul><div class=text-center ng-if="ttsubmit.tstatus!=\'success\'"><button class="btn btn-primary" ng-click="ttsubmit.go(\'home\')" translate=S.Menu.dashboard></button> <button class="btn btn-primary" ng-click=ttsubmit.cancel() translate=S.Index.back></button></div></div>'),t.put("app/pages/tt/search/search.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs16 translate=S.Menu.search_tt></li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>Search</li></ol></div></div><!-- search: start --><div class=block id=search><div class="panel panel-dark"><div class=panel-heading><span class=panel-title translate=S.Index.search></span></div><div class=panel-body><form class=form-inline><div class=widget-content><div class=row><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=起始（from） uib-datepicker-popup=yyyy-MM-dd ng-model=ttsearch.tableFilter.create_start is-open=ttsearch.dateOpen close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="ttsearch.dateOpen=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><div class="input-group fluid-width"><input type=text class=form-control placeholder=结束（to） uib-datepicker-popup=yyyy-MM-dd ng-model=ttsearch.tableFilter.create_end is-open=ttsearch.dateOpen2 close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default fluid-width" ng-click="ttsearch.dateOpen2=1"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div><div class="form-group col-md-3"><input class=form-control placeholder="group user" ng-model=ttsearch.tableFilter.group_user style=width:100%></div><div class="form-group col-md-3"><input class=form-control placeholder=keyword ng-model=ttsearch.tableFilter.keyword style=width:100%></div></div><div class=row><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.category convert-to-number style=width:100%><option value="" translate=D.Base.category></option><option ng-repeat="d in ttsearch.baseData.category track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.type convert-to-number style=width:100%><option value="" translate=D.Base.type></option><option ng-repeat="d in ttsearch.baseData.type track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.item convert-to-number style=width:100%><option value="" translate=D.Base.item></option><option ng-repeat="d in ttsearch.baseData.item track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.workgroup convert-to-number style=width:100%><option value="" translate=D.Base.workgroup></option><option ng-repeat="d in ttsearch.baseData.group track by $index" value={{d.id}}>{{d.group_name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.impact convert-to-number style=width:100%><option value="" translate=D.Base.impact></option><option ng-repeat="d in ttsearch.baseData.impact track by $index" value={{d.id}}>{{d.name}}</option></select></div><div class="form-group col-md-3"><select class=form-control ng-model=ttsearch.tableFilter.status style=width:100%><option value="" translate=D.Base.status></option><option value=assigned translate=D.Status.assigned></option><option value=wip translate=D.Status.wip></option><option value=pending translate=D.Status.pending></option><option value=resolved translate=D.Status.resolved></option><option value=closed translate=D.Status.closed></option></select></div><div class="form-group col-md-3"><input class=form-control placeholder="处理时长（单位：h）=解决时间-创建时间" ng-model=ttsearch.tableFilter.processing_time style=width:100%></div></div></div></form></div></div><div class=row><div class="col-md-4 col-md-offset-4 text-center" style=margin-bottom:20px><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=ttsearch.search()><i class="fa fa-search fa-fw"></i> <span translate=S.Index.search></span></button></div><div class=col-md-6><button class="btn btn-block btn-primary" ng-click=ttsearch.resetFilter()><i class="fa fa-repeat fa-fw"></i> <span translate=S.Index.reset></span></button></div></div></div></div><!-- search: end --><div class=block ng-if=ttsearch.searched><div class="panel panel-primary"><div class=panel-heading><span class=panel-controls><c3download data=ttsearch.tickets></c3download></span><span class=panel-title>Total: {{ttsearch.tableParams.total()}}</span></div><div class=panel-body><cmloading ng-if=ttsearch.loading></cmloading><div class=table-scroll ng-if=!ttsearch.loading><table ng-table=ttsearch.tableParams class="table table-hover text-center table-condensed va-m"><tbody><tr ng-repeat="m in $data" ng-class="{danger:m.response_timeout || m.resolve_timeout}"><td data-title="\'#\'"><span>{{ (ttsearch.tableParams.page() - 1)*ttsearch.tableParams.count() + $index + 1 }}</span></td><td data-title="\'D.Base.ttno\'|translate"><a href ui-sref=home.tt.show({id:m.no}) target=_blank>{{m.no}}</a></td><td data-title="\'D.Base.impact\'|translate">{{m.impact}}-{{\'D.Impact.level\' + m.impact | translate}}</td><td data-title="\'D.Base.status\'|translate">{{\'D.Status.\' + m.status | translate}}</td><td data-title="\'C.T.I.\'">{{m.category | baseDataMap:ttsearch.baseData:\'category\'}}.{{m.type | baseDataMap:ttsearch.baseData:\'type\'}}.{{m.item | baseDataMap:ttsearch.baseData:\'item\'}}.</td><td data-title="\'D.Base.title\'|translate">{{m.title}}</td><td data-title="\'D.Base.workgroup\'|translate">{{m.workgroup | baseDataMap:ttsearch.baseData:\'group\':\'group_name\'}}</td><td data-title="\'D.Base.group_user\'|translate">{{m.group_user | baseDataMap:ttsearch.baseData:\'group_user\':\'email\'}}</td><td data-title="\'D.Base.submit_user\'|translate">{{m.submit_user}}</td><td data-title="\'D.Base.apply_user\'|translate">{{m.apply_user}}</td><td data-title="\'D.Base.create_time\'|translate">{{m.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td><td data-title="\'D.Base.response_time\'|translate"><span ng-if="(m.response_time | date:\'yyyy\')>\'0001\'">{{m.response_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.resolved_time\'|translate"><span ng-if="m.status==\'resolved\' || m.status==\'closed\'">{{m.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></td><td data-title="\'D.Base.response_sla\'|translate"><span class="label label-danger" ng-if=m.response_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.response_timeout translate=S.TT.no_timeout></span></td><td data-title="\'D.Base.resolve_sla\'|translate"><span class="label label-danger" ng-if=m.resolve_timeout translate=S.TT.timeout></span> <span class="label label-info" ng-if=!m.resolve_timeout translate=S.TT.no_timeout></span></td><td data-title="\'S.TT.resolve_deadline\'|translate">{{m.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</td></tr></tbody></table></div></div></div></div>'),t.put("app/pages/tt/show/show.html",'<div id=topbar><div class=topbar-left><ol class=breadcrumb><li class=fs18>{{ttshow.no|uppercase}}</li></ol></div><div class=topbar-right><ol class=breadcrumb><li>Trouble Ticketing</li><li>{{ttshow.no|uppercase}}</li></ol></div></div><div ng-class="{\'tt-closed\':ttshow.ticket.status==\'closed\'}"></div><div class="row block"><div class="panel status-flow m10 mtn"><div class="panel-body br6 br-primary-light" ng-class="{\'br-danger-light\':ttshow.ticket.status==\'closed\'}"><span><h5><span translate=D.Status.assigned></span><br><small>{{ttshow.ticket.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5></span><span ng-repeat="flow in ttshow.status_flow track by $index"><h5 ng-if="$index+1<ttshow.status_flow.length"><span translate=D.Status.{{flow.oper_after}}></span><br><small>{{flow.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><h4 ng-if="$index+1==ttshow.status_flow.length"><span translate=D.Status.{{flow.oper_after}}></span><br><small>{{flow.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h4></span></div></div><div name=showtt_form class="form-horizontal showtt" onsubmit="return false" novalidate><!--left--><div class=col-md-5><!--事件信息--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.info></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.ttno></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.no }}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.submit_user></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.submit_user }}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.apply_user></label><div class=col-md-9><input class=form-control ng-model=ttshow.ticket.apply_user ng-disabled="ttshow.ticket.status==\'closed\'" required></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.status></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.status required ng-if="ttshow.ticket.status!=\'closed\'" ng-change=ttshow.changeStatus()><option value=assigned translate=D.Status.assigned></option><option value=wip translate=D.Status.wip>wip</option><option value=pending translate=D.Status.pending>pending</option><option value=resolved translate=D.Status.resolved>resolved</option></select><p ng-if="ttshow.ticket.status==\'closed\'" class="form-control-static text-red text-bold">Closed</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.create_time></label><div class=col-md-9><p class=form-control-static>{{ ttshow.ticket.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.resolved_time></label><div class=col-md-9><p class=form-control-static ng-if="ttshow.oldTicket.status==\'resolved\' || ttshow.oldTicket.status==\'closed\'">{{ ttshow.oldTicket.resolve_time | amDateFormat:\'YYYY-MM-DD HH:mm:ss\' }}</p><p class=form-control-static ng-if="ttshow.oldTicket.status!=\'resolved\' && ttshow.oldTicket.status!=\'closed\'">{{ttshow.oldTicket.resolve_days}}&nbsp;days</p></div></div></div></div><!--事件影响--><div class="panel panel-danger panel-border top"><div class=panel-heading><h5 translate=S.TT.effect></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.impact></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.impact ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.impact track by $index" value={{v.id}}>{{v.level}} - {{\'D.Impact.level\' + v.level | translate}}</option></select></div></div></div></div><!--SLA--><div class="panel panel-warning panel-border top"><div class=panel-heading><h5>S.L.A.</h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.response_sla></label><div class=col-md-9><p class=form-control-static><span ng-class="{\'text-red\':ttshow.ticket.response_timeout}">{{ttshow.ticket.response_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></p></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.resolve_sla></label><div class=col-md-9><p class=form-control-static><span ng-class="{\'text-red\':ttshow.ticket.resolve_timeout}">{{ttshow.ticket.resolve_deadline | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</span></p></div></div></div></div><!--C.T.I--><div class="panel panel-info panel-border top"><div class=panel-heading><h5>C.T.I.</h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.category></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.category ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.category track by $index" value={{v.id}}>{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.type></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.type ng-disabled="ttshow.ticket.status==\'closed\'" convert-to-number required><option ng-repeat="v in ttshow.baseData.type track by $index" value={{v.id}} ng-if="v.category_id == ttshow.ticket.category">{{v.name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.item></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.item ng-disabled="ttshow.ticket.status==\'closed\'" ng-change=ttshow.item_change() convert-to-number required><option ng-repeat="v in ttshow.baseData.item track by $index" value={{v.id}} ng-if="v.type_id == ttshow.ticket.type">{{v.name}}</option></select></div></div></div></div><!--指派--><div class="panel panel-system panel-border top"><div class=panel-heading><h5 translate=S.TT.assign></h5></div><div class=panel-body><div class=form-group><label class="col-md-3 control-label" translate=D.Base.workgroup></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.workgroup ng-disabled="ttshow.ticket.status==\'closed\'" ng-change=ttshow.group_change() convert-to-number required><option ng-repeat="v in ttshow.item_groups track by $index" value={{v.id}}>{{v.priority}} {{v.group_name}}</option></select></div></div><div class=form-group><label class="col-md-3 control-label" translate=D.Base.group_user></label><div class=col-md-9><select class=form-control size=1 ng-model=ttshow.ticket.group_user convert-to-number required ng-if="ttshow.ticket.status==\'closed\'" disabled><option ng-repeat="v in ttshow.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttshow.ticket.workgroup">{{v.priority}} - {{v.email}}</option></select><select class=form-control size=1 ng-model=ttshow.ticket.group_user convert-to-number required ng-if="ttshow.ticket.status!=\'closed\'"><option value=0 ng-if=ttshow.ticket.group_user></option><option ng-repeat="v in ttshow.baseData.group_user track by $index" value={{v.id}} ng-if="v.group_id == ttshow.ticket.workgroup && v.disabled==0">{{v.priority}} - {{v.email}}</option></select></div></div></div></div></div><!--right--><div class=col-md-7><!--事件描述--><div class="panel panel-primary panel-border top"><div class=panel-heading><h5 translate=S.TT.desc></h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.title></label><div class=col-md-10><input class=form-control ng-model=ttshow.ticket.title ng-disabled="ttshow.ticket.status==\'closed\'" required></div></div><div class=form-group><label class="col-md-2 control-label" translate=D.Base.content></label><div class=col-md-10><div ng-model=ttshow.ticket.content contenteditable class=tteditor ng-if="ttshow.ticket.status!=\'closed\'"></div><div class=tteditor ng-bind-html=ttshow.ticket.content ng-if="ttshow.ticket.status==\'closed\'"></div></div></div></div></div><div class="panel panel-success panel-border top"><div class=panel-heading><h5>More</h5></div><div class=panel-body><div class=form-group><label class="col-md-2 control-label" translate=D.Base.email_list></label><div class=col-md-10><textarea class=form-control rows=2 ng-model=ttshow.ticket.email_list ng-disabled="ttshow.ticket.status==\'closed\'"></textarea></div></div><hr class="short alt"><div class=form-group ng-if="ttshow.ticket.attachment.length<5"><label class="col-md-2 control-label" translate=D.Base.attachment></label><div class=col-md-10><input type=file nv-file-select uploader=ttshow.uploader multiple> <span class=help-block>附件最多5个，单个不大于5MB</span></div></div><div class=form-group><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="item in ttshow.uploader.queue track by $index"><i class="fa fa-file"></i> <b>{{$index+1}}. </b><span>{{ item.file.name }} ({{ item.file.size/1024/1024|number:2}}MB) <a ng-if=!item.isUploading href ng-click=item.remove()><i class="text-danger fa fa-times"></i></a> </span><a href ng-if=!item.isUploading ng-click=item.upload()><i class="fa fa-upload"></i></a> <span ng-if=item.isUploading>(<b>{{item.progress}}%</b>)</span> <span class=text-danger ng-if=item.isError>Upload Error!</span></li></ul><ul class="fa-ul col-md-10 col-md-offset-2"><li ng-repeat="a in ttshow.ticket.attachment track by $index"><i class="fa fa-file-o"></i> <b>{{$index+1}}. </b><span><a href ng-click=ttshow.download(a.uuid)>{{ a.name }}</a> ({{ a.size/1024/1024|number:2}}MB) <a href ng-click=ttshow.del_attachment(a)><i class="text-danger fa fa-times"></i></a></span></li></ul></div></div></div><uib-tabset justified=true active=ttshow.tabActive><uib-tab heading="{{\'S.Tab.reply\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/reply.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.worklog\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/worklog.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.solution\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/solution.html\'"></div></uib-tab><uib-tab heading="{{\'S.Tab.syslog\'|translate}}"><div ng-include="\'app/pages/tt/show/tabs/syslog.html\'"></div></uib-tab></uib-tabset></div></div><div class="row text-right" ng-if="ttshow.ticket.status!=\'closed\'"><div class="col-md-9 col-md-offset-3 panel"><i class="fa fa-spin fa-circle-o-notch fa-lg" ng-if=ttshow.isUpdating></i> <button ng-disabled=ttshow.isUpdating class="btn btn-system" ng-click=ttshow.init()><i class="fa fa-refresh fa-fw"></i> <span translate=S.Index.refresh></span></button> <button ng-disabled=ttshow.isUpdating class="btn btn-primary" ng-click=ttshow.submit()><i class="fa fa-send fa-fw"></i> <span translate=S.Index.update></span></button></div></div></div>'),t.put("app/pages/tt/show/tabs/reply.html",'<div class=block-section style=height:300px;overflow-y:auto><div class=row style=height:40px;margin:5px><div class="form-group col-md-10"><input class=form-control ng-model=ttshow.newReplylog></div><div class="form-group col-md-2"><a href=javascript:void(0) class="btn btn-primary" translate=S.Index.submit ng-disabled=!ttshow.newReplylog ng-click=ttshow.addReplylog()></a> {{addreplylogform}}</div></div><div style=height:240px><div ng-repeat="log in ttshow.replylog" class=reply-log><h5>{{log.oper_user}} <small>{{log.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><span>{{log.content}}</span></div></div></div>'),t.put("app/pages/tt/show/tabs/solution.html",'<div class=block-section style=height:300px;overflow-y:auto ng-class="{\'solution-highlight\':(ttshow.ticket.root_cause==\'\'||ttshow.ticket.solution==\'\') && ttshow.ticket.status==\'resolved\'}"><div class=form-group style="margin:5px 0"><label class="control-label col-md-2" translate=D.Base.root_cause></label><div class=tteditor contenteditable ng-model=ttshow.ticket.root_cause style=height:90px></div></div><div class=form-group style="margin:5px 0"><label class="control-label col-md-2" translate=D.Base.solution></label><div class=tteditor contenteditable ng-model=ttshow.ticket.solution style=height:190px></div></div></div>'),t.put("app/pages/tt/show/tabs/syslog.html","<div class=block-section style=height:300px;overflow-y:auto><ul class=list-unstyled><li ng-repeat=\"log in ttshow.syslog\"><span><b>{{log.oper_user | splitStr:'@':0 }} </b></span><span>[ {{log.created_at | amDateFormat:'YYYY-MM-DD HH:mm:ss'}} ] : </span><span><label class=label ng-class=\"{'label-primary':log.oper_type=='update', 'label-success':log.oper_type=='add', 'label-danger':log.oper_type=='delete'}\">{{log.oper_type}}</label></span>&nbsp; <span translate=D.Base.{{log.oper_column}}></span>&nbsp; <span ng-if=\"log.oper_type!='update'\"><code>{{log.content}}</code></span> <span ng-if=\"log.oper_type=='update'\"><span ng-if=\"log.oper_column!='title' && log.oper_column!='content' && log.oper_column!='root_cause' && log.oper_column!='solution' && log.oper_column!='status'\"><code>{{ log.oper_pre | historyColumnMap:log.oper_column:ttshow.baseData }}</code> -&gt; <code>{{ log.oper_after | historyColumnMap:log.oper_column:ttshow.baseData }}</code> </span><span ng-if=\"log.oper_column=='status'\"><code translate=\"D.Status.{{ log.oper_pre }}\"></code> -&gt; <code translate=\"D.Status.{{ log.oper_after }}\"></code></span></span></li></ul></div>"),t.put("app/pages/tt/show/tabs/worklog.html",'<div class=block-section style=height:300px;overflow-y:auto><div class=row style=height:40px;margin:5px><div class="form-group col-md-12"><div ng-model=ttshow.newWorklog contenteditable class=tteditor></div></div><div class="form-group col-md-12"><a href=javascript:void(0) class="btn btn-primary" translate=S.Index.submit ng-disabled=!ttshow.newWorklog ng-click=ttshow.addWorklog()></a> {{addworklogform}}</div></div><div style=height:240px><div ng-repeat="log in ttshow.worklog" class=reply-log><h5>{{log.oper_user}} <small>{{log.created_at | amDateFormat:\'YYYY-MM-DD HH:mm:ss\'}}</small></h5><div ng-bind-html=log.content></div></div></div></div>')}]);